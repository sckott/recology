<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Networks | Recology</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/tags/networks/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a4ec0cdfac731fabf363c0b5d5ab206254bbf9b6aaf985d695c6bb534196df16.css" integrity="sha256-pOwM36xzH6vzY8C11asgYlS7&#43;baq&#43;YXWlca7U0GW3xY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/networks/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/networks/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/links" title="Links">
                    <span>Links</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Networks
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">New food web dataset
    </h2>
  </header>
  <div class="entry-content">
    <p>So, there is a new food web dataset out that was put in Ecological Archives here, and I thought I would play with it. The food web is from Otago Harbour, an intertidal mudflat ecosystem in New Zealand. The web contains 180 nodes, with 1,924 links.
Fun stuff…
igraph, default layout plot
igraph, circle layout plot, nice
My funky little gggraph function plotget the gggraph function, and make it better, here at Github
</p>
  </div>
  <footer class="entry-footer"><span title='2011-10-14 13:00:00 -0500 -0500'>October 14, 2011</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Scott Chamberlain</footer>
  <a class="entry-link" aria-label="post link to New food web dataset" href="http://localhost:1313/2011/10/new-food-web-dataset/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">basic ggplot2 network graphs ver2
    </h2>
  </header>
  <div class="entry-content">
    <p>I posted last week a simple function to plot networks using ggplot2 package. Here is version 2. I still need to work on figuring out efficient vertex placement.
Changes in version 2:
You have one of three options: use an igraph object, a matrix, or a dataframe (matrices will be converted to data frames within the function) If you have data on food webs similar to that provided in the Takapoto dataset provided in the NetIndices package, you can set trophic = “TRUE”, and gggraph will use the function TrophInd to assign trophic levels (the y axis value) to each vertex/node. You have to provide additional information along with this option such as what the imports and exports are, see NetIndices documentation. I added some simple error checking. if using method=“df” and trophic=“FALSE”, x axis placement of vertices is now done using the function degreex (see inside the fxn), which sorts vertices according to their degree (so the least connected species are on the left of the graph; note that species with the same degree are not stacked on the y-axis because e.g., two vertices of degree=5 would get x=3 then x=4). # ggraph Version 2 require(bipartite) require(igraph) require(ggplot2) # gggraph, version 3 g = an igraph graph object, a matrix, or data frame # vplace = type of vertex placement assignment, one of rnorm, runif, etc. # method = one of &#39;df&#39; for data frame, &#39;mat&#39; for matrix or &#39;igraph&#39; for an # igraph graph object trophic = TRUE or FALSE for using Netindices # function TrophInd to determine trophic level (y value in graph) # trophinames = columns in matrix or dataframe to use for calculating # trophic level import = named or refereced by col# columns of matrix or # dataframe to use for import argument of TrophInd export = named or # refereced by col# columns of matrix or dataframe to use for export # argument of TrophInd dead = named or refereced by col# columns of matrix # or dataframe to use for dead argument of TrophInd gggraph &lt;- function(g, vplace = rnorm, method, trophic = &#34;FALSE&#34;, trophinames, import, export) { degreex &lt;- function(x) { degreecol &lt;- apply(x, 2, function(y) length(y[y &gt; 0])) degreerow &lt;- apply(x, 1, function(y) length(y[y &gt; 0])) degrees &lt;- sort(c(degreecol, degreerow)) df &lt;- data.frame(degrees, x = seq(1, length(degrees), 1)) df$value &lt;- rownames(df) df } # require igraph if (!require(igraph)) stop(&#34;must first install &#39;igraph&#39; package.&#34;) # require ggplot2 if (!require(ggplot2)) stop(&#34;must first install &#39;ggplot2&#39; package.&#34;) if (method == &#34;df&#34;) { if (class(g) == &#34;matrix&#34;) { g &lt;- as.data.frame(g) } if (class(g) != &#34;data.frame&#34;) stop(&#34;object must be of class &#39;data.frame.&#39;&#34;) if (trophic == &#34;FALSE&#34;) { # data preparation from adjacency matrix temp &lt;- data.frame(expand.grid(dimnames(g))[1:2], as.vector(as.matrix(g))) temp &lt;- temp[(temp[, 3] &gt; 0) &amp; !is.na(temp[, 3]), ] temp &lt;- temp[sort.list(temp[, 1]), ] g_df &lt;- data.frame(rows = temp[, 1], cols = temp[, 2], freqint = temp[, 3]) g_df$id &lt;- 1:length(g_df[, 1]) g_df &lt;- data.frame(id = g_df[, 4], rows = g_df[, 1], cols = g_df[, 2], freqint = g_df[, 3]) g_df_ &lt;- melt(g_df, id = c(1, 4)) xy_s &lt;- data.frame(degreex(g), y = rnorm(length(unique(g_df_$value)))) g_df_2 &lt;- merge(g_df_, xy_s, by = &#34;value&#34;) } else if (trophic == &#34;TRUE&#34;) { # require NetIndices if (!require(NetIndices)) stop(&#34;must first install &#39;NetIndices&#39; package.&#34;) # data preparation from adjacency matrix temp &lt;- data.frame(expand.grid(dimnames(g[-trophinames, -trophinames]))[1:2], as.vector(as.matrix(g[-trophinames, -trophinames]))) temp &lt;- temp[(temp[, 3] &gt; 0) &amp; !is.na(temp[, 3]), ] temp &lt;- temp[sort.list(temp[, 1]), ] g_df &lt;- data.frame(rows = temp[, 1], cols = temp[, 2], freqint = temp[, 3]) g_df$id &lt;- 1:length(g_df[, 1]) g_df &lt;- data.frame(id = g_df[, 4], rows = g_df[, 1], cols = g_df[, 2], freqint = g_df[, 3]) g_df_ &lt;- melt(g_df, id = c(1, 4)) xy_s &lt;- data.frame(value = unique(g_df_$value), x = rnorm(length(unique(g_df_$value))), y = TrophInd(g, Import = import, Export = export)[, 1]) g_df_2 &lt;- merge(g_df_, xy_s, by = &#34;value&#34;) } # plotting p &lt;- ggplot(g_df_2, aes(x, y)) &#43; geom_point(size = 5) &#43; geom_line(aes(size = freqint, group = id)) &#43; geom_text(size = 3, hjust = 1.5, aes(label = value)) &#43; theme_bw() &#43; opts(panel.grid.major = theme_blank(), panel.grid.minor = theme_blank(), axis.text.x = theme_blank(), axis.text.y = theme_blank(), axis.title.x = theme_blank(), axis.title.y = theme_blank(), axis.ticks = theme_blank(), panel.border = theme_blank(), legend.position = &#34;none&#34;) p # return graph } else if (method == &#34;igraph&#34;) { if (class(g) != &#34;igraph&#34;) stop(&#34;object must be of class &#39;igraph.&#39;&#34;) # data preparation from igraph object g_ &lt;- get.edgelist(g) g_df &lt;- as.data.frame(g_) g_df$id &lt;- 1:length(g_df[, 1]) g_df &lt;- melt(g_df, id = 3) xy_s &lt;- data.frame(value = unique(g_df$value), x = vplace(length(unique(g_df$value))), y = vplace(length(unique(g_df$value)))) g_df2 &lt;- merge(g_df, xy_s, by = &#34;value&#34;) # plotting p &lt;- ggplot(g_df2, aes(x, y)) &#43; geom_point(size = 2) &#43; geom_line(size = 0.3, aes(group = id, linetype = id)) &#43; geom_text(size = 3, hjust = 1.5, aes(label = value)) &#43; theme_bw() &#43; opts(panel.grid.major = theme_blank(), panel.grid.minor = theme_blank(), axis.text.x = theme_blank(), axis.text.y = theme_blank(), axis.title.x = theme_blank(), axis.title.y = theme_blank(), axis.ticks = theme_blank(), panel.border = theme_blank(), legend.position = &#34;none&#34;) p # return graph } else stop(paste(&#34;do not recognize method = \&#34;&#34;, method, &#34;\&#34;;\nmethods are \&#34;df\&#34; and \&#34;igraph\&#34;&#34;, sep = &#34;&#34;)) } # Eg library(NetIndices) data(Takapoto) gggraph(Takapoto, vplace = rnorm, method = &#34;df&#34;, trophic = &#34;TRUE&#34;, trophinames = c(8:10), import = &#34;CO2&#34;, export = c(&#34;CO2&#34;, &#34;Sedimentation&#34;, &#34;Grazing&#34;)) ...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-23 14:09:00 -0500 -0500'>March 23, 2011</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Scott Chamberlain</footer>
  <a class="entry-link" aria-label="post link to basic ggplot2 network graphs ver2" href="http://localhost:1313/2011/03/basic-ggplot2-network-graphs-ver2/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">basic ggplot2 network graphs
    </h2>
  </header>
  <div class="entry-content">
    <p>I have been looking around on the web and have not found anything yet related to using ggplot2 for making graphs/networks. I put together a few functions to make very simple graphs. The bipartite function especially is not ideal, as of course we only want to allow connections between unlike nodes, not all nodes. These functions do not, obviously, take full advantage of the power of ggplot2, but it’s a start.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-03-17 08:35:00 -0500 -0500'>March 17, 2011</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Scott Chamberlain</footer>
  <a class="entry-link" aria-label="post link to basic ggplot2 network graphs" href="http://localhost:1313/2011/03/basic-ggplot2-network-graphs/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Bipartite networks and R
    </h2>
  </header>
  <div class="entry-content">
    <p>Earlier, I posted about generating networks from abundance distributions that you specify. If this post was interesting, check out Jeff Kilpatrick’s website, where he provides code he produced in R and Octave to compare real bipartite networks to ones generated based on ecological variables measured in the field (in our case it was abundance, body size, and nectar production). We used that code for a paper we published. Code was modified from code produced by Diego P. Vazquez.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-01-14 09:05:00 -0600 -0600'>January 14, 2011</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Scott Chamberlain</footer>
  <a class="entry-link" aria-label="post link to Bipartite networks and R" href="http://localhost:1313/2011/01/bipartite-networks-and-r/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Ecological networks from abundance distributions
    </h2>
  </header>
  <div class="entry-content">
    <p>Another grad student and I tried recently to make a contribution to our understanding of the relationship between ecological network structure (e.g., nestedness) and community structure (e.g., evenness)…
…Alas, I had no luck making new insights. However, I am providing the code used for this failed attempt in hopes that someone may find it useful. This is very basic code. It was roughly based off of the paper by Bluthgen et al. 2008 Ecology (here). In my code the number of interactions is set to 600, and there are 30 plant species, and 10 animal species. This assumes they share the same abundance distributions and sigma values.
...</p>
  </div>
  <footer class="entry-footer"><span title='2011-01-06 08:58:00.001 -0600 -0600'>January 6, 2011</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Scott Chamberlain</footer>
  <a class="entry-link" aria-label="post link to Ecological networks from abundance distributions" href="http://localhost:1313/2011/01/ecological-networks-from-abundance/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Recology</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
