<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Topojson on Recology</title>
    <link>http://localhost:1313/tags/topojson/</link>
    <description>Recent content in Topojson on Recology</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 30 Apr 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/topojson/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>geojsonio - a new package to do geojson things</title>
      <link>http://localhost:1313/2015/04/geojson-io/</link>
      <pubDate>Thu, 30 Apr 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/04/geojson-io/</guid>
      <description>geojsonio converts geographic data to GeoJSON and TopoJSON formats - though the focus is mostly on GeoJSON
For those not familiar GeoJSON it is a format for encoding a variety of geographic data structures. GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection. These geometry types are also found in well known text (WKT), and have equivalents in R&amp;rsquo;s spatial classes. Read the spec for more detailed information.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p><code>geojsonio</code> converts geographic data to GeoJSON and TopoJSON formats - though the focus is mostly on GeoJSON</p>
<p>For those not familiar GeoJSON it is a format for encoding a variety of geographic data structures. GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection. These geometry types are also found in <a href="https://en.wikipedia.org/wiki/Well-known_text">well known text (WKT)</a>, and have equivalents in R&rsquo;s spatial classes. Read the <a href="https://geojson.org/geojson-spec.html">spec</a> for more detailed information.</p>
<p>Other great geojson resources:</p>
<ul>
<li>GeoJSON lint - lint your geojson - <a href="https://geojsonlint.com/">https://geojsonlint.com/</a></li>
<li>GeoJSON.io - make maps with geojson input or draw maps and get geojson - <a href="https://geojson.io/">https://geojson.io/</a></li>
</ul>
<p>Functions in this package are organized first around what you&rsquo;re working with or want to get, geojson or topojson, then convert to or read from various formats:</p>
<ul>
<li><code>geojson_list()</code> - convert to GeoJSON as R list format</li>
<li><code>geojson_json()</code> - convert to GeoJSON as json</li>
<li><code>geojson_read()</code>/<code>topojson_read()</code> - read a GeoJSON/TopoJSON file from file path or URL</li>
<li><code>geojson_write()</code> - write a GeoJSON file locally (no write TopoJSON yet)</li>
</ul>
<p>Each of the above functions have methods for various objects/classes, including <code>numeric</code>, <code>data.frame</code>, <code>list</code>, <code>SpatialPolygons</code>, <code>SpatialLines</code>, <code>SpatialPoints</code>, etc. (including the classes in <code>rgeos</code>)</p>
<p>Use cases for this package include (but not limited to, obs.) the following:</p>
<ul>
<li>Get data in GeoJSON json format, and you want to get it into a list in R.</li>
<li>Get data into GeoJSON format to use downstream to make a interactive map
<ul>
<li>in R (e.g., with <a href="https://github.com/rstudio/leaflet">leaflet</a>)</li>
<li>or in another context (e.g., using javascript with mapbox/leaflet)</li>
</ul>
</li>
<li>Data is in a data.frame/matrix/list and you want to make GeoJSON format data.</li>
<li>Data is in one of the many spatial classes (e.g., <code>SpatialPoints</code>) and you want GeoJSON</li>
<li>You need to add styling to your data - can do with this package for certain data types.</li>
<li>You want to check that your GeoJSON data is valid - two ways to do it in geojsonio.</li>
<li>Combine objects together (e.g., a point and a line), either from two <code>geo_list</code> objects, or two <code>json</code> objects. See <code>?geojson-add</code></li>
</ul>
<h2 id="install">Install</h2>
<p>See the github repo for notes about dependencies <a href="https://github.com/ropensci/geojsonio#install">https://github.com/ropensci/geojsonio#install</a></p>
<p>CRAN version or the dev version from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;sckott/geojsonio&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span></code></pre></div><h2 id="geojson">GeoJSON</h2>
<h3 id="convert-various-formats-to-geojson">Convert various formats to geojson</h3>
<p>From a <code>numeric</code> vector of length 2</p>
<p>as <em>json</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>, <span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[32.45,-99.74]},&#34;properties&#34;:{}}]}</span>
</span></span></code></pre></div><p>as a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>, <span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From a <code>data.frame</code></p>
<p>as <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{&#34;name&#34;:&#34;Abilene TX&#34;,&#34;country.etc&#34;:&#34;TX&#34;,&#34;pop&#34;:&#34;113888&#34;,&#34;capital&#34;:&#34;0&#34;}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-81.52,41.08]},&#34;properties&#34;:{&#34;name&#34;:&#34;Akron OH&#34;,&#34;country.etc&#34;:&#34;OH&#34;,&#34;pop&#34;:&#34;206634&#34;,&#34;capital&#34;:&#34;0&#34;}}]}</span>
</span></span></code></pre></div><p>as a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From <code>SpatialPolygons</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;sp&#39;</span>)
</span></span><span style="display:flex;"><span>poly1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>, <span style="color:#ae81ff">-90</span>, <span style="color:#ae81ff">-85</span>, <span style="color:#ae81ff">-100</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">45</span>, <span style="color:#ae81ff">40</span>)))), <span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>poly2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-90</span>, <span style="color:#ae81ff">-80</span>, <span style="color:#ae81ff">-75</span>, <span style="color:#ae81ff">-90</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">30</span>)))), <span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>(sp_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(poly1, poly2), <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;SpatialPolygons&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;polygons&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;Polygons&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;Polygons&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;Polygon&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;labpt&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -91.66667  45.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>to <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:1,&#34;properties&#34;:{&#34;dummy&#34;:0},&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[-100,40],[-90,50],[-85,45],[-100,40]]]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:2,&#34;properties&#34;:{&#34;dummy&#34;:0},&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[-90,30],[-80,40],[-75,35],[-90,30]]]}}]}</span>
</span></span></code></pre></div><p>to a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From <code>SpatialPoints</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>(s <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPoints</span>(<span style="color:#a6e22e">cbind</span>(x, y)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; SpatialPoints:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      x y</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1,] 1 3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [2,] 2 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [3,] 3 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [4,] 4 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [5,] 5 4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Coordinate Reference System (CRS) arguments: NA</span>
</span></span></code></pre></div><p>to <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(s)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:1,&#34;properties&#34;:{&#34;dat&#34;:1},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[1,3]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:2,&#34;properties&#34;:{&#34;dat&#34;:2},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[2,2]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:3,&#34;properties&#34;:{&#34;dat&#34;:3},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[3,5]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:4,&#34;properties&#34;:{&#34;dat&#34;:4},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[4,1]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:5,&#34;properties&#34;:{&#34;dat&#34;:5},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[5,4]}}]}</span>
</span></span></code></pre></div><p>to a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(s)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><h3 id="combine-objects">Combine objects</h3>
<p><code>geo_list</code> + <code>geo_list</code></p>
<blockquote>
<p>Note: <code>geo_list</code> is the output type from <code>geojson_list()</code>, it&rsquo;s just a list with a class attached so we know it&rsquo;s geojson :)</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vec <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-99.74</span>, <span style="color:#ae81ff">32.45</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(vec)
</span></span><span style="display:flex;"><span>vecs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>))
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(vecs, geometry <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;polygon&#34;</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p><code>json</code> + <code>json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-99.74</span>, <span style="color:#ae81ff">32.45</span>))
</span></span><span style="display:flex;"><span>vecs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">1.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">1.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>))
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_json</span>(vecs, geometry <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;polygon&#34;</span>)
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">+</span> d
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[100,0],[101,0],[101,1],[100,1],[100,0]]]},&#34;properties&#34;:[]}]}</span>
</span></span></code></pre></div><h3 id="write-geojson">Write geojson</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_write</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;geojson&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   Path:       myfile.geojson</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   From class: data.frame</span>
</span></span></code></pre></div><h2 id="topojson">Topojson</h2>
<p>In the current version of this package you can read topojson. Writing topojson was in this package, but is gone for now - will come back later as in interface to <a href="https://github.com/mbostock/topojson">topojson</a> via <a href="https://github.com/jeroenooms/V8">V8</a>.</p>
<p>Read from a file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;us_states.topojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(file)
</span></span></code></pre></div><p>Read from a URL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(url)
</span></span></code></pre></div><h2 id="lint-geojson">Lint geojson</h2>
<p>There are two ways to do this in this package.</p>
<h3 id="lint-locally">lint, locally</h3>
<p>Uses the javascript library <a href="https://github.com/mapbox/geojsonhint">geojsonhint</a> from Mapbox. We&rsquo;re running this locally via the <a href="https://cran.rstudio.com/web/packages/V8/">V8</a> package.</p>
<p>Good</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">lint</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;valid&#34;</span>
</span></span></code></pre></div><p>Bad</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">lint</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;The type Rhombus is unknown&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $line</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span></code></pre></div><h3 id="validate-with-a-web-service">validate, with a web service</h3>
<p>Uses the web service at <a href="https://geojsonlint.com/">https://geojsonlint.com/</a></p>
<p>Good</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>Bad</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;\&#34;Rhombus\&#34; is not a valid GeoJSON type.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;error&#34;</span>
</span></span></code></pre></div><h2 id="to-do">To do</h2>
<ul>
<li>I&rsquo;d like to replace <code>rgdal</code> with javascript libraries to read from various file types (kml, shp, etc.) and convert to geojson. This is <a href="https://github.com/ropensci/geojsonio/tree/js">in development</a>, and will come in the next version of this package most likely. This should make installation a bit easier as we won&rsquo;t have to depend on <code>rgdal</code> and <code>GDAL</code></li>
<li>Performance improvements. Some operations already use the gdal or geos C libraries, so are quite fast, though the round trip to disk and back does take significant time. I&rsquo;d like to speed this up.</li>
<li>More input types. We already have operations (json, list, etc.) for lots of input types (data.frame, list, sp classes), but likely there will be more added.</li>
<li>Most likely add functions <code>topojson_list()</code>, <code>topojson_json()</code></li>
</ul>
]]></content:encoded>
    </item>
    <item>
      <title>R I/O for geojson and topojson</title>
      <link>http://localhost:1313/2015/01/geojson-topojson-io/</link>
      <pubDate>Tue, 06 Jan 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/01/geojson-topojson-io/</guid>
      <description>At rOpenSci we&amp;rsquo;ve been working on an R package (geojsonio) to make converting R data in various formats to geoJSON and topoJSON, and vice versa. We hope to do this one job very well, and handle all reasonable use cases.
Functions in this package are organized first around what you&amp;rsquo;re working with or want to get, geojson or topojson, then convert to or read from various formats:
geojson_list()/topojson_list() - convert to geojson/topojson as R list format geojson_json()/topojson_json() - convert to geojson/topojson as json geojson_read()``topojson_read() - read a geojson/topojson file from file path or URL geojson_write()/topojson_write() - write a geojson/topojson file locally Each of the above functions have methods for various objects/classes, including numeric, data.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>At rOpenSci we&rsquo;ve been working on an R package (<code>geojsonio</code>) to make converting R data in various formats to <a href="https://geojson.org/geojson-spec.html">geoJSON</a> and <a href="https://github.com/topojson/topojson-specification/blob/master/README.md">topoJSON</a>, and vice versa. We hope to do this one job very well, and handle all reasonable use cases.</p>
<p>Functions in this package are organized first around what you&rsquo;re working with or want to get, <code>geojson</code> or <code>topojson</code>, then convert to or read from various formats:</p>
<ul>
<li><code>geojson_list()</code>/<code>topojson_list()</code> - convert to geojson/topojson as R list format</li>
<li><code>geojson_json()</code>/<code>topojson_json()</code> - convert to geojson/topojson as json</li>
<li><code>geojson_read()``topojson_read()</code> - read a geojson/topojson file from file path or URL</li>
<li><code>geojson_write()</code>/<code>topojson_write()</code> - write a geojson/topojson file locally</li>
</ul>
<p>Each of the above functions have methods for various objects/classes, including <code>numeric</code>, <code>data.frame</code>, <code>list</code>, <code>SpatialPolygons</code>, <code>SpatialPolygonsDataFrame</code>, <code>SpatialLines</code>, <code>SpatialLinesDataFrame</code>, <code>SpatialPoints</code>, <code>SpatialPointsDataFrame</code>.</p>
<h2 id="install">Install</h2>
<p>Install rgdal - in case you can&rsquo;t get it installed from binary , here&rsquo;s what works on a Mac.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;https://cran.r-project.org/src/contrib/rgdal_0.9-1.tar.gz&#34;</span>, repos <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;source&#34;</span>, configure.args <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/1.10/unix/bin/gdal-config --with-proj-include=/Library/Frameworks/PROJ.framework/unix/include --with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib&#34;</span>)
</span></span></code></pre></div><p>Install <code>geojsonio</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;devtools&#34;</span>)
</span></span><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/geojsonio&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span></code></pre></div><h2 id="geojson">GeoJSON</h2>
<h3 id="convert-various-formats-to-geojson">Convert various formats to geojson</h3>
<p>From a <code>numeric</code> vector of length 2, as json or list</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>,<span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;Point&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[32.45,-99.74]},&#34;properties&#34;:{}}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>,<span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1]  32.45 -99.74</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; NULL</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;geo_list&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;from&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;numeric&#34;</span>
</span></span></code></pre></div><p>From a <code>data.frame</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;maps&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{&#34;name&#34;:&#34;Abilene TX&#34;,&#34;country.etc&#34;:&#34;TX&#34;,&#34;pop&#34;:&#34;113888&#34;,&#34;capital&#34;:&#34;0&#34;}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-81.52,41.08]},&#34;properties&#34;:{&#34;name&#34;:&#34;Akron OH&#34;,&#34;country.etc&#34;:&#34;OH&#34;,&#34;pop&#34;:&#34;206634&#34;,&#34;capital&#34;:&#34;0&#34;}}]}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -99.74  32.45</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Abilene TX&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$country.etc</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;TX&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$pop</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;113888&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$capital</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -81.52  41.08</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Akron OH&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$country.etc</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;OH&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$pop</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;206634&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$capital</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;geo_list&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;from&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;data.frame&#34;</span>
</span></span></code></pre></div><p>From <code>SpatialPolygons</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;sp&#39;</span>)
</span></span><span style="display:flex;"><span>poly1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>,<span style="color:#ae81ff">-90</span>,<span style="color:#ae81ff">-85</span>,<span style="color:#ae81ff">-100</span>),
</span></span><span style="display:flex;"><span>                                     <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">50</span>,<span style="color:#ae81ff">45</span>,<span style="color:#ae81ff">40</span>)))), <span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>poly2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-90</span>,<span style="color:#ae81ff">-80</span>,<span style="color:#ae81ff">-75</span>,<span style="color:#ae81ff">-90</span>),
</span></span><span style="display:flex;"><span>                                     <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">35</span>,<span style="color:#ae81ff">30</span>)))), <span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>sp_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(poly1, poly2), <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>to json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;Polygon&#34;,&#34;bbox&#34;:[-100,-75,30,50],&#34;coordinates&#34;:[[[-100,40],[-90,50],[-85,45],[-100,40]],[[-90,30],[-80,40],[-75,35],[-90,30]]],&#34;properties&#34;:{}}</span>
</span></span></code></pre></div><p>to list</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(sp_poly)<span style="color:#f92672">$</span>coordinates[[1]]
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -100</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 40</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -90</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 50</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -85</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 45</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -100</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 40</span>
</span></span></code></pre></div><h3 id="write-geojson">Write geojson</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;maps&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_write</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;geojson&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   Path:       myfile.geojson</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   From class: data.frame</span>
</span></span></code></pre></div><h3 id="read-geojson">Read geojson</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;california.geojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_read</span>(file)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: GeoJSON </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;/Users/sacmac/Library/R/3.1/library/geojsonio/examples/california.geojson&#34;, layer: &#34;OGRGeoJSON&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 1 features and 11 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbMultiPolygon with 2 dimensions</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11"  />
</p>
<h2 id="topojson">TopoJSON</h2>
<h3 id="convert-to-topojson-with-node-topojson-client">Convert to TopoJSON with Node topojson client</h3>
<p>For topojson you will need Mike Bostock&rsquo;s command line client. Install it by doing</p>
<pre tabindex="0"><code>sudo npm install -g topojson
</code></pre><p>Download a zipped shape fileset, <a href="https://esp.cr.usgs.gov/data/little/querwisl.zip">this one</a> for distribution of <em>Quercus wislizeni</em>. Unzip the zip file to a folder. Then do (changing the path to your path)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">topojson_write</span>(shppath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;~/Downloads/querwisl&#39;</span>, path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;~/Downloads&#34;</span>, projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;albers&#39;</span>, projargs<span style="color:#f92672">=</span><span style="color:#a6e22e">list</span>(rotate<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;[60, -35, 0]&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: ESRI Shapefile </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;/Users/sacmac/Downloads/querwisl&#34;, layer: &#34;querwisl&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 35 features and 5 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbPolygon with 2 dimensions</span>
</span></span></code></pre></div><p>Which prints progress on the conversion of the shape file. And prints the topojson CLI call, including the location of the output file, here <code>/Users/sacmac/querwisl.json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>OGR data source with driver<span style="color:#f92672">:</span> ESRI Shapefile
</span></span><span style="display:flex;"><span>Source<span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/Users/sacmac/Downloads/querwisl&#34;</span>, layer<span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;querwisl&#34;</span>
</span></span><span style="display:flex;"><span>with <span style="color:#ae81ff">35</span> features and <span style="color:#ae81ff">5</span> fields
</span></span><span style="display:flex;"><span>Feature type<span style="color:#f92672">:</span> wkbPolygon with <span style="color:#ae81ff">2</span> dimensions
</span></span><span style="display:flex;"><span>topojson <span style="color:#f92672">-</span>o <span style="color:#f92672">/</span>Users<span style="color:#f92672">/</span>sacmac<span style="color:#f92672">/</span>querwisl.json <span style="color:#f92672">-</span>q <span style="color:#ae81ff">1e4</span> <span style="color:#f92672">-</span>s <span style="color:#ae81ff">0</span> <span style="color:#f92672">--</span>shapefile<span style="color:#f92672">-</span>encoding utf8 <span style="color:#f92672">--</span>projection <span style="color:#e6db74">&#39;d3.geo.albers().rotate([60, -35, 0])&#39;</span> <span style="color:#f92672">--</span> <span style="color:#f92672">/</span>var<span style="color:#f92672">/</span>folders<span style="color:#f92672">/</span>gs<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>khph0xs0436gmd2gdnwsg080000gn<span style="color:#f92672">/</span>T<span style="color:#f92672">//</span>Rtmp49APW7<span style="color:#f92672">/</span>querwisl.shp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bounds<span style="color:#f92672">:</span> <span style="color:#ae81ff">-403.2554825867553</span> <span style="color:#ae81ff">401.27189387582916</span> <span style="color:#ae81ff">-295.798050380061</span> <span style="color:#ae81ff">585.4214768677039</span> (cartesian)
</span></span><span style="display:flex;"><span>pre<span style="color:#f92672">-</span>quantization<span style="color:#f92672">:</span> <span style="color:#ae81ff">0.010746817902459677</span> <span style="color:#ae81ff">0.018416799979185387</span>
</span></span><span style="display:flex;"><span>topology<span style="color:#f92672">:</span> <span style="color:#ae81ff">35</span> arcs, <span style="color:#ae81ff">2492</span> points
</span></span><span style="display:flex;"><span>prune<span style="color:#f92672">:</span> retained <span style="color:#ae81ff">35</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">35</span> <span style="color:#a6e22e">arcs </span>(<span style="color:#ae81ff">100</span>%)
</span></span></code></pre></div><p>You can then use this topojson file wherever. We&rsquo;ll add a function soon to automagically throw this file up as a Github gist to get an interactive map.</p>
<h3 id="read-topojson">Read topojson</h3>
<p>TopoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(url)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: GeoJSON </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;, layer: &#34;states&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 51 features and 2 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbPolygon with 2 dimensions</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14"  />
</p>
<h2 id="use-case-play-with-us-states">Use case: Play with US states</h2>
<p>Using data from <a href="https://github.com/glynnbird/usstatesgeojson">https://github.com/glynnbird/usstatesgeojson</a></p>
<p>Get some geojson</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;httr&#39;</span>)
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#39;https://api.github.com/repos/glynnbird/usstatesgeojson/contents&#39;</span>)
</span></span><span style="display:flex;"><span>st_names <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Filter</span>(<span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;\\.geojson&#34;</span>, x), <span style="color:#a6e22e">sapply</span>(<span style="color:#a6e22e">content</span>(res), <span style="color:#e6db74">&#34;[[&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span>))
</span></span><span style="display:flex;"><span>base <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;https://raw.githubusercontent.com/glynnbird/usstatesgeojson/master/&#39;</span>
</span></span><span style="display:flex;"><span>st_files <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(base, st_names)
</span></span></code></pre></div><p>Make a faceted plot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;ggplot2&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;plyr&#39;</span>)
</span></span><span style="display:flex;"><span>st_use <span style="color:#f92672">&lt;-</span> st_files[7<span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>]
</span></span><span style="display:flex;"><span>geo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(st_use, geojson_read, verbose <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(<span style="color:#a6e22e">setNames</span>(<span style="color:#a6e22e">lapply</span>(geo, fortify), <span style="color:#a6e22e">gsub</span>(<span style="color:#e6db74">&#34;\\.geojson&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, st_names[7<span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>])))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(df, <span style="color:#a6e22e">aes</span>(long, lat, group <span style="color:#f92672">=</span> group)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_polygon</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> .id, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free&#34;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16"  />
</p>
<h2 id="maps">Maps</h2>
<p>We&rsquo;re also working on <code>map_gist()</code> - to push up a geojson or topojson file as a GitHub gist (renders as an interactive map). It still needs some work&hellip;</p>
<h2 id="validate-geojson">Validate geojson</h2>
<p><a href="https://geojsonlint.com/">geojsonlint.com</a> has a nice web interface you can use to make sure you&rsquo;re geoJSON is in the right format. In addition, it provides a RESTful endpoint at <code>geojsonlint.com/validate</code> to validate geoJSON.
This was just added today in this package, and can be used from many data types.</p>
<p>Good geoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>Bad geoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;\&#34;Rhombus\&#34; is not a valid GeoJSON type.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;error&#34;</span>
</span></span></code></pre></div><p>A file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;zillow_or.geojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;togeojson&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.location</span>(file))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>A URL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/glynnbird/usstatesgeojson/master/california.geojson&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#a6e22e">as.location</span>(url))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>From the output of <code>geojson_list()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;maps&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>From SpatialPoints class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;sp&#34;</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPoints</span>(<span style="color:#a6e22e">cbind</span>(a,b))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
  </channel>
</rss>
