<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Ropensci on Recology</title>
    <link>http://localhost:1313/tags/ropensci/</link>
    <description>Recent content in Ropensci on Recology</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 19 Oct 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/ropensci/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Metrics for open source projects</title>
      <link>http://localhost:1313/2015/10/open-source-metrics/</link>
      <pubDate>Mon, 19 Oct 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/10/open-source-metrics/</guid>
      <description><![CDATA[<p>Measuring use of open source software isn&rsquo;t always straightforward. The problem is especially acute for software targeted largely at academia, where usage is not measured just by software downloads, but also by citations.</p>
<p>Citations are a well-known pain point because the citation graph is privately held by iron doors (e.g., <a href="https://www.scopus.com/">Scopus</a>, <a href="https://scholar.google.com/">Google Scholar</a>). New ventures aim to open up citation data, but of course it&rsquo;s an immense amount of work, and so does not come quickly.</p>
<p>The following is a laundry list of metrics on software of which I am aware, and some of which I use in our <a href="https://ropensci.github.io/biweekly/">rOpenSci twice monthly updates</a>.</p>
<p>I primarily develop software for the R language, so some of the metrics are specific to R, but many are not. In addition, we (rOpenSci) don&rsquo;t develop web apps, which may bring in an additional set of metrics not covered below.</p>
<p>I organize by source instead of type of data because some sources give multiple kinds of data - I note what kinds of data they give with <!-- raw HTML omitted -->labels<!-- raw HTML omitted -->.</p>
<h2 id="cran-downloads">CRAN downloads</h2>

<span class="label label-warning">downloads</span>

<ul>
<li>Link: <a href="https://github.com/metacran/cranlogs.app">https://github.com/metacran/cranlogs.app</a></li>
<li>This is a REST API for CRAN downloads from the RStudio CRAN CDN. Note however, that the RStudio CDN is only one of many - there are other mirrors users can insall packages from, and are not included in this count. However, a significant portion of downloads probably come from the RStudio CDN.</li>
<li>Other programming languages have similar support, e.g., <a href="https://guides.rubygems.org/rubygems-org-api/">Ruby</a> and <a href="https://github.com/npm/download-counts">Node</a>.</li>
</ul>
<h2 id="lagotto">Lagotto</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --> <!-- raw HTML omitted -->social-media<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://software.lagotto.io/works">https://software.lagotto.io/works</a></li>
<li>Lagotto is a Rails application, developed by <a href="https://github.com/mfenner">Martin Fenner</a>, originally designed to collect and provide article level metrics for scientific publications at Public Library of Science. It is now used by many publishers, and there are installations of Lagotto targeting <a href="https://mdc.lagotto.io/">datasets</a> and <a href="https://software.lagotto.io/works">software</a>.</li>
<li>Discussion forum: <a href="https://discuss.lagotto.io/">https://discuss.lagotto.io/</a></li>
</ul>
<h2 id="depsy">Depsy</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://depsy.org">https://depsy.org</a></li>
<li>This is a nascent venture by the <a href="https://impactstory.org/about">ImpactStory team</a> that seeks to uncover the impact of research software. As far as I can tell, they&rsquo;ll collect usage via software downloads and citations in the literature.</li>
</ul>
<h2 id="web-site-analytics">Web Site Analytics</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->page-views<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>If you happen to have a website for your project, collecting analytics is a way to gauge views of the landing page, and any help/tutorial pages you may have. A good easy way to do this is a deploy a basic site on your <code>gh-pages</code> branch of your GitHub repo, and use the easily integrated Google Analytics.</li>
<li>Whatever analytics you use, in my experience this mostly brings up links from google searches and blog posts that may mention your project</li>
<li>Google Analytics beacon (for README views): <a href="https://github.com/igrigorik/ga-beacon">https://github.com/igrigorik/ga-beacon</a>. I haven&rsquo;t tried this yet, but seems promising.</li>
</ul>
<h2 id="auomated-tracking-ssnmp">Auomated tracking: SSNMP</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://scisoft-net-map.isri.cmu.edu">https://scisoft-net-map.isri.cmu.edu</a></li>
<li>Scientific Software Network Map Project</li>
<li>This is a cool NSF funded project by Chris Bogart that tracks software usage via GitHub and citations in literature.</li>
</ul>
<h2 id="google-scholar">Google Scholar</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://scholar.google.com/">https://scholar.google.com/</a></li>
<li>Searching Google Scholar for software citations manually is fine at a small scale, but at a larger scale scraping is best. However, you&rsquo;re not legally supposed to do this, and Google will shut you down.</li>
<li>Could try using g-scholar alerts as well, especially if new citations of your work are infrequent.</li>
<li>If you have institutional access to Scopus/Web of Science, you could search those, but I don&rsquo;t push this as an option since it&rsquo;s available to so few.</li>
</ul>
<h2 id="github">GitHub</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Links: <a href="https://developer.github.com/v3/">https://developer.github.com/v3/</a></li>
<li>I keep a list of rOpenSci uses found in GitHub repos at <a href="https://discuss.ropensci.org/t/use-of-some-ropensci-packages-on-github/137">https://discuss.ropensci.org/t/use-of-some-ropensci-packages-on-github/137</a></li>
<li>GitHub does collect traffic data on each repo (clones, downloads, page views), but they are not exposed in the API. I&rsquo;ve bugged them a bit about this - hopefully we&rsquo;ll be able to get that dat in their API soon.</li>
<li>Bitbucket/Gitlab - don&rsquo;t use them, but I assume they also provide some metrics via their APIs</li>
</ul>
<h2 id="other">Other</h2>
<ul>
<li>Support forums: Whether you use UserVoice, Discourse, Google Groups, Gitter, etc., depending on your viewpoint, these interactions could be counted as metrics of software usage.</li>
<li>Emails: I personally get a lot of emails asking for help with software I maintain. I imagine this is true for most software developers. Counting these could be another metric of software usage, although I never have counted mine.</li>
<li>Social media: See Lagotto above, which tracks some social media outlets.</li>
<li>Code coverage: There are many options now for code coverage, integrated with each Travis-CI build. A good option is <a href="https://codecov.io">CodeCov</a>. CodeCov gives percentage test coverage, which one could use as one measure of code quality.</li>
<li>Reviews: There isn&rsquo;t a lot of code review going on that I&rsquo;m aware of. Even if there was, I suppose this would just be a logical TRUE/FALSE.</li>
<li>Cash money y&rsquo;all: Grants/consulting income/etc. could be counted as a metric.</li>
<li>Users: If you require users to create an account or similar before getting your software, you have a sense of number of users and perhaps their demographics.</li>
</ul>
<h2 id="promising">Promising</h2>
<p>Some software metrics things on the horizon that look interesting:</p>
<ul>
<li><a href="https://geodynamics.org/cig/projects/saga/">Software Attribution for Geoscience Applications</a> (SAGA)</li>
<li>Crossref: They have <a href="https://github.com/CrossRef/rest-api-doc/blob/master/rest_api.md">a very nice API</a>, but they don&rsquo;t yet provide citation counts - but <a href="https://github.com/CrossRef/rest-api-doc/issues/46">they may soon</a>.</li>
<li><a href="https://github.com/njsmith/sempervirens">njsmith/sempervirens</a> - a prototype for <em>gathering anonymous, opt-in usage data for open scientific software</em></li>
<li><a href="https://github.com/force11/force11-scwg">Force11 Software Citation Working Group</a> - <em>&hellip;produce a consolidated set of citation principles in order to encourage broad adoption of a consistent policy for software citation across disciplines and venues</em></li>
</ul>
<h2 id="missed">Missed?</h2>
<p>I&rsquo;m sure I missed things. Let me know.</p>
]]></description>
    </item>
    <item>
      <title>Stashing and playing with raw data locally from the web</title>
      <link>http://localhost:1313/2013/06/couch/</link>
      <pubDate>Mon, 17 Jun 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/06/couch/</guid>
      <description><![CDATA[<p>It is getting easier to get data directly into R from the web. Often R packages that retrieve data from the web return useful R data structures to users like a data.frame. This is a good thing of course to make things user friendly.</p>
<p>However, what if you want to drill down into the data that&rsquo;s returned from a query to a database in R?  What if you want to get that nice data.frame in R, but you think you may want to look at the raw data later? The raw data from web queries are often JSON or XML data. This type of data, especially JSON, can be easily stored in schemaless so-called NoSQL databases, and queried later.</p>
<p>A brief aside: What are JSON and XML? This is what JSON looks like (ps if you ever wonder if your JSON is correct, go <a href="http://jsonlint.com/">here</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;joe&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;hobby&#34;</span>: <span style="color:#e6db74">&#34;codemonkey&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;lives&#34;</span>: <span style="color:#f92672">[</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;city&#34;</span>: <span style="color:#e6db74">&#34;San Jose&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#e6db74">&#34;state&#34;</span>: <span style="color:#e6db74">&#34;CA&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>This is what XML looks like:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>joe<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;hobby&gt;</span>codemonkey<span style="color:#f92672">&lt;/hobby&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;lives&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;city&gt;</span>San Jose<span style="color:#f92672">&lt;/city&gt;</span>
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">&lt;state&gt;</span>CA<span style="color:#f92672">&lt;/state&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;/lives&gt;</span>
</span></span></code></pre></div><p>But don&rsquo;t worry if it looks complicated - the project I talk about below, sofa, tries to make the interface to JSON and XML easy. Web APIs almost always return either JSON or XML, so this is the raw data.</p>
<p>So here&rsquo;s the use case I imagine, or workflow:</p>
<ul>
<li>Query a database on the web, and choose to write the raw data to a local database.</li>
<li>Do whatever you want with the output R object - analyze, visualize, etc.</li>
<li>Now you want to go back and search through some of the raw data. But, that query took an hour. Since you wrote it to a local database, you can search the data.</li>
<li>If you hadn&rsquo;t written it locally, you would have to make a new web call.</li>
</ul>
<p>Note that if you are doing calls to web APIs that get small amounts of data you don&rsquo;t need to worry too much as you can easily just do the call again.</p>
<p>I&rsquo;ve started an R package to interact with the NoSQL database <a href="http://couchdb.apache.org/">CouchDB</a>. CouchDB is a schemaless database that speaks JSON, so you can store JSON and get back JSON (don&rsquo;t worry XML, we got you covered - we can just wrap the XML in JSON before putting it in CouchDB). What&rsquo;s especially cool is you can interact with CouchDB via <a href="http://docs.couchdb.org/en/latest/api-basics.html">a RESTful API</a>. CouchDB doesn&rsquo;t have full text search built in (though you can build map-reduce <em>Views</em>, basically preset queries on the database), so I added functions (and docs to help) to interact with the <a href="https://github.com/elasticsearch/elasticsearch-river-couchdb/blob/master/README.md">CouchDB River plugin</a> for <a href="http://www.elasticsearch.org/">Elasticsearch</a>, which provides powerful full text search via an API interface. But nevermind the tech details - all this just means you can search on the full text of your stored data.</p>
<p>There are plenty of databases you can interact with from R, so why CouchDB? For one, it makes a lot of sense to write to a NoSQL database since this blog post is dealing with a use case writing JSON, which isn&rsquo;t a good fit for databases like MySQL, SQLite, PostgreSQL, etc. (<a href="http://wiki.postgresql.org/wiki/What's_new_in_PostgreSQL_9.2#JSON_datatype">though postgres allows you to write JSON</a>). It didn&rsquo;t have to be CouchDB, but at least to me it seems relatively easy to install, you can interact with it via an HTTP API (if you&rsquo;re into that, which I am), and it has a nice web interface (navigate to <a href="http://localhost:5984/_utils/">http://localhost:5984/_utils/</a> after starting <code>couchdb</code>).</p>
<p>Is this for the casual R user? Probably not. But, I imagine there are R users out there that want some more flexibility when it comes to interacting with web data in R. It is nice and tidy to get back an R data.frame from a web call, but having the raw data at your fingertips could be super powerful. I&rsquo;ll describe using an R package to interact with a web database with <code>sofa</code> baked in, and discuss a bit about the functions within <code>sofa</code>.</p>
<h3 id="first-start-couchdb-in-your-terminal">First start CouchDB in your terminal</h3>
<p>You can do this from anywhere in your directory. See <a href="http://couchdb.apache.org/">here</a> for instructions on how to install CouchDB.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>couchdb
</span></span></code></pre></div><h3 id="then-start-elasticsearch-in-your-terminal">Then start elasticsearch in your terminal</h3>
<p>See <a href="https://github.com/sckott/sofa">here</a> for instructions on how to install Elasticsearch and the River CouchDB plugin.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd /usr/local/elasticsearch
</span></span><span style="display:flex;"><span>bin/elasticsearch -f
</span></span></code></pre></div><h3 id="install-sofa">Install sofa</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Uncomment these lines if you don&#39;t have these packages installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#39;devtools&#39;) library(devtools) install_github(&#39;sofa&#39;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;schamberlain&#39;) install_github(&#39;alm&#39;, &#39;ropensci&#39;, ref=&#39;couch&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(sofa)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(alm)
</span></span></code></pre></div><h3 id="simultaneously-write-data-to-couchdb-along-with-api-calls-using-the-alm-package-to-get-altmetrics-data-on-plos-papers-ping-to-make-sure-couchdb-is-on">Simultaneously write data to CouchDB along with API calls using the alm package to get altmetrics data on PLoS papers. Ping to make sure CouchDB is on</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_ping</span>()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  couchdb   version 
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Welcome&#34;</span>   <span style="color:#e6db74">&#34;1.2.1&#34;</span> 
</span></span></code></pre></div><h3 id="create-a-new-database">Create a new database</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_createdb</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  ok 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">TRUE</span> 
</span></span></code></pre></div><h3 id="write-couchdb-database-name-to-options">Write couchdb database name to options</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">options</span>(couch_db_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>)
</span></span></code></pre></div><h3 id="list-the-databases">List the databases</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_listdbs</span>()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;_replicator&#34;</span>                <span style="color:#e6db74">&#34;_users&#34;</span>                    
</span></span><span style="display:flex;"><span> [3] <span style="color:#e6db74">&#34;alm_couchdb&#34;</span>                <span style="color:#e6db74">&#34;alm_db&#34;</span>                    
</span></span><span style="display:flex;"><span> [5] <span style="color:#e6db74">&#34;dudedb&#34;</span>                     <span style="color:#e6db74">&#34;example&#34;</span>                   
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;poop&#34;</span>                       <span style="color:#e6db74">&#34;rplos_db&#34;</span>                  
</span></span><span style="display:flex;"><span> [9] <span style="color:#e6db74">&#34;shit&#34;</span>                       <span style="color:#e6db74">&#34;shitty&#34;</span>                    
</span></span><span style="display:flex;"><span>[11] <span style="color:#e6db74">&#34;shitty2&#34;</span>                    <span style="color:#e6db74">&#34;test_suite_db&#34;</span>             
</span></span><span style="display:flex;"><span>[13] <span style="color:#e6db74">&#34;test_suite_db/with_slashes&#34;</span> <span style="color:#e6db74">&#34;test_suite_reports&#34;</span>        
</span></span><span style="display:flex;"><span>[15] <span style="color:#e6db74">&#34;testr2couch&#34;</span>                <span style="color:#e6db74">&#34;twitter_db&#34;</span>                
</span></span></code></pre></div><h3 id="search-for-altmetrics-normally-wo-writing-to-a-database">Search for altmetrics normally, w/o writing to a database</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">alm</span>(doi <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.1371/journal.pone.0029797&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>          .id pdf html shares groups comments likes citations total
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   bloglines  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   citeulike  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>      <span style="color:#ae81ff">1</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>     <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    connotea  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    crossref  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      nature  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> postgenomic  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><h3 id="search-for-altmetrics-normally-while-writing-to-a-database">Search for altmetrics normally, while writing to a database</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">alm</span>(doi <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.1371/journal.pone.0029797&#34;</span>, write2couch <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>          .id pdf html shares groups comments likes citations total
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   bloglines  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   citeulike  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>      <span style="color:#ae81ff">1</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>     <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    connotea  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    crossref  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      nature  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> postgenomic  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><h3 id="make-lots-of-calls-and-write-them-simultaneously">Make lots of calls, and write them simultaneously</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;rplos&#39;, &#39;ropensci&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rplos)
</span></span><span style="display:flex;"><span>dois <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">searchplos</span>(terms <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;evolution&#34;</span>, fields <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;id&#34;</span>, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">alm</span>(doi <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.character</span>(dois[, <span style="color:#ae81ff">1</span>]), write2couch <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">lapply</span>(out[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>], head)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`01`
</span></span><span style="display:flex;"><span>          .id pdf html shares groups comments likes citations total
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   bloglines  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   citeulike  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>      <span style="color:#ae81ff">0</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    connotea  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    crossref  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      nature  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> postgenomic  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>`02`
</span></span><span style="display:flex;"><span>          .id pdf html shares groups comments likes citations total
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   bloglines  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   citeulike  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>      <span style="color:#ae81ff">1</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>     <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    connotea  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    crossref  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      nature  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span> postgenomic  <span style="color:#66d9ef">NA</span>   <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>     <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>    <span style="color:#66d9ef">NA</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><h3 id="writing-data-to-couchdb-does-take-a-bit-longer">Writing data to CouchDB does take a bit longer</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">system.time</span>(<span style="color:#a6e22e">alm</span>(doi <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.character</span>(dois[, <span style="color:#ae81ff">1</span>])[1<span style="color:#f92672">:</span><span style="color:#ae81ff">60</span>], write2couch <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   user  system elapsed 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">1.739</span>   <span style="color:#ae81ff">0.016</span>   <span style="color:#ae81ff">4.554</span> 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">system.time</span>(<span style="color:#a6e22e">alm</span>(doi <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.character</span>(dois[, <span style="color:#ae81ff">1</span>])[1<span style="color:#f92672">:</span><span style="color:#ae81ff">60</span>], write2couch <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   user  system elapsed 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">3.579</span>   <span style="color:#ae81ff">0.062</span>   <span style="color:#ae81ff">6.460</span> 
</span></span></code></pre></div><h3 id="search-using-elasticsearch">Search using elasticsearch</h3>
<h4 id="tell-elasticsearch-to-start-indexing-your-database">tell elasticsearch to start indexing your database</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">elastic_start</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>ok
</span></span><span style="display:flex;"><span>[1] <span style="color:#66d9ef">TRUE</span>
</span></span></code></pre></div><h4 id="search-your-database">Search your database</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">elastic_search</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>, q <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;twitter&#34;</span>, parse_ <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">$</span>hits<span style="color:#f92672">$</span>total
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#ae81ff">679</span>
</span></span></code></pre></div><h3 id="using-views">Using views</h3>
<h4 id="write-a-view---here-letting-key-be-the-default-of-null">Write a view - here letting key be the default of null</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_view_put</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>, design_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myview&#34;</span>, value <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;doc.baseurl&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>ok
</span></span><span style="display:flex;"><span>[1] <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>id
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;_design/myview&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>rev
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;1-e7c17cff1b96e4595c3781da53e16ad8&#34;</span>
</span></span></code></pre></div><h4 id="get-info-on-your-new-view">Get info on your new view</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_view_get</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>, design_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myview&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`_id`
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;_design/myview&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>`_rev`
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;1-e7c17cff1b96e4595c3781da53e16ad8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>views
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>views<span style="color:#f92672">$</span>foo
</span></span><span style="display:flex;"><span>                                    map 
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;function(doc){emit(null,doc.baseurl)}&#34;</span> 
</span></span></code></pre></div><h4 id="get-data-using-a-view">Get data using a view</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sofa_view_search</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>, design_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myview&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">length</span>(out<span style="color:#f92672">$</span>rows)  <span style="color:#75715e"># 160 results</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#ae81ff">161</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sapply</span>(out<span style="color:#f92672">$</span>rows, <span style="color:#66d9ef">function</span>(x) x<span style="color:#f92672">$</span>value)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>]  <span style="color:#75715e"># the values, just the API call URLs</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;http://alm.plos.org/api/v3/articles&#34;</span>
</span></span><span style="display:flex;"><span>[2] <span style="color:#e6db74">&#34;http://alm.plos.org/api/v3/articles&#34;</span>
</span></span><span style="display:flex;"><span>[3] <span style="color:#e6db74">&#34;http://alm.plos.org/api/v3/articles&#34;</span>
</span></span><span style="display:flex;"><span>[4] <span style="color:#e6db74">&#34;http://alm.plos.org/api/v3/articles&#34;</span>
</span></span><span style="display:flex;"><span>[5] <span style="color:#e6db74">&#34;http://alm.plos.org/api/v3/articles&#34;</span>
</span></span></code></pre></div><h4 id="delete-the-view">Delete the view</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">sofa_view_del</span>(dbname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;alm_db&#34;</span>, design_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myview&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;&#34;</span>
</span></span></code></pre></div><h2 id="what-now">What now?</h2>
<p>Well, if no one uses this, then probably nothing. Though, if people think this could be useful:</p>
<ul>
<li>It would be cool to make easy hooks into any package making web calls to allow users to write data to CouchDB if they choose to, sort of like the example above with rplos.</li>
<li>Perhaps automate some of the setup for CouchDB for users, making system calls so they don&rsquo;t have to.</li>
<li>Performance: As shown above, simultaneously writing data to CouchDB takes longer than not doing so - removing this time difference will make writing to couch more palatable.</li>
</ul>
<h2 id="what-do-you-think">What do you think?</h2>
<p>What is your reaction to this post?  Do you have a need for this sort of tool?  Do you have similar use cases that could be addressed with <code>sofa</code>?</p>
]]></description>
    </item>
    <item>
      <title>BISON USGS species occurrence data</title>
      <link>http://localhost:1313/2013/05/rbison/</link>
      <pubDate>Mon, 27 May 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/05/rbison/</guid>
      <description><![CDATA[<p>The USGS recently released a way to search for and get species occurrence records for the USA. The service is called <a href="http://bison.usgs.ornl.gov/">BISON</a> (Biodiversity Information Serving Our Nation). The service has <a href="http://bison.usgs.ornl.gov/">a web interface</a> for human interaction in a browser, and <a href="http://bison.usgs.ornl.gov/services.html">two APIs</a> (application programming interface) to allow machines to interact with their database. One of the APIs allows you to search and retrieve data, and the other gives back maps as either a heatmap or a species occurrence map. The latter is more appropriate for working in a browser, so I&rsquo;ll leave that to the web app folks.</p>
<p>The Core Science Analytics and Synthesis (CSAS) program of the US Geological Survey are responsible for BISON, and are the US node of the Global Biodiversity Information Facility (GBIF). BISON data is nested within that of GBIF, but has (or wil have?) additional data not in GBIF, as described on their <em>About</em> page:</p>
<blockquote>
<p>BISON has been initiated with the 110 million records GBIF makes available from the U.S. and is integrating millions more records from other sources each year</p>
</blockquote>
<p>Have a look at their <em>Data providers</em> and <em>Statistics</em> tabs on the BISON website, which list where data comes from and how many searches and downloads have been done on each data provider.</p>
<p>We (rOpenSci) started an R package to interact with the BISON search API &raquo; <code>rbison</code>. You may be thinking, but if the data in BISON is also in GBIF, why both making another R package for BISON? Good question. As I just said, BISON will have some data GBIF won&rsquo;t have. Also, the services (search API and map service) are different than those of GBIF.</p>
<p>Check out the package on GitHub here <a href="https://github.com/ropensci/rbison">https://github.com/ropensci/rbison</a>.</p>
<p>Here is a quick run through of some things you can do with <code>rbison</code>.</p>
<h3 id="install-ribson">Install ribson</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Install rbison from GitHub using devtools, uncomment to install</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#39;devtools&#39;) library(devtools) install_github(&#39;rbison&#39;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># &#39;ropensci&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rbison)
</span></span></code></pre></div><h3 id="search-the-bison-database-for-of-course-bison">Search the BISON database for, of course, bison</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Do the search</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">bison</span>(species <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Bison bison&#34;</span>, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scientific_name&#34;</span>, start <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, count <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Check that the returned object is the right class (&#39;bison&#39;)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">class</span>(out)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;bison&#34;</span>
</span></span></code></pre></div><h4 id="get-a-summary-of-the-data">Get a summary of the data</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">bison_data</span>(out)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  total observation fossil specimen unknown
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">761</span>          <span style="color:#ae81ff">30</span>      <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">709</span>      <span style="color:#ae81ff">18</span>
</span></span></code></pre></div><h4 id="summary-by-counties-just-the-first-6-rows">Summary by counties (just the first 6 rows)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">bison_data</span>(input <span style="color:#f92672">=</span> out, datatype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;counties&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  record_id total county_name      state
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">48295</span>     <span style="color:#ae81ff">7</span>    Lipscomb      Texas
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">41025</span>    <span style="color:#ae81ff">15</span>      Harney     Oregon
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">49017</span>     <span style="color:#ae81ff">8</span>    Garfield       Utah
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">35031</span>     <span style="color:#ae81ff">2</span>    McKinley New Mexico
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">56013</span>     <span style="color:#ae81ff">1</span>     Fremont    Wyoming
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">40045</span>     <span style="color:#ae81ff">2</span>       Ellis   Oklahoma
</span></span></code></pre></div><h4 id="summary-of-states">Summary of states</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">bison_data</span>(input <span style="color:#f92672">=</span> out, datatype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;states&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>      record_id total county_fips
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    Washington     <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">53</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>         Texas     <span style="color:#ae81ff">8</span>          <span style="color:#ae81ff">48</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>    New Mexico     <span style="color:#ae81ff">8</span>          <span style="color:#ae81ff">35</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>          Iowa     <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">19</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>       Montana     <span style="color:#ae81ff">9</span>          <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>       Wyoming   <span style="color:#ae81ff">155</span>          <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>        Oregon    <span style="color:#ae81ff">15</span>          <span style="color:#ae81ff">41</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>      Oklahoma    <span style="color:#ae81ff">14</span>          <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>        Kansas    <span style="color:#ae81ff">10</span>          <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>      Arizona     <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">04</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>       Alaska    <span style="color:#ae81ff">29</span>          <span style="color:#ae81ff">02</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>         Utah    <span style="color:#ae81ff">16</span>          <span style="color:#ae81ff">49</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>     Colorado    <span style="color:#ae81ff">17</span>          <span style="color:#ae81ff">08</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>     Nebraska     <span style="color:#ae81ff">1</span>          <span style="color:#ae81ff">31</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span> South Dakota    <span style="color:#ae81ff">61</span>          <span style="color:#ae81ff">46</span>
</span></span></code></pre></div><h3 id="map-the-results">Map the results</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Search for Ursus americanus (american black bear)</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">bison</span>(species <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Ursus americanus&#34;</span>, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;scientific_name&#34;</span>, start <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, 
</span></span><span style="display:flex;"><span>    count <span style="color:#f92672">=</span> <span style="color:#ae81ff">200</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Sweet, got some data</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bison_data</span>(out)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  total observation fossil specimen literature unknown centroid
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">3792</span>          <span style="color:#ae81ff">59</span>    <span style="color:#ae81ff">125</span>     <span style="color:#ae81ff">3522</span>         <span style="color:#ae81ff">47</span>      <span style="color:#ae81ff">39</span>       <span style="color:#ae81ff">78</span>
</span></span></code></pre></div><h3 id="make-some-maps-note-that-right-now-the-county-and-state-maps-just-plot-the-conterminous-lower-48-the-map-of-individual-occurrences-shows-the-lower-48--alaska">Make some maps! Note that right now the county and state maps just plot the conterminous lower 48. The map of individual occurrences shows the lower 48 + Alaska</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># By county</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bisonmap</span>(out, tomap <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;county&#34;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2013-05-25-rbison/map11.png" alt="center"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># By state</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bisonmap</span>(out, tomap <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;state&#34;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2013-05-25-rbison/map12.png" alt="center"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Individual locations</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bisonmap</span>(out)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">## Rendering map...plotting 199 points</span>
</span></span></code></pre></div><p><img loading="lazy" src="/2013-05-25-rbison/map13.png" alt="center"  />
</p>
<hr>
<h3 id="when-plotting-occurrences-you-can-pass-additional-arguments-into-the-bisonmap-function">When plotting occurrences, you can pass additional arguments into the <code>bisonmap</code> function.</h3>
<h4 id="for-example-you-can-jitter-the-points">For example, you can jitter the points</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">bisonmap</span>(input <span style="color:#f92672">=</span> out, geom <span style="color:#f92672">=</span> geom_jitter)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">## Rendering map...plotting 199 points</span>
</span></span></code></pre></div><p><img loading="lazy" src="/2013-05-25-rbison/map2.png" alt="center"  />
</p>
<h4 id="and-you-can-specify-by-how-much-you-want-the-points-to-jitter-here-an-extreme-example-to-make-it-obvious">And you can specify by how much you want the points to jitter (here an extreme example to make it obvious)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">bisonmap</span>(input <span style="color:#f92672">=</span> out, geom <span style="color:#f92672">=</span> geom_jitter, jitter <span style="color:#f92672">=</span> <span style="color:#a6e22e">position_jitter</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">## Rendering map...plotting 199 points</span>
</span></span></code></pre></div><p><img loading="lazy" src="/2013-05-25-rbison/map3.png" alt="center"  />
</p>
<hr>
<p>Let us know if you have any feature requests or find bugs at <a href="https://github.com/ropensci/rbison/issues">our GitHub Issues page</a>.</p>
]]></description>
    </item>
    <item>
      <title>Scholarly metadata in R</title>
      <link>http://localhost:1313/2013/03/r-metadata/</link>
      <pubDate>Sat, 16 Mar 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/03/r-metadata/</guid>
      <description><![CDATA[<p>Scholarly metadata - the meta-information surrounding articles - can be super useful.  Although metadata does not contain the full content of articles, it contains a lot of useful information, including title, authors, abstract, URL to the article, etc.</p>
<p>One of the largest sources of metadata is provided via the Open Archives Initiative Protocol for Metadata Harvesting or <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html">OAI-PMH</a>. Many publishers, provide their metadata through their own endpoint, and implement the standard OAI-PMH methods: <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#GetRecord">GetRecord</a>, <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#Identify">Identify</a>, <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListIdentifiers">ListIdentifiers</a>, <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListMetadataFormats">ListMetadataFormats</a>, <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListRecords">ListRecords</a>, and <a href="http://www.openarchives.org/OAI/openarchivesprotocol.html#ListSets">ListSets</a>. Many providers use OAI-PMH, including <a href="http://oai.datacite.org/">DataCite</a>, <a href="http://wiki.datadryad.org/Data_Access#OAI-PMH">Dryad</a>, and <a href="http://www.ncbi.nlm.nih.gov/pmc/tools/oai/">PubMed</a>.</p>
<p>Some data-/article-providers provide their metadata via their own APIs. For example, Nature Publishing Group provides their own metadata API <a href="http://developers.nature.com/docs">here</a> in non OAI-PMH format; you can get PLoS metadata through their <a href="http://api.plos.org/">search API</a>, and the BHL (see below) provides their own custom metadata service.</p>
<p>In addition, CrossRef provides a number of metadata search services: <a href="http://search.labs.crossref.org/help/api">metadata search</a> and <a href="http://labs.crossref.org/openurl/">openurl</a>.</p>
<p>What about the other publishers? (please tell me if I&rsquo;m wrong about these three)</p>
<ul>
<li>Springer has <a href="http://dev.springer.com/docs">a metadata API</a>, but it is terrible, soooo&hellip;</li>
<li>Elsevier, are you kidding? Well, they do have some sort of API service, but its a pain in the ass.</li>
<li>Wiley, no better than Elsevier.</li>
</ul>
<p>Note that metadata can live in other places:</p>
<ul>
<li>Another package being developed by David Springate, <a href="https://github.com/ropensci/rpubmed">rpubmed</a> can get PubMed metadata.</li>
<li>Our wrapper to the Mendeley API, <a href="https://github.com/ropensci/rmendeley">RMendeley</a>, gets article metadata via Mendeley&rsquo;s database.</li>
<li>Our wrapper to the Biodiversity Heritage Library API <a href="http://www.biodiversitylibrary.org/api2/docs/docs.html">here</a> gets their metadata.</li>
</ul>
<p>No, you can&rsquo;t get metadata via Google Scholar - the don&rsquo;t allow scraping, and don&rsquo;t have expose their data via an API.</p>
<p>I have discussed this package <a href="http://sckott.github.io/2012/09/rmetadata/">in a previous blog post</a>, but have since worked on the code a bit, and thought it deserved a new post.</p>
<p>You can see a tutorial for this package <a href="http://ropensci.github.com/rmetadata/">here</a>, and contribute to the code <a href="https://github.com/ropensci/rmetadata">here</a>.</p>
<h3 id="install-rmetadata">Install rmetadata</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;rmetadata&#39;, &#39;ropensci&#39;) # uncomment to install</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rmetadata)
</span></span></code></pre></div><h3 id="count-oai-pmh-identifiers-for-a-data-provider">Count OAI-PMH identifiers for a data provider.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># For DataCite.</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">count_identifiers</span>(<span style="color:#e6db74">&#34;datacite&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  provider   count
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> datacite <span style="color:#ae81ff">1216193</span>
</span></span></code></pre></div><h3 id="lookup-article-info-via-crossref-with-doi-and-get-a-citation">Lookup article info via CrossRef with DOI and get a citation.</h3>
<h4 id="as-bibtex">As Bibtex</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">print</span>(<span style="color:#a6e22e">crossref_citation</span>(<span style="color:#e6db74">&#34;10.3998/3336451.0009.101&#34;</span>), style <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Bibtex&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">@</span>Article{,
</span></span><span style="display:flex;"><span>  title <span style="color:#f92672">=</span> {In Google We Trust<span style="color:#f92672">?</span>},
</span></span><span style="display:flex;"><span>  author <span style="color:#f92672">=</span> {Geoffrey Bilder},
</span></span><span style="display:flex;"><span>  journal <span style="color:#f92672">=</span> {The Journal of Electronic Publishing},
</span></span><span style="display:flex;"><span>  year <span style="color:#f92672">=</span> {<span style="color:#ae81ff">2006</span>},
</span></span><span style="display:flex;"><span>  month <span style="color:#f92672">=</span> {<span style="color:#ae81ff">01</span>},
</span></span><span style="display:flex;"><span>  volume <span style="color:#f92672">=</span> {<span style="color:#ae81ff">9</span>},
</span></span><span style="display:flex;"><span>  doi <span style="color:#f92672">=</span> {<span style="color:#ae81ff">10.3998</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3336451.0009.101</span>},
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="as-regular-text">As regular text</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">print</span>(<span style="color:#a6e22e">crossref_citation</span>(<span style="color:#e6db74">&#34;10.3998/3336451.0009.101&#34;</span>), style <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Bilder <span style="color:#a6e22e">G </span>(<span style="color:#ae81ff">2006</span>). <span style="color:#e6db74">&#34;In Google We Trust?&#34;</span> _The Journal of Electronic
</span></span><span style="display:flex;"><span>Publishing_, <span style="color:#f92672">*</span><span style="color:#ae81ff">9</span><span style="color:#f92672">*</span>. <span style="color:#f92672">&lt;</span>URL<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>http<span style="color:#f92672">://</span>dx.doi.org<span style="color:#f92672">/</span><span style="color:#ae81ff">10.3998</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3336451.0009.101</span><span style="color:#f92672">&gt;</span>.
</span></span></code></pre></div><h3 id="search-the-crossref-metatdata-for-dois-using-free-form-references">Search the CrossRef Metatdata for DOIs using free form references.</h3>
<h4 id="search-with-title-author-year-and-journal">Search with title, author, year, and journal</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">crossref_search_free</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Piwowar Sharing Detailed Research Data Is Associated with Increased Citation Rate PLOS one 2007&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                                                             text
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Piwowar Sharing Detailed Research Data Is Associated with Increased Citation Rate PLOS one <span style="color:#ae81ff">2007</span>
</span></span><span style="display:flex;"><span>  match                   doi score
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#66d9ef">TRUE</span> <span style="color:#ae81ff">10.1038</span><span style="color:#f92672">/</span>npre.2007.361 <span style="color:#ae81ff">4.905</span>
</span></span></code></pre></div><h4 id="get-a-doi-and-get-the-citation-using-codecrossref_search">Get a DOI and get the citation using \code{crossref_search}</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get a DOI for a paper</span>
</span></span><span style="display:flex;"><span>doi <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">crossref_search_free</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Piwowar sharing data PLOS one&#34;</span>)<span style="color:#f92672">$</span>doi
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the metadata</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">crossref_search</span>(doi <span style="color:#f92672">=</span> doi)[, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                           doi score normalizedScore
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">10.1371</span><span style="color:#f92672">/</span>journal.pone.0000308 <span style="color:#ae81ff">18.19</span>             <span style="color:#ae81ff">100</span>
</span></span></code></pre></div><h3 id="get-a-random-set-of-dois-through-crossref">Get a random set of DOI&rsquo;s through CrossRef.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Default search gets 20 random DOIs</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">crossref_r</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;10.4028/www.scientific.net/MSF.126-128.467&#34;</span>
</span></span><span style="display:flex;"><span> [2] <span style="color:#e6db74">&#34;10.2139/ssrn.548523&#34;</span>                       
</span></span><span style="display:flex;"><span> [3] <span style="color:#e6db74">&#34;10.1016/S0012-821X(02)00562-9&#34;</span>             
</span></span><span style="display:flex;"><span> [4] <span style="color:#e6db74">&#34;10.1093/rsq/13.2-3.167&#34;</span>                    
</span></span><span style="display:flex;"><span> [5] <span style="color:#e6db74">&#34;10.5772/55055&#34;</span>                             
</span></span><span style="display:flex;"><span> [6] <span style="color:#e6db74">&#34;10.1515/BC.1999.050&#34;</span>                       
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;10.1016/S0020-7292(98)90160-6&#34;</span>             
</span></span><span style="display:flex;"><span> [8] <span style="color:#e6db74">&#34;10.1111/j.1439-0418.1985.tb02788.x&#34;</span>        
</span></span><span style="display:flex;"><span> [9] <span style="color:#e6db74">&#34;10.1089/aid.2012.0115&#34;</span>                     
</span></span><span style="display:flex;"><span>[10] <span style="color:#e6db74">&#34;10.1016/0002-9378(95)90155-8&#34;</span>              
</span></span><span style="display:flex;"><span>[11] <span style="color:#e6db74">&#34;10.1001/jama.1949.02900490055028&#34;</span>          
</span></span><span style="display:flex;"><span>[12] <span style="color:#e6db74">&#34;10.1051/jphyscol:1989172&#34;</span>                  
</span></span><span style="display:flex;"><span>[13] <span style="color:#e6db74">&#34;10.1016/s0301-2115(03)00298-7&#34;</span>             
</span></span><span style="display:flex;"><span>[14] <span style="color:#e6db74">&#34;10.1007/BF02735292&#34;</span>                        
</span></span><span style="display:flex;"><span>[15] <span style="color:#e6db74">&#34;10.1016/0003-4916(65)90026-6&#34;</span>              
</span></span><span style="display:flex;"><span>[16] <span style="color:#e6db74">&#34;10.4156/jdcta.vol5.issue5.12&#34;</span>              
</span></span><span style="display:flex;"><span>[17] <span style="color:#e6db74">&#34;10.1007/s10904-009-9316-2&#34;</span>                 
</span></span><span style="display:flex;"><span>[18] <span style="color:#e6db74">&#34;10.1023/A:1021690001832&#34;</span>                   
</span></span><span style="display:flex;"><span>[19] <span style="color:#e6db74">&#34;10.1007/s12262-012-0724-0&#34;</span>                 
</span></span><span style="display:flex;"><span>[20] <span style="color:#e6db74">&#34;10.1007/bf02192860&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Specify you want journal articles only</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">crossref_r</span>(type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;journal_article&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;10.1016/j.jacc.2011.09.055&#34;</span>                                 
</span></span><span style="display:flex;"><span> [2] <span style="color:#e6db74">&#34;10.1002/dev.420170603&#34;</span>                                      
</span></span><span style="display:flex;"><span> [3] <span style="color:#e6db74">&#34;10.4315/0362-028X.JFP-10-403&#34;</span>                               
</span></span><span style="display:flex;"><span> [4] <span style="color:#e6db74">&#34;10.1016/S0925-4927(98)00016-X&#34;</span>                              
</span></span><span style="display:flex;"><span> [5] <span style="color:#e6db74">&#34;10.1111/j.1933-1592.2002.tb00141.x&#34;</span>                         
</span></span><span style="display:flex;"><span> [6] <span style="color:#e6db74">&#34;10.1541/ieejfms.127.629&#34;</span>                                    
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;10.5539/enrr.v3n1p62&#34;</span>                                       
</span></span><span style="display:flex;"><span> [8] <span style="color:#e6db74">&#34;10.1016/S0960-9776(96)90038-7&#34;</span>                              
</span></span><span style="display:flex;"><span> [9] <span style="color:#e6db74">&#34;10.1016/0925-9635(94)05240-9&#34;</span>                               
</span></span><span style="display:flex;"><span>[10] <span style="color:#e6db74">&#34;10.1016/s0929-693x(97)86846-7&#34;</span>                              
</span></span><span style="display:flex;"><span>[11] <span style="color:#e6db74">&#34;10.1002/(SICI)1096-9071(199601)48:1&lt;53::AID-JMV9&gt;3.0.CO;2-K&#34;</span>
</span></span><span style="display:flex;"><span>[12] <span style="color:#e6db74">&#34;10.1016/s0267-7261(01)00016-1&#34;</span>                              
</span></span><span style="display:flex;"><span>[13] <span style="color:#e6db74">&#34;10.1111/j.1748-0361.2003.tb00575.x&#34;</span>                         
</span></span><span style="display:flex;"><span>[14] <span style="color:#e6db74">&#34;10.1097/00005721-197701000-00011&#34;</span>                           
</span></span><span style="display:flex;"><span>[15] <span style="color:#e6db74">&#34;10.1007/s00894-009-0593-z&#34;</span>                                  
</span></span><span style="display:flex;"><span>[16] <span style="color:#e6db74">&#34;10.1071/AR9830063&#34;</span>                                          
</span></span><span style="display:flex;"><span>[17] <span style="color:#e6db74">&#34;10.1186/gb-2009-10-4-r39&#34;</span>                                   
</span></span><span style="display:flex;"><span>[18] <span style="color:#e6db74">&#34;10.2165/00128415-201113540-00038&#34;</span>                           
</span></span><span style="display:flex;"><span>[19] <span style="color:#e6db74">&#34;10.1007/BF00522986&#34;</span>                                         
</span></span><span style="display:flex;"><span>[20] <span style="color:#e6db74">&#34;10.1080/19407963.2011.539385&#34;</span>
</span></span></code></pre></div><h3 id="search-the-crossref-metatdata-api">Search the CrossRef Metatdata API.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Search for two different query terms</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">crossref_search</span>(query <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;renear&#34;</span>, <span style="color:#e6db74">&#34;palmer&#34;</span>), rows <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>)[, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                            doi score normalizedScore
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       <span style="color:#ae81ff">10.1126</span><span style="color:#f92672">/</span>science.1157784 <span style="color:#ae81ff">3.253</span>             <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">10.1002</span><span style="color:#f92672">/</span>meet.2009.1450460141 <span style="color:#ae81ff">2.169</span>              <span style="color:#ae81ff">66</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">10.4242</span><span style="color:#f92672">/</span>BalisageVol3.Renear01 <span style="color:#ae81ff">2.102</span>              <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">10.4242</span><span style="color:#f92672">/</span>BalisageVol5.Renear01 <span style="color:#ae81ff">2.102</span>              <span style="color:#ae81ff">64</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get results for a certain year</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">crossref_search</span>(query <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;renear&#34;</span>, <span style="color:#e6db74">&#34;palmer&#34;</span>), year <span style="color:#f92672">=</span> <span style="color:#ae81ff">2010</span>)[, <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                  doi  score normalizedScore
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">10.1002</span><span style="color:#f92672">/</span>meet.14504701218 <span style="color:#ae81ff">1.0509</span>             <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            <span style="color:#ae81ff">10.1002</span><span style="color:#f92672">/</span>meet.14504701240 <span style="color:#ae81ff">1.0509</span>             <span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>           <span style="color:#ae81ff">10.5270</span><span style="color:#f92672">/</span>OceanObs09.cwp.68 <span style="color:#ae81ff">1.0442</span>              <span style="color:#ae81ff">99</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>               <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.2010.0003 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>                  <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.0.0041 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                  <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.0.0044 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                  <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.0.0057 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>                    <span style="color:#ae81ff">10.1386</span><span style="color:#f92672">/</span>fm.1.1.2 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>                    <span style="color:#ae81ff">10.1386</span><span style="color:#f92672">/</span>fm.1.2.2 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                   <span style="color:#ae81ff">10.1386</span><span style="color:#f92672">/</span>fm.1.3.2 <span style="color:#ae81ff">0.6890</span>              <span style="color:#ae81ff">65</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>       <span style="color:#ae81ff">10.1097</span><span style="color:#f92672">/</span>ALN.0b013e3181f09404 <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>      <span style="color:#ae81ff">10.1016</span><span style="color:#f92672">/</span>j.urology.2010.02.033 <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>              <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>ect.2010.0025 <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>               <span style="color:#ae81ff">10.1117</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2.4201001.04</span> <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span> <span style="color:#ae81ff">10.1111</span><span style="color:#f92672">/</span>j.1835<span style="color:#ae81ff">-9310.1977</span>.tb01159.x <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>    <span style="color:#ae81ff">10.4067</span><span style="color:#f92672">/</span>S0717<span style="color:#ae81ff">-69962010000100001</span> <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">17</span>    <span style="color:#ae81ff">10.4067</span><span style="color:#f92672">/</span>S0717<span style="color:#ae81ff">-69962010000200001</span> <span style="color:#ae81ff">0.6090</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">18</span>           <span style="color:#ae81ff">10.2105</span><span style="color:#f92672">/</span>AJPH.2009.191098 <span style="color:#ae81ff">0.6029</span>              <span style="color:#ae81ff">57</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>              <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.2010.0004 <span style="color:#ae81ff">0.5167</span>              <span style="color:#ae81ff">49</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20</span>                 <span style="color:#ae81ff">10.1353</span><span style="color:#f92672">/</span>mpq.0.0048 <span style="color:#ae81ff">0.5167</span>              <span style="color:#ae81ff">49</span>
</span></span></code></pre></div><h3 id="get-a-short-doi-from-shortdoiorg">Get a short DOI from shortdoi.org.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Geta a short DOI, just the short DOI returned</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">short_doi</span>(doi <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.1371/journal.pone.0042793&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;10/f2bfz9&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Geta a short DOI, all data returned</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">short_doi</span>(doi <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.1371/journal.pone.0042793&#34;</span>, justshort <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>DOI
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;10.1371/journal.pone.0042793&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>ShortDOI
</span></span><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;10/f2bfz9&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">$</span>IsNew
</span></span><span style="display:flex;"><span>[1] <span style="color:#66d9ef">FALSE</span>
</span></span></code></pre></div><h3 id="get-a-record-from-a-oai-pmh-data-provider">Get a record from a OAI-PMH data provider.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Single provider, one identifier</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">md_getrecord</span>(provider <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pensoft&#34;</span>, identifier <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.3897/zookeys.1.10&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                                                                title
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> A new candidate <span style="color:#66d9ef">for</span> a Gondwanaland distribution <span style="color:#66d9ef">in</span> the <span style="color:#a6e22e">Zodariidae </span>(Araneae)<span style="color:#f92672">:</span> Australutica <span style="color:#66d9ef">in</span> Africa
</span></span><span style="display:flex;"><span>      creator date             type
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Jocqué,Rudy <span style="color:#ae81ff">2008</span> Research Article
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Single provider, multiple identifiers</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">md_getrecord</span>(provider <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pensoft&#34;</span>, identifier <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;10.3897/zookeys.1.10&#34;</span>, <span style="color:#e6db74">&#34;10.3897/zookeys.4.57&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                                                                   title
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    A new candidate <span style="color:#66d9ef">for</span> a Gondwanaland distribution <span style="color:#66d9ef">in</span> the <span style="color:#a6e22e">Zodariidae </span>(Araneae)<span style="color:#f92672">:</span> Australutica <span style="color:#66d9ef">in</span> Africa
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Studies of Tiger Beetles. CLXXVIII. A new <span style="color:#a6e22e">Lophyra </span>(Lophyra) from <span style="color:#a6e22e">Somaliland </span>(Coleoptera, Cicindelidae)
</span></span><span style="display:flex;"><span>        creator date             type
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   Jocqué,Rudy <span style="color:#ae81ff">2008</span> Research Article
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Cassola,Fabio <span style="color:#ae81ff">2008</span> Research Article
</span></span></code></pre></div><h3 id="list-available-metadata-formats-from-various-providers">List available metadata formats from various providers.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># List metadata formats for a provider</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">md_listmetadataformats</span>(provider <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dryad&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  metadataPrefix
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         oai_dc
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            rdf
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            ore
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>           mets
</span></span><span style="display:flex;"><span>                                                       schema
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>              http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>oai_dc.xsd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                 http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>rdf.xsd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> http<span style="color:#f92672">://</span>tweety.lanl.gov<span style="color:#f92672">/</span>public<span style="color:#f92672">/</span>schemas<span style="color:#f92672">/</span><span style="color:#ae81ff">2008-06</span><span style="color:#f92672">/</span>atom<span style="color:#f92672">-</span>tron.sch
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                  http<span style="color:#f92672">://</span>www.loc.gov<span style="color:#f92672">/</span>standards<span style="color:#f92672">/</span>mets<span style="color:#f92672">/</span>mets.xsd
</span></span><span style="display:flex;"><span>                            metadataNamespace
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>oai_dc<span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>    http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>rdf<span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                 http<span style="color:#f92672">://</span>www.w3.org<span style="color:#f92672">/</span><span style="color:#ae81ff">2005</span><span style="color:#f92672">/</span>Atom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                    http<span style="color:#f92672">://</span>www.loc.gov<span style="color:#f92672">/</span>METS<span style="color:#f92672">/</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List metadata formats for a specific identifier for a provider</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">md_listmetadataformats</span>(provider <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pensoft&#34;</span>, identifier <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;10.3897/zookeys.1.10&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            identifier metadataPrefix
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">10.3897</span><span style="color:#f92672">/</span>zookeys.1.10         oai_dc
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">10.3897</span><span style="color:#f92672">/</span>zookeys.1.10           mods
</span></span><span style="display:flex;"><span>                                             schema
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>    http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>oai_dc.xsd
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> http<span style="color:#f92672">://</span>www.loc.gov<span style="color:#f92672">/</span>standards<span style="color:#f92672">/</span>mods<span style="color:#f92672">/</span>v3<span style="color:#f92672">/</span>mods<span style="color:#ae81ff">-3-1</span>.xsd
</span></span><span style="display:flex;"><span>                            metadataNamespace
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> http<span style="color:#f92672">://</span>www.openarchives.org<span style="color:#f92672">/</span>OAI<span style="color:#f92672">/</span><span style="color:#ae81ff">2.0</span><span style="color:#f92672">/</span>oai_dc<span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                  http<span style="color:#f92672">://</span>www.loc.gov<span style="color:#f92672">/</span>mods<span style="color:#f92672">/</span>v3
</span></span></code></pre></div><h3 id="some-plotting---mean-number-of-authors-per-paper">Some plotting - mean number of authors per paper</h3>
<p>Okay, so this isn&rsquo;t a super useful visualization, but you can surely think of something better.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggthemes)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(reshape)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">md_listrecords</span>(provider <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pensoft&#34;</span>, from <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2011-10-01&#34;</span>, until <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2012-01-01&#34;</span>)
</span></span><span style="display:flex;"><span>temp2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(temp)[, <span style="color:#ae81ff">-1</span>]
</span></span><span style="display:flex;"><span>auths <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sapply</span>(temp2<span style="color:#f92672">$</span>creator, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">length</span>(<span style="color:#a6e22e">strsplit</span>(<span style="color:#a6e22e">as.character</span>(x), 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;;&#34;</span>)[[1]]))
</span></span><span style="display:flex;"><span>toplot <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(authors <span style="color:#f92672">=</span> auths, articletype <span style="color:#f92672">=</span> temp2<span style="color:#f92672">$</span>type)
</span></span><span style="display:flex;"><span>toplot_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ddply</span>(toplot, .(articletype), summarise, authors <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(authors))
</span></span><span style="display:flex;"><span>toplot_<span style="color:#f92672">$</span>articletype <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">reorder</span>(toplot_<span style="color:#f92672">$</span>articletype, toplot_<span style="color:#f92672">$</span>authors)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(toplot_, <span style="color:#a6e22e">aes</span>(articletype, authors)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme_tufte</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">coord_flip</span>()
</span></span></code></pre></div><p><img loading="lazy" src="/someplotting.png" alt="center"  />
</p>
<hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2013-03-16-r-metadata.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2013-03-16-r-metadata.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>, and <a href="https://github.com/cboettig/knitcitations">knitcitations</a>.</p>
]]></description>
    </item>
    <item>
      <title>Visualizing rOpenSci collaboration</title>
      <link>http://localhost:1313/2013/03/ropensci-collaboration/</link>
      <pubDate>Fri, 08 Mar 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/03/ropensci-collaboration/</guid>
      <description><![CDATA[<p>We (<a href="http://ropensci.org/">rOpenSci</a>) have been writing code for R packages for a couple years, so it is time to take a look back at the data. What data you ask? The commits data from GitHub ~ data that records who did what and when.</p>
<p>Using the <a href="http://developer.github.com/v3/repos/commits/">Github commits API</a> we can gather data on who commited code to a Github repository, and when they did it. Then we can visualize this hitorical record.</p>
<h3 id="install-some-functions-for-interacting-with-the-github-api-via-r">Install some functions for interacting with the Github API via R</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#39;sandbox&#39;</span>, <span style="color:#e6db74">&#39;ropensci&#39;</span>) 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(sandbox)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(httr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(scales)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(reshape2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(bipartite)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(doMC)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(plyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggthemes)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(picante)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># And authenticate - pops open a page in your default browser, then tells </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># you authentication was successful</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">github_auth</span>()
</span></span></code></pre></div><h3 id="get-all-repos-for-an-organization-here-ropensci-of-course">Get all repos for an organization, here ropensci of course</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ropensci_repos <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">github_allrepos</span>(userorg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ropensci&#34;</span>)
</span></span></code></pre></div><h3 id="get-commits-broken-down-in-to-additions-and-deletions-though-below-we-just-collapse-them-to-all-commits">Get commits broken down in to additions and deletions, though below we just collapse them to all commits</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">registerDoMC</span>(cores <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>github_commits_safe <span style="color:#f92672">&lt;-</span> plyr<span style="color:#f92672">::</span><span style="color:#a6e22e">failwith</span>(<span style="color:#66d9ef">NULL</span>, github_commits)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">llply</span>(ropensci_repos, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">github_commits_safe</span>(<span style="color:#e6db74">&#34;ropensci&#34;</span>, x, 
</span></span><span style="display:flex;"><span>    since <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2009-01-01T&#34;</span>, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>), .parallel <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(out) <span style="color:#f92672">&lt;-</span> ropensci_repos
</span></span><span style="display:flex;"><span>out2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">compact</span>(out)
</span></span><span style="display:flex;"><span>outdf <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(out2)
</span></span></code></pre></div><h3 id="plot-commits-by-date-and-repo">Plot commits by date and repo</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>outdf_subset <span style="color:#f92672">&lt;-</span> outdf[<span style="color:#f92672">!</span>outdf<span style="color:#f92672">$</span>.id <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;citeulike&#34;</span>, <span style="color:#e6db74">&#34;challenge&#34;</span>, <span style="color:#e6db74">&#34;docs&#34;</span>, <span style="color:#e6db74">&#34;ropensci-book&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;usecases&#34;</span>, <span style="color:#e6db74">&#34;textmine&#34;</span>, <span style="color:#e6db74">&#34;usgs&#34;</span>, <span style="color:#e6db74">&#34;ropenscitoolkit&#34;</span>, <span style="color:#e6db74">&#34;neotoma&#34;</span>, <span style="color:#e6db74">&#34;rEWDB&#34;</span>, <span style="color:#e6db74">&#34;rgauges&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;rodash&#34;</span>, <span style="color:#e6db74">&#34;ropensci.github.com&#34;</span>, <span style="color:#e6db74">&#34;ROAuth&#34;</span>), ]
</span></span><span style="display:flex;"><span>outdf_subset<span style="color:#f92672">$</span>.id <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tolower</span>(outdf_subset<span style="color:#f92672">$</span>.id)
</span></span><span style="display:flex;"><span>outdf_subset <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ddply</span>(outdf_subset, .(.id, date), summarise, value <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(value))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mindates <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">llply</span>(<span style="color:#a6e22e">unique</span>(outdf_subset<span style="color:#f92672">$</span>.id), <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">min</span>(outdf_subset[outdf_subset<span style="color:#f92672">$</span>.id <span style="color:#f92672">==</span> 
</span></span><span style="display:flex;"><span>    x, <span style="color:#e6db74">&#34;date&#34;</span>]))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(mindates) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unique</span>(outdf_subset<span style="color:#f92672">$</span>.id)
</span></span><span style="display:flex;"><span>mindates <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sort</span>(<span style="color:#a6e22e">do.call</span>(c, mindates))
</span></span><span style="display:flex;"><span>outdf_subset<span style="color:#f92672">$</span>.id <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">factor</span>(outdf_subset<span style="color:#f92672">$</span>.id, levels <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(mindates))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(outdf_subset, <span style="color:#a6e22e">aes</span>(date, value, fill <span style="color:#f92672">=</span> .id)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>, width <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_rangeframe</span>(sides <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;b&#34;</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_date</span>(labels <span style="color:#f92672">=</span> <span style="color:#a6e22e">date_format</span>(<span style="color:#e6db74">&#34;%Y&#34;</span>), breaks <span style="color:#f92672">=</span> <span style="color:#a6e22e">date_breaks</span>(<span style="color:#e6db74">&#34;year&#34;</span>)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_log10</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">facet_grid</span>(.id <span style="color:#f92672">~</span> .) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>        axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>), 
</span></span><span style="display:flex;"><span>        axis.ticks.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>        strip.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(angle <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>, ), 
</span></span><span style="display:flex;"><span>        strip.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>), 
</span></span><span style="display:flex;"><span>        panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>        panel.grid.minor <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>        legend.text <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>), 
</span></span><span style="display:flex;"><span>        legend.position <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;none&#34;</span>, 
</span></span><span style="display:flex;"><span>        panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>())
</span></span></code></pre></div><p><img loading="lazy" src="/commitsbydate.png" alt="center"  />
</p>
<p>The plot above plots the sum of additions+deletions, and is sorted by the first commit date of reach repo, with the first being <a href="https://github.com/ropensci/treeBASE">treebase</a>, which wraps the <a href="http://treebase.org/treebase-web/urlAPI.html">Treebase API</a>, and the most recent being <a href="https://github.com/ropensci/rWBclimate">rwbclimate</a>, which wraps the <a href="http://data.worldbank.org/developers/climate-data-api">World Blank climate data API</a>.</p>
<p>You can see that some repos have recieved commits more or less consistently over their life time, while others have seen a little development here and there.
w</p>
<h3 id="in-addition-there-are-quite-a-few-people-that-have-committed-code-now-to-ropensci-repos-calling-for-a-network-vizualization-of-course">In addition, there are quite a few people that have committed code now to rOpenSci repos, calling for a network vizualization of course.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>outdf_network <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">droplevels</span>(outdf[<span style="color:#f92672">!</span>outdf<span style="color:#f92672">$</span>.id <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;citeulike&#34;</span>, <span style="color:#e6db74">&#34;challenge&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;docs&#34;</span>, <span style="color:#e6db74">&#34;ropensci-book&#34;</span>, <span style="color:#e6db74">&#34;usecases&#34;</span>, <span style="color:#e6db74">&#34;textmine&#34;</span>, <span style="color:#e6db74">&#34;usgs&#34;</span>, <span style="color:#e6db74">&#34;ropenscitoolkit&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;retriever&#34;</span>, <span style="color:#e6db74">&#34;rodash&#34;</span>, <span style="color:#e6db74">&#34;ropensci.github.com&#34;</span>, <span style="color:#e6db74">&#34;ROAuth&#34;</span>, <span style="color:#e6db74">&#34;rgauges&#34;</span>, <span style="color:#e6db74">&#34;sandbox&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;rfna&#34;</span>, <span style="color:#e6db74">&#34;rmetadata&#34;</span>, <span style="color:#e6db74">&#34;rhindawi&#34;</span>, <span style="color:#e6db74">&#34;rpmc&#34;</span>, <span style="color:#e6db74">&#34;rpensoft&#34;</span>, <span style="color:#e6db74">&#34;ritis&#34;</span>), ])
</span></span><span style="display:flex;"><span>casted <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dcast</span>(outdf_network, .id <span style="color:#f92672">+</span> date <span style="color:#f92672">+</span> name <span style="color:#f92672">~</span> variable, fun.aggregate <span style="color:#f92672">=</span> length, 
</span></span><span style="display:flex;"><span>    value.var <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;value&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(casted)[1] <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;repo&#34;</span>
</span></span><span style="display:flex;"><span>casted2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ddply</span>(casted, .(repo, name), summarise, commits <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span>(additions))
</span></span><span style="display:flex;"><span>casted2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(repo <span style="color:#f92672">=</span> casted2<span style="color:#f92672">$</span>repo, weight <span style="color:#f92672">=</span> casted2<span style="color:#f92672">$</span>commits, name <span style="color:#f92672">=</span> casted2<span style="color:#f92672">$</span>name)
</span></span><span style="display:flex;"><span>mat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sample2matrix</span>(casted2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plotweb</span>(<span style="color:#a6e22e">sortweb</span>(mat, sort.order <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;dec&#34;</span>), method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;normal&#34;</span>, text.rot <span style="color:#f92672">=</span> <span style="color:#ae81ff">90</span>, 
</span></span><span style="display:flex;"><span>    adj.high <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-0.3</span>, <span style="color:#ae81ff">0</span>), adj.low <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">-0.3</span>), y.width.low <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.05</span>, y.width.high <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.05</span>, 
</span></span><span style="display:flex;"><span>    ybig <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.09</span>, labsize <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.7</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/collabnetwork.png" alt="center"  />
</p>
<p>The plot above shows repos on one side and contributors on the other. Some folks (the core rOpenSci team: cboettig, karthikram, emhart, and schamberlain) have committed quite a lot to many packages. We also have amny awesome contributors to our packages (some contributors and repos have been removed for clarity).</p>
<p>rOpenSci is truly a collaborative effort to develop tools for open science, so thanks to all our contributors - keep on forking, pull requesting, and commiting.</p>
]]></description>
    </item>
    <item>
      <title>Waiting for an API request to complete</title>
      <link>http://localhost:1313/2013/01/api-token/</link>
      <pubDate>Sat, 26 Jan 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/01/api-token/</guid>
      <description><![CDATA[<h3 id="dealing-with-api-tokens-in-r">Dealing with API tokens in R</h3>
<p>In <a href="/posts/2013-01-25-tnrs-use-case/">my previous post</a> I showed an example of calling the Phylotastic taxonomic name resolution API <code>Taxosaurus</code> <a href="https://api.phylotastic.org/tnrs">here</a>.  When you query their API they give you a token which you use later to retrieve the result (see examples on their page above). However, you don&rsquo;t know when the query will be done, so how do we know when to send the query to rerieve the data?</p>
<p>As the time this takes depends on how big the query is and other things, we don&rsquo;t know when we can get the result. I struggled with this for a bit, but then settled on using a while loop.</p>
<p>So what does this look like?  Basically we just keep sending the request for data until we get it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>iter <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># make an iterator so each time we call</span>
</span></span><span style="display:flex;"><span>output <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>()  <span style="color:#75715e"># make an empty list to put data into</span>
</span></span><span style="display:flex;"><span>timeout <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;wait&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (timeout <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;wait&#34;</span>) {
</span></span><span style="display:flex;"><span>    iter <span style="color:#f92672">&lt;-</span> iter <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e"># increase the iterator each time</span>
</span></span><span style="display:flex;"><span>    temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fromJSON</span>(<span style="color:#a6e22e">getURL</span>(retrieve))  <span style="color:#75715e"># send the request and parse the JSON</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;is still being processed&#34;</span>, temp[<span style="color:#e6db74">&#34;message&#34;</span>]) <span style="color:#f92672">==</span> <span style="color:#66d9ef">TRUE</span>) {
</span></span><span style="display:flex;"><span>        timeout <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;wait&#34;</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>        output[[iter]] <span style="color:#f92672">&lt;-</span> temp  <span style="color:#75715e"># put result from query in the list</span>
</span></span><span style="display:flex;"><span>        timeout <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;done&#34;</span>  <span style="color:#75715e"># we got the result so timeout is now done, making the while loop stop</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2013-01-26-api-token.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2013-01-26-api-token.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></description>
    </item>
    <item>
      <title>Resolving species names when you have a lot of them</title>
      <link>http://localhost:1313/2013/01/tnrs-use-case/</link>
      <pubDate>Fri, 25 Jan 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/01/tnrs-use-case/</guid>
      <description><![CDATA[<h3 id="__taxize-use-case-resolving-species-names-when-you-have-a-lot-of-them__"><strong>taxize use case: Resolving species names when you have a lot of them</strong></h3>
<p>Species names can be a pain in the ass, especially if you are an ecologist. We ecologists aren&rsquo;t trained in taxonomy, yet we often end up with huge species lists.  Of course we want to correct any spelling errors in the names, and get the newest names for our species, resolve any synonyms, etc.</p>
<p>We are building tools into our R package <a href="http://ropensci.github.com/taxize_/"><code>taxize</code></a>, that will let you check your species names to make sure they are correct.</p>
<p>An important use case is when you have a lot of species. Someone wrote to us recently, saying that they had thousands of species, and they wanted to know how to check their species names efficiently in R.</p>
<p>Below is an example of how to do this.</p>
<h4 id="install-taxize">Install taxize</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize_&#39;, &#39;ropensci&#39;) # install the GitHub version, not</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># the CRAN version, uncomment if you don&#39;t have it installed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><h4 id="get-some-species-in-this-case-all-species-in-the-scrophulariaceae-family-from-theplantlistorg">Get some species, in this case all species in the Scrophulariaceae family from theplantlist.org</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">tpl_get</span>(dir_ <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;~/foo2&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Scrophulariaceae&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">## Reading and writing csv files to ~/foo2...</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;~/foo2/Scrophulariaceae.csv&#34;</span>)
</span></span></code></pre></div><h4 id="lets-grab-the-species-and-concatenate-to-genus_species">Lets grab the species and concatenate to genus_species</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>species <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.character</span>(<span style="color:#a6e22e">ddply</span>(dat[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Genus&#34;</span>, <span style="color:#e6db74">&#34;Species&#34;</span>)], .(), transform, 
</span></span><span style="display:flex;"><span>    gen_sp <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.factor</span>(<span style="color:#a6e22e">paste</span>(Genus, Species, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34; &#34;</span>)))[, <span style="color:#ae81ff">4</span>])
</span></span></code></pre></div><h4 id="its-better-to-do-many-smaller-calls-to-a-web-api-instead-of-few-big-ones-to-be-nice-to-the-database-maintainers">It&rsquo;s better to do many smaller calls to a web API instead of few big ones to be nice to the database maintainers.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e">## Define function to split up your species list into useable chuncks</span>
</span></span><span style="display:flex;"><span>slice <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(input, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>    starts <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">length</span>(input), by)
</span></span><span style="display:flex;"><span>    tt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(starts, <span style="color:#66d9ef">function</span>(y) input[y<span style="color:#f92672">:</span>(y <span style="color:#f92672">+</span> (by <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>))])
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">llply</span>(tt, <span style="color:#66d9ef">function</span>(x) x[<span style="color:#f92672">!</span><span style="color:#a6e22e">is.na</span>(x)])
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>species_split <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">slice</span>(species, by <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>)
</span></span></code></pre></div><h4 id="query-for-your-large-species-list-with-pauses-between-calls-with-3-seconds-in-between-calls-to-not-hit-the-web-service-too-hard-using-post-method-here-instead-of-get---required-when-you-have-a-lot-of-species">Query for your large species list with pauses between calls, with 3 seconds in between calls to not hit the web service too hard. Using POST method here instead of GET - required when you have a lot of species.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>tnrs_safe <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">failwith</span>(<span style="color:#66d9ef">NULL</span>, tnrs)  <span style="color:#75715e"># in case some calls fail, will continue</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">llply</span>(species_split, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">tnrs_safe</span>(x, getpost <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;POST&#34;</span>, sleep <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">90</span>fcd9ae425ad7c6103b06dd9fd78ae2
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">223</span>f73b83fcddcb8b6187966963660a8
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">72</span>bacdbb8938316e321d4c709c8cdd09
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">979</span>ce9cc4dec376710f61de162e1294e
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">03</span>a39a124561fec2fdfc0f483d9fb607
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span>d4bf4e5a1403f45a1be1ca3dd87785d7
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span>a9a9bdde6fda7e325d80120e27ccb480
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">215</span>ccdcf2b00362278bf19d1942e1395
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">9</span>d43c0b99b4dfb5ea1b435adab17b980
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">42e166</span>f8e43f1fb349e36459cd5938b3
</span></span><span style="display:flex;"><span>Calling http<span style="color:#f92672">://</span>taxosaurus.org<span style="color:#f92672">/</span>retrieve<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>c42e4b5227c5464f9bfeeafcdf0651d
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Looks like we got some data back for each element of our species list</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">lapply</span>(out, head)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>]  <span style="color:#75715e"># just look at the first two</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[[1]]
</span></span><span style="display:flex;"><span>                 submittedName                 acceptedName    sourceId
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>        Aptosimum welwitschii                              iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>        Anticharis ebracteata        Anticharis ebracteata iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            Aptosimum lineare            Aptosimum lineare iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Antherothamnus pearsonii     Antherothamnus pearsonii iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Barthlottia madagascariensis Barthlottia madagascariensis iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>         Agathelpis mucronata                              iPlant_TNRS
</span></span><span style="display:flex;"><span>  score                  matchedName     annotations
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">1</span>        Aptosimum welwitschii                
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">1</span>        Anticharis ebracteata          Schinz
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">1</span>            Aptosimum lineare Marloth <span style="color:#f92672">&amp;</span> Engl.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">1</span>     Antherothamnus pearsonii        N.E. Br.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">1</span> Barthlottia madagascariensis      Eb. Fisch.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">1</span>         Agathelpis mucronata                
</span></span><span style="display:flex;"><span>                                    uri
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                      
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202501</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202525</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202728</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">50089700</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                                      
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[[2]]
</span></span><span style="display:flex;"><span>                     submittedName           acceptedName    sourceId
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Buddleja pichinchensis x bullata Buddleja pichinchensis iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                 Buddleja soratae       Buddleja soratae iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>              Buddleja euryphylla    Buddleja euryphylla iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                  Buddleja incana        Buddleja incana iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>                  Buddleja incana                 Incana        NCBI
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                    Buddleja nana Buddleja brachystachya iPlant_TNRS
</span></span><span style="display:flex;"><span>  score            matchedName        annotations
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">0.9</span> Buddleja pichinchensis              Kunth
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">1.0</span>       Buddleja soratae           Kraenzl.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">1.0</span>    Buddleja euryphylla Standl. <span style="color:#f92672">&amp;</span> Steyerm.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">1.0</span>        Buddleja incana        Ruiz <span style="color:#f92672">&amp;</span> Pav.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">1.0</span>        Buddleja incana               none
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">1.0</span>          Buddleja nana              Diels
</span></span><span style="display:flex;"><span>                                          uri
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19000333</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19001018</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19000790</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19000596</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> http<span style="color:#f92672">://</span>www.ncbi.nlm.nih.gov<span style="color:#f92672">/</span>taxonomy<span style="color:#f92672">/</span><span style="color:#ae81ff">405077</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19001133</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now we can put them back together as so into one data.frame if you like</span>
</span></span><span style="display:flex;"><span>outdf <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(out)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(outdf)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>                 submittedName                 acceptedName    sourceId
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>        Aptosimum welwitschii                              iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>        Anticharis ebracteata        Anticharis ebracteata iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            Aptosimum lineare            Aptosimum lineare iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Antherothamnus pearsonii     Antherothamnus pearsonii iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Barthlottia madagascariensis Barthlottia madagascariensis iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>         Agathelpis mucronata                              iPlant_TNRS
</span></span><span style="display:flex;"><span>  score                  matchedName     annotations
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">1</span>        Aptosimum welwitschii                
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">1</span>        Anticharis ebracteata          Schinz
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">1</span>            Aptosimum lineare Marloth <span style="color:#f92672">&amp;</span> Engl.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">1</span>     Antherothamnus pearsonii        N.E. Br.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">1</span> Barthlottia madagascariensis      Eb. Fisch.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">1</span>         Agathelpis mucronata                
</span></span><span style="display:flex;"><span>                                    uri
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                      
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202501</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202525</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">29202728</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">50089700</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>
</span></span></code></pre></div><p>Note that there are multiple names for some species because data sources have different names for the same species (resulting in more than one row in the data.frame &lsquo;outdf&rsquo; for a species). We are leaving this up to the user to decide which to use. For example, for the species <em>Buddleja montana</em> there are two names for in the output</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ddply</span>(outdf, .(submittedName), summarize, <span style="color:#a6e22e">length</span>(submittedName))
</span></span><span style="display:flex;"><span>outdf[outdf<span style="color:#f92672">$</span>submittedName <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">as.character</span>(data[data<span style="color:#f92672">$</span><span style="color:#66d9ef">..1</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>, ][6, <span style="color:#e6db74">&#34;submittedName&#34;</span>]), 
</span></span><span style="display:flex;"><span>    ]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>       submittedName     acceptedName    sourceId score      matchedName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">123</span> Buddleja montana Buddleja montana iPlant_TNRS     <span style="color:#ae81ff">1</span> Buddleja montana
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">124</span> Buddleja montana          Montana        NCBI     <span style="color:#ae81ff">1</span> Buddleja montana
</span></span><span style="display:flex;"><span>         annotations                                         uri
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">123</span> Britton ex Rusby       http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19000601</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">124</span>             none http<span style="color:#f92672">://</span>www.ncbi.nlm.nih.gov<span style="color:#f92672">/</span>taxonomy<span style="color:#f92672">/</span><span style="color:#ae81ff">441235</span>
</span></span></code></pre></div><p>The source iPlant matched the name, but NCBI actually gave back a genus of cricket (follow the link under the column uri for <em>Montana</em>). If you look at the page for <em>Buddleja</em> on NCBI <a href="http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=26473">here</a> there is no <em>Buddleja montana</em> at all.</p>
<p>Another thing we could do is look at the score that is returned. Let&rsquo;s look at those that are less than 1 (i.e., )</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>outdf[outdf<span style="color:#f92672">$</span>score <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>, ]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>                        submittedName           acceptedName    sourceId
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">94</span>   Buddleja pichinchensis x bullata Buddleja pichinchensis iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">340</span>                Diascia ellaphieae                        iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">495</span>              Eremophila decipiens                        iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">500</span>            Eremophila grandiflora             Eremophila iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">808</span>           Jamesbrittneia hilliard                        iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1051</span>                 Verbascum patris              Verbascum iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1081</span>             Verbascum barnadesii              Verbascum iPlant_TNRS
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1097</span>              Verbascum calycosum              Verbascum iPlant_TNRS
</span></span><span style="display:flex;"><span>     score            matchedName annotations
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">94</span>    <span style="color:#ae81ff">0.90</span> Buddleja pichinchensis       Kunth
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">340</span>   <span style="color:#ae81ff">0.98</span>      Diascia ellaphiae            
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">495</span>   <span style="color:#ae81ff">0.98</span>  Eremophila decipiense            
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">500</span>   <span style="color:#ae81ff">0.50</span>             Eremophila      R. Br.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">808</span>   <span style="color:#ae81ff">0.50</span>         Jamesbrittenia            
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1051</span>  <span style="color:#ae81ff">0.50</span>              Verbascum          L.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1081</span>  <span style="color:#ae81ff">0.50</span>              Verbascum          L.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1097</span>  <span style="color:#ae81ff">0.50</span>              Verbascum          L.
</span></span><span style="display:flex;"><span>                                       uri
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">94</span>   http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">19000333</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">340</span>                                       
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">495</span>                                       
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">500</span>  http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">40004761</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">808</span>                                       
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1051</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">40023766</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1081</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">40023766</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1097</span> http<span style="color:#f92672">://</span>www.tropicos.org<span style="color:#f92672">/</span>Name<span style="color:#f92672">/</span><span style="color:#ae81ff">40023766</span>
</span></span></code></pre></div><p>As we got this speies list from <a href="http://www.theplantlist.org/">theplantlist.org</a>, there aren&rsquo;t that many mistakes, but if it was my species list you know there would be many :)</p>
<p>That&rsquo;s it.  Try it out and let us know if you have any questions at <a href="mailto:info@ropensci.org">info@ropensci.org</a>, or <a href="https://github.com/ropensci/taxize_/issues">ask questions/report problems at GitHub</a>.</p>
<hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/2013-01-25-tnrs-use-case.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2013-01-25-tnrs-use-case.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></description>
    </item>
    <item>
      <title>Open Science Challenge</title>
      <link>http://localhost:1313/2013/01/open-science-challenge/</link>
      <pubDate>Tue, 08 Jan 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/01/open-science-challenge/</guid>
      <description><![CDATA[<p><img loading="lazy" src="https://raw.github.com/sckott/sckott.github.com/master/public/img/ropensci_challenge.png" alt="center"  />
</p>
<h3 id="__open-science__"><strong>Open Science</strong></h3>
<p>Science is becoming more open in many areas: publishing, data sharing, lab notebooks, and software. There are many benefits to open science. For example, sharing research data alongside your publications leads to increased citation rate (Piwowar <em>et. al.</em> 2007). In addition, data is becoming easier to share and reuse thanks to efforts like <a href="http://figshare.com/">FigShare</a> and <a href="http://datadryad.org/">Dryad</a>.</p>
<p>If you don&rsquo;t understand the problem we are currently facing due to lack of open science, watch this video:</p>

<iframe width="560" height="315" src="http://www.youtube.com/embed/N2zK3sAtr-4" frameborder="0" allowfullscreen></iframe>

<h3 id="__i-just-want-data__"><strong>I just want Data</strong></h3>
<p>Another way to look at this challenge is to think about how you can get data more easily. Right now you probably go to a website that has an interface to a database. You do a search, and then download a .csv file perhaps. Then you open it in Excel, and do some pivot tables to get the data in the right format. Only then will you bring the data in to R.</p>
<p>The advantage of using our packages is that they allow you to do that data collection part in a few lines of code. Therefore, you can easily do all those steps in the above paragraph using a few lines of code in one R file. Why does this matter? You can more easily reproduce your own work months later after that summer vacation. In addition, others can reproduce your research more easily.</p>
<h3 id="__the-challenge__"><strong>The challenge</strong></h3>
<p>We (<a href="http://ropensci.org/">ropensci</a>) have just kicked off the <a href="http://ropensci.org/open-science-challenge/">rOpenSci Open Science Challenge</a>. If you aren&rsquo;t familiar with rOpenSci, it is a software collective connecting scientists to open science data on the web. Since R is the most popular programming language for life scientists, it made sense to do this in R (instead of Python e.g.).</p>
<h3 id="__what-is-the-challenge-about__"><strong>What is the challenge about?</strong></h3>
<p>At rOpenSci, we create R software to make getting open source text from publications and open source data easy. An important result of this is that we are facilitating open science. Why? Because R is an open source programming language, and all of our software is open source. . This challenge asks you to propose a project using one or more of our packages - or perhaps you want to propose a new dataset to connect to R. The rOpenSci core developer team will help you with any problems using our packages, and attempt to modify packages according to feedback from participants. Do you use one or more of our R packages? If you do, great. If not, check out our packages <a href="http://ropensci.org/packages/index.html">here</a>.</p>
<h3 id="__how-to-apply__"><strong>How to apply</strong></h3>
<p>Just send an email to [info@ropensci.org](mailto:info@ropensci.org?subject=rOpenSci Open Science Challenge).</p>
<h3 id="__the-deadline__"><strong>The deadline</strong></h3>
<p>January 31, 2013</p>
<h4 id="get-the-rmd-file-used-to-create-this-post-at-my-github-accounthttpsgithubcomsckottsckottgithubcomtreemaster_drafts2013-01-08-open-science-challengermd---or-md-filehttpsgithubcomsckottsckottgithubcomtreemaster_posts2013-01-08-open-science-challengemd">Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2013-01-08-open-science-challenge.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2013-01-08-open-science-challenge.md">.md file</a>.</h4>
<h4 id="written-in-markdownhttpdaringfireballnetprojectsmarkdown-with-help-from-knitrhttpyihuinameknitr-and-knitcitationshttpsgithubcomcboettigknitcitations-from-carl-boettigerhttpwwwcarlboettigerinfo">Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>, and <a href="https://github.com/cboettig/knitcitations">knitcitations</a> from <a href="http://www.carlboettiger.info/">Carl Boettiger</a>.</h4>
<h4 id="references">References</h4>

<p>Piwowar HA, Day RS, Fridsma DB and Ioannidis J (2007).
&ldquo;Sharing Detailed Research Data is Associated With Increased Citation Rate.&rdquo;
<EM>Plos One</EM>, <B>2</B>.
<a href="http://dx.doi.org/10.1371/journal.pone.0000308">http://dx.doi.org/10.1371/journal.pone.0000308</a>.

]]></description>
    </item>
    <item>
      <title>Is invasive?</title>
      <link>http://localhost:1313/2012/12/is-invasive/</link>
      <pubDate>Thu, 13 Dec 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/12/is-invasive/</guid>
      <description><![CDATA[<p>The Global Invasive Species Database (GISD) (see their website for more info <a href="http://www.issg.org/database/welcome/">here</a>) has data on the invasiveness status of many species. From <code>taxize</code> you can now query the GISD database.</p>
<p>Introducing the function <code>gisd_isinvasive</code>. This function was contributed to <code>taxize</code> by <a href="http://www.bartomeus.cat/es/ignasi/">Ignasi Bartomeus</a>, a postdoc at the Swedish University Agricultural Sciences.</p>
<p>There are two possible outputs from using <code>gisd_isinvasive</code>: &ldquo;Invasive&rdquo; or &ldquo;Not in GISD&rdquo;. If you use <code>simplify=TRUE</code> in the function you get &ldquo;Invasive&rdquo; or &ldquo;Not in GISD&rdquo;, but if you use <code>simplify=FALSE</code> you get verbose description of the invasive species instead of just &ldquo;Invasive&rdquo; (and you still just get &ldquo;Not in GISD&rdquo;).</p>
<hr>
<p><img loading="lazy" src="/gisd_small.png" alt="center"  />
</p>
<hr>
<h3 id="install-taxize-from-github">Install taxize from GitHub</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize_&#39;, &#39;ropensci&#39;) # install if you don&#39;t already</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># have the GitHub version</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><hr>
<h3 id="make-a-vector-of-species">Make a vector of species</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>sp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Carpobrotus edulis&#34;</span>, <span style="color:#e6db74">&#34;Rosmarinus officinalis&#34;</span>, <span style="color:#e6db74">&#34;Nasua nasua&#34;</span>, <span style="color:#e6db74">&#34;Martes melampus&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Centaurea solstitialis&#34;</span>)
</span></span></code></pre></div><h3 id="using-the-function-gisd_isinvasive-you-can-query-the-gisd-database-for-the-invasiveness-status-of-your-species-at-least-according-to-gisd-calling-gisd_isinvasive-with-the-second-parameter-set-to-default-simplifyfalse-you-get-verbose-output-with-details-on-the-species">Using the function <code>gisd_isinvasive</code> you can query the GISD database for the invasiveness status of your species, at least according to GISD. Calling <code>gisd_isinvasive</code> with the second parameter set to default <code>simplify=FALSE</code>, you get verbose output, with details on the species.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">gisd_isinvasive</span>(sp)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>Done
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                 species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>     Carpobrotus edulis
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Rosmarinus officinalis
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            Nasua nasua
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Martes melampus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Centaurea solstitialis
</span></span><span style="display:flex;"><span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               status
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                                                                                                                                                                                                                                  You searched <span style="color:#66d9ef">for</span> invasive species named Carpobrotus edulis<span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span>.  Carpobrotus <span style="color:#a6e22e">edulis </span>(succulent)        Carpobrotus edulis is a mat<span style="color:#f92672">-</span>forming succulent native to South Africa which is invasive primarily <span style="color:#66d9ef">in</span> coastal habitats <span style="color:#66d9ef">in</span> many parts of the world. It was often introduced as an ornamental plant or used <span style="color:#66d9ef">for</span> planting along roadsides, from which it has spread to become invasive. Its main impacts are smothering, reduced regeneration of native flora and changes to soil pH and nutrient regimes.\r\nCommon Names<span style="color:#f92672">:</span> balsamo, Cape fig, figue marine, freeway iceplant, ghaukum, ghoenavy, highway ice plant, higo del Cabo, higo marino, Hottentosvy, hottentot fig, Hottentottenfeige, iceplant, ikhambi<span style="color:#f92672">-</span>lamabulawo, Kaapsevy, patata frita, perdevy, pigface, rankvy, sea fig, sour fig, suurvy, umgongozi, vyerank\r\nSynonyms<span style="color:#f92672">:</span> Mesembryanthemum edule L., Mesembryanthemum edulis
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Not <span style="color:#66d9ef">in</span> GISD
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            You searched <span style="color:#66d9ef">for</span> invasive species named Nasua nasua<span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>.  Nasua <span style="color:#a6e22e">nasua </span>(mammal)             Interim profile, incomplete informationCommon Names<span style="color:#f92672">:</span> Achuni, Coatí, South American Coati, Tejón
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       You searched <span style="color:#66d9ef">for</span> invasive species named Martes melampus<span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>.  Martes <span style="color:#a6e22e">melampus </span>(mammal)             Interim profile, incomplete informationCommon Names<span style="color:#f92672">:</span> Japanese Marten, Tsushima Island Marten
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> You searched <span style="color:#66d9ef">for</span> invasive species named Centaurea solstitialis<span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span>.  Centaurea <span style="color:#a6e22e">solstitialis </span>(herb)        Centaurea solstitialis is a winter annual that can form dense impenetrable stands that displace desirable vegetation <span style="color:#66d9ef">in</span> natural areas, rangelands, and other places. It is best adapted to open grasslands with deep, well<span style="color:#f92672">-</span>drained soils and an annual precipitation range of <span style="color:#ae81ff">25</span> to <span style="color:#ae81ff">150</span>cm per year. It is intolerant of shade. Although populations can occur at elevations as high as <span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">400</span> m, most large infestations are found below <span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">500</span> m. Human activities are the primary mechanisms <span style="color:#66d9ef">for</span> the long distance movement of C. solstitialis seed. The short, stiff, pappus bristles are covered with barbs that readily adhere to clothing, hair, and fur.  The movement of contaminated hay and uncertified seed are also important long distance transportation mechanisms. Wind disperses seeds over short distances.\r\nCommon Names<span style="color:#f92672">:</span> geeldissel, golden star thistle, sonnwend<span style="color:#f92672">-</span>Flockenblume, St. Barnaby<span style="color:#e6db74">&#39;</span><span style="color:#960050;background-color:#1e0010">s thistle, yellow centaury, yellow cockspur, yellow star thistle\r\nSynonyms: Leucantha solstitialis (L.) A.&amp; D. Löve</span>
</span></span></code></pre></div><h3 id="simpler-output-just-the-invasive-status">Simpler output, just the invasive status.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">gisd_isinvasive</span>(sp, simplify <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>Checking species <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>Done
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                 species      status
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>     Carpobrotus edulis    Invasive
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Rosmarinus officinalis Not <span style="color:#66d9ef">in</span> GISD
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            Nasua nasua    Invasive
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Martes melampus    Invasive
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Centaurea solstitialis    Invasive
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-12-13-is-invasive.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-12-13-is-invasive.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></description>
    </item>
    <item>
      <title>Shiny apps are awesome</title>
      <link>http://localhost:1313/2012/12/shiny-r/</link>
      <pubDate>Mon, 10 Dec 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/12/shiny-r/</guid>
      <description><![CDATA[<p>RStudio has a new product called <code>Shiny</code> that, quoting from their website, &ldquo;makes it super simple for R users like you to turn analyses into interactive web applications that anyone can use&rdquo;. <a href="http://www.rstudio.com/shiny/">See here</a> for more information.</p>
<p>A <code>Shiny</code> basically consists of two files: a <code>ui.r</code> file and a <code>server.r</code> file.  The <code>ui.r</code> file, as it says, provides the user interface, and the <code>server.r</code> file provides the the server logic.</p>
<p>Below is what it looks like in the wild (on a browser).</p>
<p><img loading="lazy" src="http://sckott.github.io/public/img/shiny_ss.png" alt="center"  />
</p>
<p>It was pretty easy (for <a href="http://emhart.github.com/">Ted Hart of rOpenSci</a>) to build this app to demonstrate output from the <a href="http://cran.r-project.org/web/packages/rgbif/index.html"><code>ropensci rgbif</code> package</a>.</p>
<h3 id="you-may-need-to-install-packages-first">You may need to install packages first.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;shiny&#34;</span>, <span style="color:#e6db74">&#34;ggplot2&#34;</span>, <span style="color:#e6db74">&#34;plyr&#34;</span>, <span style="color:#e6db74">&#34;rgbif&#34;</span>))
</span></span></code></pre></div><h3 id="we-tried-to-build-in-making-real-time-api-calls-to-gbifs-servers-but-the-calls-took-too-long-for-web-speed--so-we-prepare-the-data-first-and-then-serve-it-up-from-saved-data-in-a-rda-file-lets-first-prepare-the-data---well-this-is-what-we-do-on-the-app-itself-but-see-the-next-code-block-for">We tried to build in making real time API calls to GBIF&rsquo;s servers, but the calls took too long for web speed.  So we prepare the data first, and then serve it up from saved data in a <code>.rda</code> file. Let&rsquo;s first prepare the data. &ndash;Well, this is what we do on the app itself, but see the next code block for</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rgbif)
</span></span><span style="display:flex;"><span>splist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Accipiter erythronemius&#34;</span>, <span style="color:#e6db74">&#34;Junco hyemalis&#34;</span>, <span style="color:#e6db74">&#34;Aix sponsa&#34;</span>, <span style="color:#e6db74">&#34;Haliaeetus leucocephalus&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Corvus corone&#34;</span>, <span style="color:#e6db74">&#34;Threskiornis molucca&#34;</span>, <span style="color:#e6db74">&#34;Merops malimbicus&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">llply</span>(splist, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">occurrencelist</span>(x, coordinatestatus <span style="color:#f92672">=</span> T, maxresults <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(out) <span style="color:#f92672">&lt;-</span> splist  <span style="color:#75715e"># name each data.frame with the species names</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">setwd</span>(<span style="color:#e6db74">&#34;~/ShinyApps/rgbif2&#34;</span>)  <span style="color:#75715e"># set directory</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">save</span>(out, file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;speciesdata.rda&#34;</span>)  <span style="color:#75715e"># save the list of data.frames into an .rda file to serve up</span>
</span></span></code></pre></div><h3 id="heres-the-server-logic">Here&rsquo;s the server logic</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(shiny)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(plyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rgbif)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Set up server output</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">shinyServer</span>(<span style="color:#66d9ef">function</span>(input, output) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">load</span>(<span style="color:#e6db74">&#34;speciesdata.rda&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># define function for server plot output</span>
</span></span><span style="display:flex;"><span>    output<span style="color:#f92672">$</span>gbifplot <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">reactivePlot</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>        species <span style="color:#f92672">&lt;-</span> input<span style="color:#f92672">$</span>spec
</span></span><span style="display:flex;"><span>        df <span style="color:#f92672">&lt;-</span> out<span style="color:#a6e22e">[names</span>(out) <span style="color:#f92672">%in%</span> species]
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">print</span>(<span style="color:#a6e22e">gbifmap</span>(df))
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    output<span style="color:#f92672">$</span>cbt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">reactiveText</span>(<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><h3 id="the-user-interface">The user interface</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(shiny)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define UI for application that plots random distributions</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">shinyUI</span>(<span style="color:#a6e22e">pageWithSidebar</span>(<span style="color:#a6e22e">headerPanel</span>(<span style="color:#e6db74">&#34;rgbif example&#34;</span>), <span style="color:#a6e22e">sidebarPanel</span>(<span style="color:#a6e22e">checkboxGroupInput</span>(<span style="color:#e6db74">&#34;spec&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Species to map:&#34;</span>, <span style="color:#a6e22e">c</span>(`Sharp shinned hawk (Accipiter erythronemius)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Accipiter erythronemius&#34;</span>, 
</span></span><span style="display:flex;"><span>        `Dark eyed junco (Junco hyemalis)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Junco hyemalis&#34;</span>, `Wood duck (Aix sponsa)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Aix sponsa&#34;</span>, 
</span></span><span style="display:flex;"><span>        `Bald eagle (Haliaeetus leucocephalus)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Haliaeetus leucocephalus&#34;</span>, 
</span></span><span style="display:flex;"><span>        `Carrion crow (Corvus corone)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Corvus corone&#34;</span>, `Australian White Ibis (Threskiornis molucca)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Threskiornis molucca&#34;</span>, 
</span></span><span style="display:flex;"><span>        `Rosy Bee-eater (Merops malimbicus)` <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Merops malimbicus&#34;</span>), selected <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Bald eagle (Haliaeetus leucocephalus)&#34;</span>))), 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mainPanel</span>(<span style="color:#a6e22e">h5</span>(<span style="color:#e6db74">&#34;A map of your selected species: Please note that GBIF is queried for every selection so loading times vary&#34;</span>), 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">plotOutput</span>(<span style="color:#e6db74">&#34;gbifplot&#34;</span>))))
</span></span></code></pre></div><p>This should be all you need. To actually serve up the app in the web, request to be part of their beta-test of Shiny server on the web <a href="https://rstudio.wufoo.com/forms/shiny-server-beta-program/">here</a>.</p>
<p>Go play with our Shiny app <a href="http://glimmer.rstudio.com/ropensci/rgbif2/">here</a> to see the kind of visualization you can do with the <code>rgbif</code> package.</p>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-12-10-shiny-r.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-12-10-shiny-r.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></description>
    </item>
  </channel>
</rss>
