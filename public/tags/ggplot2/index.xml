<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Ggplot2 on Recology</title>
    <link>http://localhost:1313/tags/ggplot2/</link>
    <description>Recent content in Ggplot2 on Recology</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 22 May 2014 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/ggplot2/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Logistic plot reboot</title>
      <link>http://localhost:1313/2014/05/logplotreboot/</link>
      <pubDate>Thu, 22 May 2014 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2014/05/logplotreboot/</guid>
      <description>Someone asked about plotting something like this today
I wrote a few functions previously to do something like this. However, since then ggplot2 has changed, and one of the functions no longer works.
Hence, I fixed opts() to theme(), theme_blank() to element_blank(), and panel.background = element_blank() to plot.background = element_blank() to get the histograms to show up with the line plot and not cover it.
The new functions:
loghistplot &amp;lt;- function(data) { names(data) &amp;lt;- c(&amp;#39;x&amp;#39;,&amp;#39;y&amp;#39;) # rename columns # get min and max axis values min_x &amp;lt;- min(data$x) max_x &amp;lt;- max(data$x) min_y &amp;lt;- min(data$y) max_y &amp;lt;- max(data$y) # get bin numbers bin_no &amp;lt;- max(hist(data$x, plot = FALSE)$counts) + 5 # create plots a &amp;lt;- ggplot(data, aes(x = x, y = y)) + theme_bw(base_size=16) + geom_smooth(method = &amp;#34;glm&amp;#34;, family = &amp;#34;binomial&amp;#34;, se = TRUE, colour=&amp;#39;black&amp;#39;, size=1.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>Someone asked about plotting something like this today</p>
<p>I <a href="/posts/2012-01-10-logistic-regression-barplot-fig/">wrote a few functions previously</a> to do something like this. However, since then <code>ggplot2</code> has changed, and one of the functions no longer works.</p>
<p>Hence, I fixed <code>opts()</code> to <code>theme()</code>, <code>theme_blank()</code> to <code>element_blank()</code>, and <code>panel.background = element_blank()</code> to <code>plot.background = element_blank()</code> to get the histograms to show up with the line plot and not cover it.</p>
<p>The new functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>loghistplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get bin numbers</span>
</span></span><span style="display:flex;"><span>  bin_no <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">hist</span>(data<span style="color:#f92672">$</span>x, plot <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)<span style="color:#f92672">$</span>counts) <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  theme_loghist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>())
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  b <span style="color:#f92672">&lt;-</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[1], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>,bin_no)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    theme_loghist <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[2], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(trans<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reverse&#39;</span>, limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(bin_no,<span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    theme_loghist <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">grid.newpage</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pushViewport</span>(<span style="color:#a6e22e">viewport</span>(layout <span style="color:#f92672">=</span> <span style="color:#a6e22e">grid.layout</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  vpa_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpb_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpc_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(b, vp <span style="color:#f92672">=</span> vpb_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(c, vp <span style="color:#f92672">=</span> vpc_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(a, vp <span style="color:#f92672">=</span> vpa_)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>logpointplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, position <span style="color:#f92672">=</span> <span style="color:#a6e22e">position_jitter</span>(w<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, h<span style="color:#f92672">=</span><span style="color:#ae81ff">0.02</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Install <code>ggplot2</code> and <code>gridExtra</code> if you don&rsquo;t have them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>,<span style="color:#e6db74">&#34;gridExtra&#34;</span>), repos <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://cran.rstudio.com&#34;</span>)
</span></span></code></pre></div><p>And their use:</p>
<p><strong>Logistic histogram plots</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(data<span style="color:#f92672">=</span>mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-5.png" alt="plot of chunk unnamed-chunk-5"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-6.png" alt="plot of chunk unnamed-chunk-6"  />
</p>
<p><strong>Logistic point plots</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(data<span style="color:#f92672">=</span>mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-7.png" alt="plot of chunk unnamed-chunk-7"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-8.png" alt="plot of chunk unnamed-chunk-8"  />
</p>
]]></content:encoded>
    </item>
    <item>
      <title>R ecology workshop</title>
      <link>http://localhost:1313/2013/07/r-ecology-workshop/</link>
      <pubDate>Wed, 31 Jul 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/07/r-ecology-workshop/</guid>
      <description>After my presentation yesterday to a group of grad students on R resources, I did a presentation today on intro to R data manipulation, visualizations, and analyses/visualizations of biparite networks and community level analyses (diversity, rarefaction, ordination, etc.). As I said yesterday I&amp;rsquo;ve been playing with two ways to make reproducible presentations in R: RStudio&amp;rsquo;s presentations built in to RStudio IDE, and Slidify. Yesterday I went with RStudio&amp;rsquo;s product - today I used Slidify.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>After <a href="http://sckott.github.io/2013/07/r-resources/">my presentation yesterday</a> to a group of grad students on R resources, I did a presentation today on intro to R data manipulation, visualizations, and analyses/visualizations of biparite networks and community level analyses (diversity, rarefaction, ordination, etc.). As I said <a href="http://sckott.github.io/2013/07/r-resources/">yesterday</a> I&rsquo;ve been playing with two ways to make reproducible presentations in R: <a href="http://www.rstudio.com/ide/docs/presentations/overview">RStudio&rsquo;s presentations</a> built in to RStudio IDE, and <a href="http://slidify.org/">Slidify</a>. Yesterday I went with RStudio&rsquo;s product - today I used Slidify. See the Markdown file for the presentation <a href="https://github.com/sckott/posterstalks/blob/gh-pages/sfu/resources/r_resources.Rpres">here</a>.</p>
<p>Check out the presentation slides <a href="https://bitly.com/sfuworkshop">here</a>, and if you want, fork <a href="http://bit.ly/1bKVX2O">the code on Github</a>, change it, submit changes back to me, etc. (click on the image to go to slides)</p>
<p>How I actually ran the 2 hr workshop was to present a few slides, then live demo writing the code out with students following along, with a number of times where they do something on their own.</p>
<p><a href="https://bitly.com/sfuworkshop"><img loading="lazy" src="/pres.png" alt=""  />
</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>ggplot2 maps with insets</title>
      <link>http://localhost:1313/2012/08/ggplot-inset-map/</link>
      <pubDate>Wed, 22 Aug 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/08/ggplot-inset-map/</guid>
      <description>UPDATE: changed data source so that the entire example can be run by anyone on their own machine. Also, per Joachim&amp;rsquo;s suggestion, I put a box around the blown up area of the map. In addition, rgeos and maptools removed, not needed.
Here&amp;rsquo;s a quick demo of creating a map with an inset within it using ggplot. The inset is achieved using the gridExtra package.
Install libraries install.packages(c(&amp;#34;ggplot2&amp;#34;, &amp;#34;maps&amp;#34;, &amp;#34;grid&amp;#34;, &amp;#34;gridExtra&amp;#34;)) library(&amp;#34;ggplot2&amp;#34;) library(&amp;#34;maps&amp;#34;) library(&amp;#34;grid&amp;#34;) library(&amp;#34;gridExtra&amp;#34;) Create a data frame dat &amp;lt;- data.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<blockquote>
<p>UPDATE: changed data source so that the entire example can be run by anyone on their own machine. Also, per Joachim&rsquo;s suggestion, I put a box around the blown up area of the map. In addition, rgeos and maptools removed, not needed.</p>
</blockquote>
<p>Here&rsquo;s a quick demo of creating a map with an inset within it using ggplot. The inset is achieved using the <code>gridExtra</code> package.</p>
<h3 id="install-libraries">Install libraries</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>, <span style="color:#e6db74">&#34;maps&#34;</span>, <span style="color:#e6db74">&#34;grid&#34;</span>, <span style="color:#e6db74">&#34;gridExtra&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;maps&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;grid&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;gridExtra&#34;</span>)
</span></span></code></pre></div><h3 id="create-a-data-frame">Create a data frame</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(ecosystem <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;oak&#34;</span>, <span style="color:#e6db74">&#34;steppe&#34;</span>, <span style="color:#e6db74">&#34;prairie&#34;</span>), each <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>),
</span></span><span style="display:flex;"><span>    lat <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">24</span>, mean <span style="color:#f92672">=</span> <span style="color:#ae81ff">51</span>, sd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>), lon <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">24</span>, mean <span style="color:#f92672">=</span> <span style="color:#ae81ff">-113</span>, sd <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(dat)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   ecosystem      lat       lon</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1       oak 49.58285 -107.6930</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       oak 52.58942 -116.6920</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3       oak 50.49277 -114.5542</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4       oak 50.05943 -116.5660</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5       oak 51.76492 -112.1457</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6       oak 52.82153 -112.8858</span>
</span></span></code></pre></div><h3 id="get-maps-using-the-maps-library">Get maps using the maps library</h3>
<p>Get a map of Canada</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>canadamap <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(<span style="color:#a6e22e">map</span>(<span style="color:#e6db74">&#34;world&#34;</span>, <span style="color:#e6db74">&#34;Canada&#34;</span>, plot <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)<span style="color:#a6e22e">[c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>)])
</span></span></code></pre></div><p>Get a map of smaller extent</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>canadamapsmall <span style="color:#f92672">&lt;-</span> canadamap[canadamap<span style="color:#f92672">$</span>x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">-90</span> <span style="color:#f92672">&amp;</span> canadamap<span style="color:#f92672">$</span>y <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">54</span>, ]
</span></span><span style="display:flex;"><span>canadamapsmall_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">na.omit</span>(canadamapsmall)
</span></span></code></pre></div><p>This should get your corner points for the box, picking min and max of lat and lon</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(insetrect <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(xmin <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>(canadamapsmall_<span style="color:#f92672">$</span>x), xmax <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(canadamapsmall_<span style="color:#f92672">$</span>x),
</span></span><span style="display:flex;"><span>    ymin <span style="color:#f92672">=</span> <span style="color:#a6e22e">min</span>(canadamapsmall_<span style="color:#f92672">$</span>y), ymax <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(canadamapsmall_<span style="color:#f92672">$</span>y)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;        xmin      xmax     ymin     ymax</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 -133.0975 -90.38942 48.04721 53.99915</span>
</span></span></code></pre></div><h3 id="make-the-maps">Make the maps</h3>
<p>Create a theme to be used by both plots</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>ptheme <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>  panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;black&#39;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, linetype <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>),
</span></span><span style="display:flex;"><span>  panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>  panel.grid.minor <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>  panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;white&#39;</span>),
</span></span><span style="display:flex;"><span>  legend.key <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><p>The inset map, all of Canada</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(canadamap) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">theme_bw</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">22</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">geom_path</span>(data <span style="color:#f92672">=</span> canadamap, <span style="color:#a6e22e">aes</span>(x, y), colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>, fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">geom_rect</span>(data <span style="color:#f92672">=</span> insetrect, <span style="color:#a6e22e">aes</span>(xmin <span style="color:#f92672">=</span> xmin, xmax <span style="color:#f92672">=</span> xmax, ymin <span style="color:#f92672">=</span> ymin, ymax <span style="color:#f92672">=</span> ymax), alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;blue&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, linetype <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  ptheme <span style="color:#f92672">%+%</span> <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    legend.position <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0.15</span>, <span style="color:#ae81ff">0.80</span>),
</span></span><span style="display:flex;"><span>    axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(), 
</span></span><span style="display:flex;"><span>    axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>    axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">labs</span>(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>)
</span></span></code></pre></div><p>The larger map, zoomed in, with the data</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(dat, <span style="color:#a6e22e">aes</span>(lon, lat, colour <span style="color:#f92672">=</span> ecosystem)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">theme_bw</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">22</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">geom_jitter</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.6</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">geom_path</span>(data <span style="color:#f92672">=</span> canadamapsmall, <span style="color:#a6e22e">aes</span>(x, y), colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>, fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">scale_size</span>(guide <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;none&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  ptheme <span style="color:#f92672">%+%</span> <span style="color:#a6e22e">theme</span>(
</span></span><span style="display:flex;"><span>    legend.position <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">0.20</span>),
</span></span><span style="display:flex;"><span>    legend.text <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;bold&#39;</span>),
</span></span><span style="display:flex;"><span>    legend.title <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_text</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>, face <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;bold&#39;</span>), 
</span></span><span style="display:flex;"><span>    axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_line</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>  ) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">labs</span>(x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>, y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>)
</span></span></code></pre></div><h3 id="print-maps">Print maps</h3>
<p>One an inset of the other. This approach uses the <code>gridExtra</code> package for flexible alignment, etc. of ggplot graphs.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">grid.newpage</span>()
</span></span><span style="display:flex;"><span>vpb_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)  <span style="color:#75715e"># the larger map</span>
</span></span><span style="display:flex;"><span>vpa_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.4</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.4</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span>)  <span style="color:#75715e"># the inset in upper right</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">print</span>(b, vp <span style="color:#f92672">=</span> vpb_)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">print</span>(a, vp <span style="color:#f92672">=</span> vpa_)
</span></span></code></pre></div><p><img loading="lazy" src="/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11"  />
</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>, and nice knitr highlighting/etc. in in <a href="http://rstudio.org/">RStudio</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Visualize your Github stats (forks and watchers) in a browser with R!</title>
      <link>http://localhost:1313/2012/05/opencpu-github-stats/</link>
      <pubDate>Sat, 05 May 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/05/opencpu-github-stats/</guid>
      <description>So OpenCPU is pretty awesome. You can run R in a browser using URL calls with an alphanumeric code (e.g., x3e50ee0780) defining a stored function, and any arguments you pass to it.
Go here to store a function. And you can output lots of different types of things: png, pdf, json, etc - see here.
Here&amp;rsquo;s a function I created (originally from https://gist.github.com/2602432):
# Store a function with man lines # Go Here: http://beta.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>So <a href="http://opencpu.org/">OpenCPU</a> is pretty awesome.  You can run R in a browser using URL calls with an alphanumeric code (e.g., x3e50ee0780) defining a stored function, and any arguments you pass to it.</p>
<p>Go <a href="http://beta.opencpu.org/apps/opencpu.demo/storefunction/">here</a> to store a function.  And you can output lots of different types of things: png, pdf, json, etc - see <a href="http://opencpu.org/documentation/outputs/">here</a>.</p>
<p>Here&rsquo;s a function I created (originally from <a href="https://gist.github.com/2602432">https://gist.github.com/2602432</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Store a function with man lines</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Go Here: http://beta.opencpu.org/apps/opencpu.demo/storefunction/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># number: x3e50ee0780</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># link: http://beta.opencpu.org/R/call/store:tmp/x3e50ee0780/png?id=&#39;ropensci&#39;&amp;type=&#39;org&#39;</span>
</span></span><span style="display:flex;"><span>the <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span> (id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hadley&#39;</span>, type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;user&#39;</span>) 
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">require</span>(RCurl); <span style="color:#a6e22e">require</span>(RJSONIO); <span style="color:#a6e22e">require</span>(ggplot2); <span style="color:#a6e22e">require</span>(reshape2); <span style="color:#a6e22e">require</span>(plyr)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(type <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;user&#39;</span>){ url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.github.com/users/&#34;</span> } <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(type <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;org&#39;</span>){ url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://api.github.com/orgs/&#34;</span> } <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">stop</span>(<span style="color:#e6db74">&#34;parameter &#39;type&#39; has to be either &#39;user&#39; or &#39;org&#39; &#34;</span>)
</span></span><span style="display:flex;"><span>  url2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste</span>(url, id, <span style="color:#e6db74">&#34;/repos?per_page=100&#34;</span>, sep <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>  xx <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">getURL</span>(url2)
</span></span><span style="display:flex;"><span>  tt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fromJSON</span>(xx)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">length</span>(tt) <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) { tt <span style="color:#f92672">&lt;-</span> tt } <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">stop</span>(<span style="color:#e6db74">&#34;user or organization not found - search GitHub? - https://github.com/&#34;</span>) }   
</span></span><span style="display:flex;"><span>  out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(tt, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">t</span>(<span style="color:#a6e22e">c</span>(x<span style="color:#f92672">$</span>name, x<span style="color:#f92672">$</span>forks, x<span style="color:#f92672">$</span>watchers)))
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(out) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Repo&#34;</span>, <span style="color:#e6db74">&#34;Forks&#34;</span>, <span style="color:#e6db74">&#34;Watchers&#34;</span>)
</span></span><span style="display:flex;"><span>  out<span style="color:#f92672">$</span>Forks <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.integer</span>(out<span style="color:#f92672">$</span>Forks)
</span></span><span style="display:flex;"><span>  out<span style="color:#f92672">$</span>Watchers <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.integer</span>(out<span style="color:#f92672">$</span>Watcher)
</span></span><span style="display:flex;"><span>  out2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">melt</span>(out, id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>  out2<span style="color:#f92672">$</span>value <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(out2<span style="color:#f92672">$</span>value)
</span></span><span style="display:flex;"><span>  out2<span style="color:#f92672">$</span>Repo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.factor</span>(out2<span style="color:#f92672">$</span>Repo)
</span></span><span style="display:flex;"><span>  repoorder <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unique</span>(out2<span style="color:#a6e22e">[order</span>(out2<span style="color:#f92672">$</span>value, decreasing<span style="color:#f92672">=</span><span style="color:#66d9ef">FALSE</span>),][,<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>  out2<span style="color:#f92672">$</span>Repo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">factor</span>(out2<span style="color:#f92672">$</span>Repo, levels <span style="color:#f92672">=</span> repoorder)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(out2, <span style="color:#a6e22e">aes</span>(Repo, value)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_bar</span>() <span style="color:#f92672">+</span> <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span>variable) <span style="color:#f92672">+</span> <span style="color:#a6e22e">theme_bw</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>() <span style="color:#75715e"># default for hadley</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>(id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;defunkt&#39;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#75715e"># works - a user with even more repos than Hadley</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>(id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ropensci&#39;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;org&#39;</span>) <span style="color:#75715e"># works - organization example</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>(id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;jeroenooms&#39;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#75715e"># works - organization example</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>(id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;SChamberlain&#39;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;org&#39;</span>) <span style="color:#75715e"># error message - mismatch of username with org type</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">the</span>(id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;adsff&#39;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#75715e"># error message - name does not exist</span>
</span></span></code></pre></div><p>It makes a <a href="http://had.co.nz/ggplot2/">ggplot2</a> graphic of your watchers and forks on each repo (up to 100 repos), sorted by descending number of forks/watchers.</p>
<p>Here&rsquo;s an example from the function.  Paste the following in to your browser and you should get the below figure.</p>
<p><a href="http://beta.opencpu.org/R/call/opencpu.demo/gitstats/png">http://beta.opencpu.org/R/call/opencpu.demo/gitstats/png</a></p>
<p><img loading="lazy" src="/hadley.png" alt="had"  />
</p>
<p>And you can specify user or organization name using arguments in the URL</p>
<p><a href="http://beta.opencpu.org/R/call/opencpu.demo/gitstats/png?type='org'&amp;id='ropensci'">http://beta.opencpu.org/R/call/opencpu.demo/gitstats/png?type='org'&amp;id='ropensci'</a></p>
<p><img loading="lazy" src="/ropensci.png" alt="ropensci"  />
</p>
<p>Sweet. Have fun.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Presenting results of logistic regression</title>
      <link>http://localhost:1313/2012/01/logistic-regression-barplot-fig/</link>
      <pubDate>Tue, 10 Jan 2012 07:50:00 -0600</pubDate>
      <guid>http://localhost:1313/2012/01/logistic-regression-barplot-fig/</guid>
      <description>So my advisor pointed out this &amp;rsquo;new&amp;rsquo; (well, 2004), way of plotting results of logistic regression results. The idea was presented in a 2004 Bulletin of the Ecological Society of America issue (here). I tried to come up with a solution using, what else, ggplot2. I don&amp;rsquo;t have it quite all the way down - I am missing the second y-axis values for the histograms, but someone smarter than me can figure that part out (note that Hadley doesn&amp;rsquo;t want to support second y-axes in ggplot2, but they can probably be hacked on).</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>So my advisor pointed out this &rsquo;new&rsquo; (well, 2004), way of plotting results of logistic regression results.  The idea was presented in a 2004 Bulletin of the Ecological Society of America issue (<a href="http://esapubs.org/bulletin/backissues/085-3/bulletinjuly2004_2column.htm#tools1">here</a>).  I tried to come up with a  solution using, what else, ggplot2.  I don&rsquo;t have it quite all the way down - I am missing the second y-axis values for the histograms, but someone smarter than me can figure that part out (note that Hadley doesn&rsquo;t want to support second y-axes in ggplot2, but they can probably be hacked on).</p>
<p>Here&rsquo;s the code (originally was in <a href="https://gist.github.com/1589136">https://gist.github.com/1589136</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Define the function</span>
</span></span><span style="display:flex;"><span>loghistplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">require</span>(ggplot2); <span style="color:#a6e22e">require</span>(gridExtra) <span style="color:#75715e"># load packages</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get bin numbers</span>
</span></span><span style="display:flex;"><span>  bin_no <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">hist</span>(data<span style="color:#f92672">$</span>x)<span style="color:#f92672">$</span>counts) <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">#     scale_y_continuous(limits=c(0,1), breaks=c(0,1)) +</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">opts</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[1], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>,bin_no)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">opts</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[2], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(trans<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reverse&#39;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(trans<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reverse&#39;</span>, limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(bin_no,<span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">opts</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(), axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">grid.newpage</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pushViewport</span>(<span style="color:#a6e22e">viewport</span>(layout <span style="color:#f92672">=</span> <span style="color:#a6e22e">grid.layout</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)))
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  vpa_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpb_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpc_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(b, vp <span style="color:#f92672">=</span> vpb_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(c, vp <span style="color:#f92672">=</span> vpc_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(a, vp <span style="color:#f92672">=</span> vpa_)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Examples</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># loghistplot(mtcars[,c(&#34;mpg&#34;,&#34;vs&#34;)])</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># loghistplot(movies[,c(&#34;rating&#34;,&#34;Action&#34;)])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>logpointplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">require</span>(ggplot2); <span style="color:#a6e22e">require</span>(gridExtra) <span style="color:#75715e"># load packages</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, position <span style="color:#f92672">=</span> <span style="color:#a6e22e">position_jitter</span>(w<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, h<span style="color:#f92672">=</span><span style="color:#ae81ff">0.02</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">opts</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">theme_blank</span>(),
</span></span><span style="display:flex;"><span>         panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">theme_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Examples</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># logpointplot(mtcars[,c(&#34;mpg&#34;,&#34;vs&#34;)])</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># logpointplot(movies[,c(&#34;rating&#34;,&#34;Action&#34;)])</span>
</span></span></code></pre></div><p>Here&rsquo;s a few examples using datasets provided with the ggplot2 package:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/mtcarsplot.png" alt="mtcars plot"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/moviesplot.png" alt="movies plot"  />
</p>
<p>And two examples of the logpointplot function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">logpointplot</span>(mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/logpointplot1.png" alt="mtcars point plot"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">logpointplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/logpointplot2.png" alt="movies point plot"  />
</p>
]]></content:encoded>
    </item>
    <item>
      <title>Weecology can has new mammal dataset</title>
      <link>http://localhost:1313/2011/12/weecology-can-has-new-mammal-dataset/</link>
      <pubDate>Thu, 29 Dec 2011 08:11:00 -0600</pubDate>
      <guid>http://localhost:1313/2011/12/weecology-can-has-new-mammal-dataset/</guid>
      <description>So the Weecology folks have published a large dataset on mammal communities in a data paper in Ecology. I know nothing about mammal communities, but that doesn&amp;rsquo;t mean one can&amp;rsquo;t play with the data&amp;hellip;
Their dataset consists of five csv files: communities, references, sites, species, and trapping data Where are these sites, and by the way, do they vary much in altitude? Let&amp;rsquo;s zoom in on just the states What phylogenies can we get for the species in this dataset?</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>So the <a href="http://weecology.org/">Weecology</a> folks have published a large dataset on mammal communities in a data paper in <a href="http://www.esajournals.org/doi/abs/10.1890/11-0262.1">Ecology</a>. I know nothing about mammal communities, but that doesn&rsquo;t mean one can&rsquo;t play with the data&hellip;</p>
<h3 id="their-dataset-consists-of-five-csv-files">Their dataset consists of five csv files:</h3>
<ul>
<li>communities,</li>
<li>references,</li>
<li>sites,</li>
<li>species, and</li>
<li>trapping data</li>
</ul>
<h3 id="where-are-these-sites-and-by-the-way-do-they-vary-much-in-altitude">Where are these sites, and by the way, do they vary much in altitude?</h3>
<p><img loading="lazy" src="http://3.bp.blogspot.com/-BKqBoPCDA_A/Tvx9nLbMlkI/AAAAAAAAFPA/9_pG_Ihx33I/s1600/usmap.png" alt=""  />
</p>
<p><img loading="lazy" src="http://1.bp.blogspot.com/-KkU_EcX8-EY/Tvx9n7hiP9I/AAAAAAAAFPI/7LoV0IjRiAM/s1600/worldmap.png%22" alt=""  />
</p>
<h3 id="lets-zoom-in-on-just-the-states">Let&rsquo;s zoom in on just the states</h3>
<p><img loading="lazy" src="http://3.bp.blogspot.com/-BKqBoPCDA_A/Tvx9nLbMlkI/AAAAAAAAFPA/9_pG_Ihx33I/s1600/usmap.png%22" alt=""  />
</p>
<h3 id="what-phylogenies-can-we-get-for-the-species-in-this-dataset">What phylogenies can we get for the species in this dataset?</h3>
<p>We can use the <a href="http://cran.r-project.org/web/packages/treebase/">rOpenSci package treebase</a> to search the online phylogeny repository <a href="http://www.treebase.org/treebase-web/home.html">TreeBASE</a>. Limiting to returning a max of 1 tree (to save time), we can see that X species are in at least 1 tree on the TreeBASE database. Nice.</p>
<p>So there are 321 species in the database with at least 1 tree in the TreeBASE database. Of course there could be many more, but we limited results from TreeBASE to just 1 tree per query.</p>
<h3 id="heres-the-code">Here&rsquo;s the code:</h3>

<script src="https://gist.github.com/1534730.js?file=mammaldataset.R"></script>

]]></content:encoded>
    </item>
    <item>
      <title>Recology is 1 yr old</title>
      <link>http://localhost:1313/2011/12/recology-is-1-yr-old/</link>
      <pubDate>Fri, 23 Dec 2011 18:52:00 -0600</pubDate>
      <guid>http://localhost:1313/2011/12/recology-is-1-yr-old/</guid>
      <description>This blog has lasted a whole year already. Thanks for reading and commenting.
There are a couple of announcements: Less blogging: I hope to put in many more years blogging here, but in full disclosure I am blogging for Journal of Ecology now, so I am going to be (and already have been) blogging less here. More blogging: If anyone wants to write guest posts at Recology on the topics of using R for ecology and evolution, or open science, please contact me.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>This blog has lasted a whole year already. Thanks for reading and commenting.</p>
<h3 id="there-are-a-couple-of-announcements">There are a couple of announcements:</h3>
<ol>
<li>Less blogging: I hope to put in many more years blogging here, but in full disclosure <a href="http://jecologyblog.wordpress.com/">I am blogging for Journal of Ecology</a> now, so I am going to be (and already have been) blogging less here.</li>
<li>More blogging: If anyone wants to write guest posts at Recology on the topics of using R for ecology and evolution, or open science, please contact me.</li>
<li>Different blogging: I was going to roll out the new dynamic views for this blog, but Google doesn&rsquo;t allow javascript, which is how I include code using GitHub gists. Oh well&hellip;</li>
</ol>
<p>Anywho, here is the breakdown of visits to this blog, visualized using #ggplot2, of course. There were a total of about 23,000 pageviews in the first year of this blog.</p>
<p>Here is the pie chart code I used:</p>

<script src="https://gist.github.com/1515754.js?file=piechart.R"></script> 

<p>Visits to top ten posts:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7158/6613213609_e491cd6f95_d.jpg" alt=""  />
</p>
<p>Visits by by pages:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7033/6613216069_6c7b0d2aca_d.jpg" alt=""  />
</p>
<p>Visits by top referring sites:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7008/6613217859_a03bcfee3e_d.jpg" alt=""  />
</p>
<p>Visits by country:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7027/6613219049_97cf21a84e_d.jpg" alt=""  />
</p>
<p>Visits by browsers:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7147/6613232905_5a98d82f87_d.jpg" alt=""  />
</p>
<p>Visits by operating system:</p>
<p><img loading="lazy" src="http://farm8.staticflickr.com/7005/6613236311_7cab55afd6_d.jpg" alt=""  />
</p>
]]></content:encoded>
    </item>
    <item>
      <title>I Work For The Internet !</title>
      <link>http://localhost:1313/2011/12/i-work-for-internet/</link>
      <pubDate>Tue, 13 Dec 2011 09:35:00 -0600</pubDate>
      <guid>http://localhost:1313/2011/12/i-work-for-internet/</guid>
      <description>UPDATE: code and figure updated at 647 AM CST on 19 Dec &amp;lsquo;11. Also, see Jarrett Byrnes (improved) fork of my gist here.
The site I WORK FOR THE INTERNET is collecting pictures and first names (last name initials only) to show collective support against SOPA (the Stop Online Piracy Act). Please stop by their site and add your name/picture.
I used the #rstats package twitteR, created by Jeff Gentry, to search for tweets from people signing this site with their picture, then plotted using ggplot2, and also used Hadley&amp;rsquo;s lubridate to round timestamps on tweets to be able to bin tweets in to time slots for plotting.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>UPDATE: code and figure updated at 647 AM CST on 19 Dec &lsquo;11. Also, see Jarrett Byrnes (improved) fork of my gist <a href="https://gist.github.com/1474802">here</a>.</p>
<p>The site <a href="http://iworkfortheinternet.org/">I WORK FOR THE INTERNET</a> is collecting pictures and first names (last name initials only) to show collective support against SOPA (the Stop Online Piracy Act). Please stop by their site and add your name/picture.</p>
<p>I used the #rstats package twitteR, created by Jeff Gentry, to search for tweets from people signing this site with their picture, then plotted using ggplot2, and also used Hadley&rsquo;s lubridate to round timestamps on tweets to be able to bin tweets in to time slots for plotting.</p>
<p>Tweets containing the phrase &lsquo;I work for the internet&rsquo; by time:</p>
<p><img loading="lazy" src="http://1.bp.blogspot.com/-KALUtp3xQ_Q/Tu8ya0ZX0GI/AAAAAAAAFNM/JGVLj1qSRYs/s1600/Rplot01.png" alt=""  />
</p>
<p>Here&rsquo;s the code as a GitHub gist. Sometimes the searchTwitter fxn doesn&rsquo;t returns an error, which I don&rsquo;t understand, but you can play with it:</p>

<script src="https://gist.github.com/1472619.js?file=iworkfortheinternet.R"></script>

]]></content:encoded>
    </item>
    <item>
      <title>My talk on doing phylogenetics in R</title>
      <link>http://localhost:1313/2011/11/my-talk-on-doing-phylogenetics-in-r/</link>
      <pubDate>Fri, 18 Nov 2011 13:15:00 -0600</pubDate>
      <guid>http://localhost:1313/2011/11/my-talk-on-doing-phylogenetics-in-r/</guid>
      <description>I gave a talk today on doing very basic phylogenetics in R, including getting sequence data, aligning sequence data, plotting trees, doing trait evolution stuff, etc.
Please comment if you have code for doing bayesian phylogenetic inference in R. I know phyloch has function mrbayes, but can&amp;rsquo;t get it to work&amp;hellip;
Phylogenetics in R View more presentations from schamber </description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>I gave a talk today on doing very basic phylogenetics in R, including getting sequence data, aligning sequence data, plotting trees, doing trait evolution stuff, etc.</p>
<p>Please comment if you have code for doing bayesian phylogenetic inference in R.  I know phyloch has function mrbayes, but can&rsquo;t get it to work&hellip;</p>

<div id="__ss_10222772" style="width: 425px;"><strong style="display: block; margin: 12px 0 4px;"><a href="http://www.slideshare.net/schamber/phylogenetics-in-r" target="_blank" title="Phylogenetics in R">Phylogenetics in R</a></strong> <iframe frameborder="0" height="355" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/10222772" width="425"></iframe> <br /><div style="padding: 5px 0 12px;">View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/schamber" target="_blank">schamber</a> </div></div>

]]></content:encoded>
    </item>
    <item>
      <title>My little presentation on getting web data through R</title>
      <link>http://localhost:1313/2011/10/my-little-presentation-on-getting-web/</link>
      <pubDate>Fri, 28 Oct 2011 11:16:00 -0500</pubDate>
      <guid>http://localhost:1313/2011/10/my-little-presentation-on-getting-web/</guid>
      <description> With examples from rOpenSci R packages.&amp;nbsp;p.s. I am no expert at this...
Web data from R View more presentations from schamber </description><content:encoded><![CDATA[ ]]>
               <![CDATA[
<div id="__ss_9926321" style="width: 425px;"><span style="display: block; margin: 12px 0 4px;">With examples from <a href="http://ropensci.org/">rOpenSci</a> R packages.&nbsp;</span><span style="display: block; margin: 12px 0 4px;">p.s. I am no expert at this...</span><strong style="display: block; margin: 12px 0 4px;"><br /></strong><strong style="display: block; margin: 12px 0 4px;"><a href="http://www.slideshare.net/schamber/web-data-from-r" target="_blank" title="Web data from R">Web data from R</a></strong> <iframe frameborder="0" height="355" marginheight="0" marginwidth="0" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/9926321" width="425"></iframe> <br /><div style="padding: 5px 0 12px;">View more <a href="http://www.slideshare.net/" target="_blank">presentations</a> from <a href="http://www.slideshare.net/schamber" target="_blank">schamber</a> </div></div>

]]></content:encoded>
    </item>
  </channel>
</rss>
