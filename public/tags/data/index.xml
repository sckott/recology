<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Data on Recology</title>
    <link>http://localhost:1313/tags/data/</link>
    <description>Recent content in Data on Recology</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 12 Jun 2018 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/data/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Exploring specimen collections data in Butte County, California</title>
      <link>http://localhost:1313/2018/06/butte-county/</link>
      <pubDate>Tue, 12 Jun 2018 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2018/06/butte-county/</guid>
      <description>Why Butte County? I went to college at California State University, Chico - in Butte County, CA. I did a BA degree in Biology there. It was a great program as it was heavily focused on natural history - with classes on herps, birds, insects, fish, etc.
Specimen collections data Specimen collections data are increasingly being digitized, and often accessed via largeish platforms like GBIF and iDigBio. Here I&amp;rsquo;ll explore Butte County data found with iDigBio with the spocc R package.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<h1 id="why-butte-county">Why Butte County?</h1>
<p>I went to college at California State University, Chico - in Butte County, CA. I did a BA degree in Biology there. It was a great program as it was heavily focused on natural history - with classes on herps, birds, insects, fish, etc.</p>
<h1 id="specimen-collections-data">Specimen collections data</h1>
<p>Specimen collections data are increasingly being digitized, and often accessed via largeish platforms like GBIF and iDigBio. Here I&rsquo;ll explore Butte County data found with iDigBio with the <a href="https://github.org/ropensci/spocc">spocc</a> R package. You could also use the <a href="https://cran.r-project.org/web/packages/ridigbio/index.html">ridigbio</a> package to go directly to iDigBio data.</p>
<h1 id="get-some-data">Get some data</h1>
<p>Get county GeoJSON data using <a href="https://github.org/ropensci/jqr">jqr</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(jqr)
</span></span><span style="display:flex;"><span>butte <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">jq</span>(<span style="color:#a6e22e">url</span>(<span style="color:#e6db74">&#34;https://eric.clst.org/assets/wiki/uploads/Stuff/gz_2010_us_050_00_5m.json&#34;</span>), <span style="color:#e6db74">&#39;.features[] | select(.properties.NAME == &#34;Butte&#34; and .properties.STATE == &#34;06&#34;)&#39;</span>)
</span></span><span style="display:flex;"><span>mean_lon <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">mean</span>(<span style="color:#a6e22e">as.numeric</span>(<span style="color:#a6e22e">jq</span>(butte, <span style="color:#e6db74">&#34;.geometry.coordinates[][] | first&#34;</span>)))
</span></span><span style="display:flex;"><span>mean_lat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">mean</span>(<span style="color:#a6e22e">as.numeric</span>(<span style="color:#a6e22e">jq</span>(butte, <span style="color:#e6db74">&#34;.geometry.coordinates[][] | last&#34;</span>)))
</span></span></code></pre></div><p>Install <a href="https://github.org/ropensci/spocc">spocc</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">requireNamespace</span>(<span style="color:#e6db74">&#34;spocc&#34;</span>)) <span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;spocc&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(spocc)
</span></span></code></pre></div><p>Search for data in Butte County. First lets get a look at how many records there are:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>opts <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(rq <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>  stateprovince <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;California&#34;</span>,
</span></span><span style="display:flex;"><span>  county <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Butte&#34;</span>,
</span></span><span style="display:flex;"><span>  geopoint <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;exists&#34;</span>)
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">occ</span>(from <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;idigbio&#34;</span>, idigbioopts <span style="color:#f92672">=</span> opts, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>res<span style="color:#f92672">$</span>idigbio<span style="color:#f92672">$</span>meta<span style="color:#f92672">$</span>found
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 45075</span>
</span></span></code></pre></div><p>Looks like 45075 records found. Now let&rsquo;s get all those records</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">occ</span>(from <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;idigbio&#34;</span>, idigbioopts <span style="color:#f92672">=</span> opts, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">46000L</span>)
</span></span></code></pre></div><p>Make a map!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>idigbio<span style="color:#f92672">$</span>data<span style="color:#f92672">$</span>custom_query<span style="color:#f92672">$</span>name <span style="color:#f92672">&lt;-</span> res<span style="color:#f92672">$</span>idigbio<span style="color:#f92672">$</span>data<span style="color:#f92672">$</span>custom_query<span style="color:#f92672">$</span>name[1]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(mapr)
</span></span><span style="display:flex;"><span>mapr<span style="color:#f92672">::</span><span style="color:#a6e22e">map_leaflet</span>(res) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  leaflet<span style="color:#f92672">::</span><span style="color:#a6e22e">addGeoJSON</span>(butte) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  leaflet<span style="color:#f92672">::</span><span style="color:#a6e22e">setView</span>(mean_lon, mean_lat, <span style="color:#ae81ff">10</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2018-06-12-butte-county/map1.png" alt="map1"  />
</p>
<blockquote>
<p>note: there&rsquo;s definitely points that fall outside of Butte County, but we&rsquo;ll ignore those for simplicity sake</p>
</blockquote>
<p>What&rsquo;s the taxonomic breakdown like?</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(dplyr)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> res<span style="color:#f92672">$</span>idigbio<span style="color:#f92672">$</span>data<span style="color:#f92672">$</span><span style="color:#a6e22e">custom_query
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e"></span>(x <span style="color:#f92672">&lt;-</span> df <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">group_by</span>(class) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">summarise</span>(n <span style="color:#f92672">=</span> <span style="color:#a6e22e">n</span>()) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">arrange</span>(<span style="color:#a6e22e">desc</span>(n)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; # A tibble: 42 x 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    class              n</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    &lt;chr&gt;          &lt;int&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  1 magnoliopsida  25449</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  2 liliopsida      9174</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  3 &lt;NA&gt;            6355</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  4 insecta         1490</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  5 polypodiopsida   891</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  6 pinopsida        351</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  7 aves             283</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  8 bryopsida        255</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  9 lycopodiopsida   161</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 equisetopsida     99</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; # ... with 32 more rows</span>
</span></span></code></pre></div><p>Looks like the vast, vast majority are plants, and more specifically Magnoliopsida (56%). About 3% are insects; about 0.6% birds; 0.1% reptiles; and 0.11% mammals.</p>
<p>First, get Butte County data in a sp class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(sp)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>county <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">map_data</span>(<span style="color:#e6db74">&#34;county&#34;</span>)
</span></span><span style="display:flex;"><span>butte_co <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(county, region <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;california&#34;</span>, subregion <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;butte&#34;</span>)
</span></span><span style="display:flex;"><span>butte_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(butte_co[, <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)])), ID<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)))
</span></span></code></pre></div><p>Insects:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tmap)
</span></span><span style="display:flex;"><span>insects <span style="color:#f92672">&lt;-</span> df <span style="color:#f92672">%&gt;%</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">filter</span>(class <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;insecta&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">coordinates</span>(insects) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;longitude&#39;</span>, <span style="color:#e6db74">&#39;latitude&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tm_shape</span>(butte_poly) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_borders</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_shape</span>(insects) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_symbols</span>(col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>, border.col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2018-06-12-butte-county/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9"  />
</p>
<p>Birds:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>birds <span style="color:#f92672">&lt;-</span> df <span style="color:#f92672">%&gt;%</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">filter</span>(class <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;aves&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">coordinates</span>(birds) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;longitude&#39;</span>, <span style="color:#e6db74">&#39;latitude&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tm_shape</span>(butte_poly) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_borders</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_shape</span>(birds) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_symbols</span>(col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>, border.col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2018-06-12-butte-county/unnamed-chunk-10-1.png" alt="plot of chunk unnamed-chunk-10"  />
</p>
<p>Facet by taxonomic group</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(sp)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rgeos)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tmap)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get subset of data for particular classes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># this is a very large portion of the data</span>
</span></span><span style="display:flex;"><span>df_class_subset <span style="color:#f92672">&lt;-</span> df <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(class <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;magnoliopsida&#34;</span>, <span style="color:#e6db74">&#34;liliopsida&#34;</span>, <span style="color:#66d9ef">NA</span>, 
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;insecta&#34;</span>, <span style="color:#e6db74">&#34;pinopsida&#34;</span>, <span style="color:#e6db74">&#34;aves&#34;</span>, <span style="color:#e6db74">&#34;amphibia&#34;</span>, <span style="color:#e6db74">&#34;mammalia&#34;</span>, <span style="color:#e6db74">&#34;reptilia&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">coordinates</span>(df_class_subset) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;longitude&#39;</span>, <span style="color:#e6db74">&#39;latitude&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># get butte county data into a polygon</span>
</span></span><span style="display:flex;"><span>county <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">map_data</span>(<span style="color:#e6db74">&#34;county&#34;</span>)
</span></span><span style="display:flex;"><span>butte_co <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(county, region <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;california&#34;</span>, subregion <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;butte&#34;</span>)
</span></span><span style="display:flex;"><span>butte_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(butte_co[, <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>)])), ID<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># clip data to butte county</span>
</span></span><span style="display:flex;"><span>df_class_subset_clipped <span style="color:#f92672">&lt;-</span> raster<span style="color:#f92672">::</span><span style="color:#a6e22e">intersect</span>(df_class_subset, butte_poly)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tm_shape</span>(butte_poly) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_borders</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_shape</span>(df_class_subset_clipped) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_symbols</span>(col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span>, border.col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;white&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tm_facets</span>(by <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;class&#34;</span>, nrow <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, free.coords <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/2018-06-12-butte-county/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11"  />
</p>
<p>Collectors. Lowell Ahart is kind of a legend in Butte County, collecting plants like crazy. Let&rsquo;s see how many records he has</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;ahart&#34;</span>, collector, ignore.case <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; # A tibble: 15,864 x 83</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    associatedsequenc… barcodevalue basisofrecord   bed   canonicalname    </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    &lt;lgl&gt;              &lt;lgl&gt;        &lt;chr&gt;           &lt;lgl&gt; &lt;chr&gt;            </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  1 NA                 NA           preservedspeci… NA    isolepis setacea </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  2 NA                 NA           preservedspeci… NA    fallopia convolv…</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  3 NA                 NA           preservedspeci… NA    carex densa      </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  4 NA                 NA           preservedspeci… NA    datura wrightii  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  5 NA                 NA           preservedspeci… NA    hieracium argutum</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  6 NA                 NA           preservedspeci… NA    centunculus mini…</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  7 NA                 NA           preservedspeci… NA    dryopteris arguta</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  8 NA                 NA           preservedspeci… NA    epilobium cleist…</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  9 NA                 NA           preservedspeci… NA    psilocarphus ten…</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 NA                 NA           preservedspeci… NA    lycium barbarum  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; # ... with 15,854 more rows, and 78 more variables: catalognumber &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   class &lt;chr&gt;, collectioncode &lt;chr&gt;, collectionid &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   collectionname &lt;lgl&gt;, collector &lt;chr&gt;, commonname &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   commonnames &lt;list&gt;, continent &lt;chr&gt;, coordinateuncertainty &lt;dbl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   country &lt;chr&gt;, countrycode &lt;chr&gt;, county &lt;chr&gt;, datasetid &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   datecollected &lt;date&gt;, datemodified &lt;chr&gt;, dqs &lt;dbl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   earliestageorloweststage &lt;lgl&gt;, earliesteonorlowesteonothem &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   earliestepochorlowestseries &lt;chr&gt;, earliesteraorlowesterathem &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   earliestperiodorlowestsystem &lt;chr&gt;, etag &lt;chr&gt;, eventdate &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   family &lt;chr&gt;, fieldnumber &lt;chr&gt;, flags &lt;list&gt;, formation &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   genus &lt;chr&gt;, geologicalcontextid &lt;lgl&gt;, longitude &lt;dbl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   latitude &lt;dbl&gt;, group &lt;lgl&gt;, hasImage &lt;lgl&gt;, hasMedia &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   highertaxon &lt;chr&gt;, highestbiostratigraphiczone &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   individualcount &lt;int&gt;, infraspecificepithet &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   institutioncode &lt;chr&gt;, institutionid &lt;chr&gt;, institutionname &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   kingdom &lt;chr&gt;, latestageorhigheststage &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   latesteonorhighesteonothem &lt;lgl&gt;, latestepochorhighestseries &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   latesteraorhighesterathem &lt;lgl&gt;, latestperiodorhighestsystem &lt;lgl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   lithostratigraphicterms &lt;lgl&gt;, locality &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   lowestbiostratigraphiczone &lt;lgl&gt;, maxdepth &lt;lgl&gt;, maxelevation &lt;dbl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   mediarecords &lt;list&gt;, member &lt;lgl&gt;, mindepth &lt;lgl&gt;, minelevation &lt;dbl&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   municipality &lt;chr&gt;, occurrenceid &lt;chr&gt;, order &lt;chr&gt;, phylum &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   recordids &lt;list&gt;, recordnumber &lt;chr&gt;, recordset &lt;chr&gt;, name &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   specificepithet &lt;chr&gt;, startdayofyear &lt;int&gt;, stateprovince &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   taxonid &lt;chr&gt;, taxonomicstatus &lt;chr&gt;, taxonrank &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   typestatus &lt;chr&gt;, uuid &lt;chr&gt;, verbatimeventdate &lt;chr&gt;,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; #   verbatimlocality &lt;chr&gt;, version &lt;lgl&gt;, waterbody &lt;chr&gt;, prov &lt;chr&gt;</span>
</span></span></code></pre></div><p>Wow. That&rsquo;s a big portion of the total records in the county.</p>
<!-- raw HTML omitted -->
]]></content:encoded>
    </item>
    <item>
      <title>Metrics for open source projects</title>
      <link>http://localhost:1313/2015/10/open-source-metrics/</link>
      <pubDate>Mon, 19 Oct 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/10/open-source-metrics/</guid>
      <description>Measuring use of open source software isn&amp;rsquo;t always straightforward. The problem is especially acute for software targeted largely at academia, where usage is not measured just by software downloads, but also by citations.
Citations are a well-known pain point because the citation graph is privately held by iron doors (e.g., Scopus, Google Scholar). New ventures aim to open up citation data, but of course it&amp;rsquo;s an immense amount of work, and so does not come quickly.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>Measuring use of open source software isn&rsquo;t always straightforward. The problem is especially acute for software targeted largely at academia, where usage is not measured just by software downloads, but also by citations.</p>
<p>Citations are a well-known pain point because the citation graph is privately held by iron doors (e.g., <a href="https://www.scopus.com/">Scopus</a>, <a href="https://scholar.google.com/">Google Scholar</a>). New ventures aim to open up citation data, but of course it&rsquo;s an immense amount of work, and so does not come quickly.</p>
<p>The following is a laundry list of metrics on software of which I am aware, and some of which I use in our <a href="https://ropensci.github.io/biweekly/">rOpenSci twice monthly updates</a>.</p>
<p>I primarily develop software for the R language, so some of the metrics are specific to R, but many are not. In addition, we (rOpenSci) don&rsquo;t develop web apps, which may bring in an additional set of metrics not covered below.</p>
<p>I organize by source instead of type of data because some sources give multiple kinds of data - I note what kinds of data they give with <!-- raw HTML omitted -->labels<!-- raw HTML omitted -->.</p>
<h2 id="cran-downloads">CRAN downloads</h2>

<span class="label label-warning">downloads</span>

<ul>
<li>Link: <a href="https://github.com/metacran/cranlogs.app">https://github.com/metacran/cranlogs.app</a></li>
<li>This is a REST API for CRAN downloads from the RStudio CRAN CDN. Note however, that the RStudio CDN is only one of many - there are other mirrors users can insall packages from, and are not included in this count. However, a significant portion of downloads probably come from the RStudio CDN.</li>
<li>Other programming languages have similar support, e.g., <a href="https://guides.rubygems.org/rubygems-org-api/">Ruby</a> and <a href="https://github.com/npm/download-counts">Node</a>.</li>
</ul>
<h2 id="lagotto">Lagotto</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --> <!-- raw HTML omitted -->social-media<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://software.lagotto.io/works">https://software.lagotto.io/works</a></li>
<li>Lagotto is a Rails application, developed by <a href="https://github.com/mfenner">Martin Fenner</a>, originally designed to collect and provide article level metrics for scientific publications at Public Library of Science. It is now used by many publishers, and there are installations of Lagotto targeting <a href="https://mdc.lagotto.io/">datasets</a> and <a href="https://software.lagotto.io/works">software</a>.</li>
<li>Discussion forum: <a href="https://discuss.lagotto.io/">https://discuss.lagotto.io/</a></li>
</ul>
<h2 id="depsy">Depsy</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://depsy.org">https://depsy.org</a></li>
<li>This is a nascent venture by the <a href="https://impactstory.org/about">ImpactStory team</a> that seeks to uncover the impact of research software. As far as I can tell, they&rsquo;ll collect usage via software downloads and citations in the literature.</li>
</ul>
<h2 id="web-site-analytics">Web Site Analytics</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->page-views<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>If you happen to have a website for your project, collecting analytics is a way to gauge views of the landing page, and any help/tutorial pages you may have. A good easy way to do this is a deploy a basic site on your <code>gh-pages</code> branch of your GitHub repo, and use the easily integrated Google Analytics.</li>
<li>Whatever analytics you use, in my experience this mostly brings up links from google searches and blog posts that may mention your project</li>
<li>Google Analytics beacon (for README views): <a href="https://github.com/igrigorik/ga-beacon">https://github.com/igrigorik/ga-beacon</a>. I haven&rsquo;t tried this yet, but seems promising.</li>
</ul>
<h2 id="auomated-tracking-ssnmp">Auomated tracking: SSNMP</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --> <!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://scisoft-net-map.isri.cmu.edu">https://scisoft-net-map.isri.cmu.edu</a></li>
<li>Scientific Software Network Map Project</li>
<li>This is a cool NSF funded project by Chris Bogart that tracks software usage via GitHub and citations in literature.</li>
</ul>
<h2 id="google-scholar">Google Scholar</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->citations<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Link: <a href="https://scholar.google.com/">https://scholar.google.com/</a></li>
<li>Searching Google Scholar for software citations manually is fine at a small scale, but at a larger scale scraping is best. However, you&rsquo;re not legally supposed to do this, and Google will shut you down.</li>
<li>Could try using g-scholar alerts as well, especially if new citations of your work are infrequent.</li>
<li>If you have institutional access to Scopus/Web of Science, you could search those, but I don&rsquo;t push this as an option since it&rsquo;s available to so few.</li>
</ul>
<h2 id="github">GitHub</h2>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->github<!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<ul>
<li>Links: <a href="https://developer.github.com/v3/">https://developer.github.com/v3/</a></li>
<li>I keep a list of rOpenSci uses found in GitHub repos at <a href="https://discuss.ropensci.org/t/use-of-some-ropensci-packages-on-github/137">https://discuss.ropensci.org/t/use-of-some-ropensci-packages-on-github/137</a></li>
<li>GitHub does collect traffic data on each repo (clones, downloads, page views), but they are not exposed in the API. I&rsquo;ve bugged them a bit about this - hopefully we&rsquo;ll be able to get that dat in their API soon.</li>
<li>Bitbucket/Gitlab - don&rsquo;t use them, but I assume they also provide some metrics via their APIs</li>
</ul>
<h2 id="other">Other</h2>
<ul>
<li>Support forums: Whether you use UserVoice, Discourse, Google Groups, Gitter, etc., depending on your viewpoint, these interactions could be counted as metrics of software usage.</li>
<li>Emails: I personally get a lot of emails asking for help with software I maintain. I imagine this is true for most software developers. Counting these could be another metric of software usage, although I never have counted mine.</li>
<li>Social media: See Lagotto above, which tracks some social media outlets.</li>
<li>Code coverage: There are many options now for code coverage, integrated with each Travis-CI build. A good option is <a href="https://codecov.io">CodeCov</a>. CodeCov gives percentage test coverage, which one could use as one measure of code quality.</li>
<li>Reviews: There isn&rsquo;t a lot of code review going on that I&rsquo;m aware of. Even if there was, I suppose this would just be a logical TRUE/FALSE.</li>
<li>Cash money y&rsquo;all: Grants/consulting income/etc. could be counted as a metric.</li>
<li>Users: If you require users to create an account or similar before getting your software, you have a sense of number of users and perhaps their demographics.</li>
</ul>
<h2 id="promising">Promising</h2>
<p>Some software metrics things on the horizon that look interesting:</p>
<ul>
<li><a href="https://geodynamics.org/cig/projects/saga/">Software Attribution for Geoscience Applications</a> (SAGA)</li>
<li>Crossref: They have <a href="https://github.com/CrossRef/rest-api-doc/blob/master/rest_api.md">a very nice API</a>, but they don&rsquo;t yet provide citation counts - but <a href="https://github.com/CrossRef/rest-api-doc/issues/46">they may soon</a>.</li>
<li><a href="https://github.com/njsmith/sempervirens">njsmith/sempervirens</a> - a prototype for <em>gathering anonymous, opt-in usage data for open scientific software</em></li>
<li><a href="https://github.com/force11/force11-scwg">Force11 Software Citation Working Group</a> - <em>&hellip;produce a consolidated set of citation principles in order to encourage broad adoption of a consistent policy for software citation across disciplines and venues</em></li>
</ul>
<h2 id="missed">Missed?</h2>
<p>I&rsquo;m sure I missed things. Let me know.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Conditionality meta-analysis data</title>
      <link>http://localhost:1313/2014/10/conditionality-meta-analysis/</link>
      <pubDate>Mon, 06 Oct 2014 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2014/10/conditionality-meta-analysis/</guid>
      <description>The paper One paper from my graduate work asked most generally ~ &amp;ldquo;How much does the variation in magnitudes and signs of species interaction outcomes vary?&amp;rdquo;. More specifically, we wanted to know if variation differed among species interaction classes (mutualism, competition, predation), and among various &amp;ldquo;gradients&amp;rdquo; (space, time, etc.). To answer this question, we used a meta-analysis approach (rather than e.g., a field experiment). We published the paper recently.
p.s. I really really wish we would have put it in an open access journal&amp;hellip;</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<h2 id="the-paper">The paper</h2>
<p>One paper from my graduate work asked most generally ~ &ldquo;How much does the variation in magnitudes and signs of species interaction outcomes vary?&rdquo;. More specifically, we wanted to know if variation differed among species interaction classes (mutualism, competition, predation), and among various &ldquo;gradients&rdquo; (space, time, etc.). To answer this question, we used a meta-analysis approach (rather than e.g., a field experiment). We <a href="https://scottchamberlain.info/publications/">published the paper</a> recently.</p>
<blockquote>
<p>p.s. I really really wish we would have put it in an open access journal&hellip;</p>
</blockquote>
<h2 id="the-data">The data</h2>
<p>Anyway, I&rsquo;m here to talk about the <strong>data</strong>. We didn&rsquo;t get the data up with the paper, but it is <a href="https://figshare.com/articles/Conditionality_data/1097657">up on Figshare</a> now. The files there are the following:</p>
<ul>
<li><code>coniditionality.R</code> - script used to process the data from <code>variables_prelim.csv</code></li>
<li><code>variables_prelim.csv</code> - description of variables in the preliminary data set, matches <code>conditionality_data_prelim.csv</code></li>
<li><code>variables_used.csv</code> - description of variables in the used data set, matches <code>conditionality_data_used.csv</code></li>
<li><code>conditionality_data_prelim.csv</code> - preliminary data, the raw data</li>
<li><code>conditionality_data_used.csv</code> - the data used for our paper</li>
<li><code>README.md</code> - the readme</li>
<li><code>paper_selection.csv</code> - the list of papers we went through, with remarks about paper selection</li>
</ul>
<p>Please do play with the data, publish some papers, etc, etc. It took 6 of us about 4 years to collect this data; we skimmed through ~11,000 papers on the first pass (aka. skimming through abstracts in Google Scholar and Web of Science), then decided on nearly 500 papers to get data from, and narrowed down to 247 papers for the publication mentioned above. Now, there was no funding for this, so it was sort of done in between other projects, but still, it was simply <strong>A LOT</strong> of tables to digitize, and graphs to extract data points from. <strong>Anyway</strong>, hopefully you will find this data useful :p</p>
<h2 id="eml">EML</h2>
<p>I think this dataset would be a great introduction to the potential power of EML (<a href="https://knb.ecoinformatics.org/#external//emlparser/docs/index.html">Ecological Metadata Langauge</a>). At <a href="http://ropensci.org/">rOpenSci</a>, one of our team <a href="https://www.carlboettiger.info/">Carl Boettiger</a>, along with Claas-Thido Pfaff, Duncan Temple Lang, Karthik Ram, and Matt Jones, have created an R client for EML, to parse EML files and to create and publish them.</p>
<h2 id="what-is-emlwhy-eml">What is EML?/Why EML?</h2>
<p>A demonstration is in order&hellip;</p>
<h2 id="example-using-eml-with-this-dataset">Example using EML with this dataset</h2>
<h3 id="install-eml">Install EML</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;devtools&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;RHTMLForms&#34;</span>, repos <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://www.omegahat.org/R/&#34;</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;source&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/EML&#34;</span>, build<span style="color:#f92672">=</span><span style="color:#66d9ef">FALSE</span>, dependencies<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;DEPENDS&#34;</span>, <span style="color:#e6db74">&#34;IMPORTS&#34;</span>))
</span></span></code></pre></div><p>Load <code>EML</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;EML&#39;</span>)
</span></span></code></pre></div><h3 id="prepare-metadata">Prepare metadata</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># dataset</span>
</span></span><span style="display:flex;"><span>prelim_dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;conditionality_data_prelim.csv&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># variable descriptions for each column</span>
</span></span><span style="display:flex;"><span>prelim_vars <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;variables_prelim.csv&#34;</span>, stringsAsFactors <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span></code></pre></div><p>Get column definitions in a vector</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>col_defs <span style="color:#f92672">&lt;-</span> prelim_vars<span style="color:#f92672">$</span>description
</span></span></code></pre></div><p>Create unit definitions for each column</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>unit_defs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(unit <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;number&#34;</span>,
</span></span><span style="display:flex;"><span>    bounds <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">Inf</span>)),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(unit <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;number&#34;</span>,
</span></span><span style="display:flex;"><span>    bounds <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">Inf</span>)),
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;independent replicates&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(unit <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;number&#34;</span>,
</span></span><span style="display:flex;"><span>    bounds <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">Inf</span>)),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">...</span> <span style="color:#f92672">&lt;</span>CUTOFF<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h3 id="write-an-eml-file">Write an EML file</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">eml_write</span>(prelim_dat,
</span></span><span style="display:flex;"><span>          unit.defs <span style="color:#f92672">=</span> unit_defs,
</span></span><span style="display:flex;"><span>          col.defs <span style="color:#f92672">=</span> col_defs,
</span></span><span style="display:flex;"><span>          creator <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Scott Chamberlain&#34;</span>,
</span></span><span style="display:flex;"><span>          contact <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;myrmecocystus@gmail.com&#34;</span>,
</span></span><span style="display:flex;"><span>          file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;conditionality_data_prelim_eml.xml&#34;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## [1] &#34;conditionality_data_prelim_eml.xml&#34;
</code></pre><h3 id="validate-the-eml-file">Validate the EML file</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">eml_validate</span>(<span style="color:#e6db74">&#34;conditionality_data_prelim_eml.xml&#34;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## EML specific tests XML specific tests 
##               TRUE               TRUE
</code></pre><h3 id="read-data-and-metadata">Read data and metadata</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>gg <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eml_read</span>(<span style="color:#e6db74">&#34;conditionality_data_prelim_eml.xml&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">eml_get</span>(gg, <span style="color:#e6db74">&#34;contact&#34;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## [1] &#34;myrmecocystus@gmail.com&#34;
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">eml_get</span>(gg, <span style="color:#e6db74">&#34;citation_info&#34;</span>)
</span></span></code></pre></div><pre tabindex="0"><code>## Chamberlain S (2014-10-06). _metadata_.
</code></pre><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eml_get</span>(gg, <span style="color:#e6db74">&#34;data.frame&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(dat[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>)])
</span></span></code></pre></div><pre tabindex="0"><code>##   order i indrep avg author_last  finit_1 finit_2 finit_abv co_author
## 1     1 1      a   1      Devall margaret       s        ms     Thein
## 2     2 1      a   2      Devall margaret       s        ms     Thein
## 3     3 1      a   3      Devall margaret       s        ms     Thein
## 4     4 1      a   4      Devall margaret       s        ms     Thein
## 5     5 1      a   5      Devall margaret       s        ms     Thein
## 6     6 1      a   6      Devall margaret       s        ms     Thein
##   sinit_1
## 1 leonard
## 2 leonard
## 3 leonard
## 4 leonard
## 5 leonard
## 6 leonard
</code></pre><h3 id="publish">Publish</h3>
<p>We can also use the <code>EML</code> package to publish the data, here to <a href="http://figshare.com">Figshare</a>.</p>
<p>First, install <code>rfigshare</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;rfigshare&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;rfigshare&#39;</span>)
</span></span></code></pre></div><p>Then publish using <code>eml_publish()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>figid <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eml_publish</span>(
</span></span><span style="display:flex;"><span>            file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;conditionality_data_prelim_eml.xml&#34;</span>,
</span></span><span style="display:flex;"><span>            description <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EML file for Chamberlain, S.A., J.A. Rudgers, and J.L. Bronstein. 2014. How context-dependent are species interactions. Ecology Letters&#34;</span>,
</span></span><span style="display:flex;"><span>            categories <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Ecology&#34;</span>,
</span></span><span style="display:flex;"><span>            tags <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;EML&#34;</span>,
</span></span><span style="display:flex;"><span>            destination <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;figshare&#34;</span>,
</span></span><span style="display:flex;"><span>            visibility <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>            title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;condionality data, EML&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fs_make_public</span>(figid)
</span></span></code></pre></div><p><img loading="lazy" src="/2014-10-06-conditionality-meta-analysis/figshare_conditional.png" alt=""  />
</p>
]]></content:encoded>
    </item>
    <item>
      <title>Engaging the public on climate change through phenology data</title>
      <link>http://localhost:1313/2013/08/phenology/</link>
      <pubDate>Sun, 18 Aug 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/08/phenology/</guid>
      <description>ScienceOnline Climate I recently attended ScienceOnline Climate, a conference in Washington, D.C. at AAAS offices. You may have heard of the ScienceOnline annual meeting in North Carolina - this was one of their topical meetings focused on Climate Change. Another one is coming up in October, ScienceOnline Oceans. Search Twitter for #scioClimate (or the entire list of hashtags here) for tweets from the conference.
One of the sessions I attended was focused on how to democratize climate change knowledge, moderated by a fellow from the Union of Concerned Scientists.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<h2 id="scienceonline-climate">ScienceOnline Climate</h2>
<p>I recently attended ScienceOnline Climate, a conference in Washington, D.C. at AAAS offices. You may have heard of the ScienceOnline annual meeting in North Carolina - this was one of their topical meetings focused on Climate Change. Another one is coming up in October, ScienceOnline Oceans. Search Twitter for #scioClimate (or the entire list of hashtags <a href="https://gist.github.com/sckott/6213308">here</a>) for tweets from the conference.</p>
<p>One of the sessions I attended was focused on how to democratize climate change knowledge, moderated by a fellow from the Union of Concerned Scientists. Search Twitter for #sciodemocracy to see the conversation from that session. There was a lot of very interesting discussion.</p>
<h2 id="can-we-reach-the-public-with-phenology-data">Can we reach the public with phenology data?</h2>
<p>During the #sciodemocracy session, I had a thought but couldn&rsquo;t articulate it at the time. So here goes. People that are not inolved in climate change discussions may not think about climate change in the framework of changing sea level, melting ice, and altered severity of extreme events. However, many people observe birds, butterflies, and trees outside their apartment windows, cars/trains/buses, or on walks or hikes. When you live in a one place for many years changes in the timing of when birds, butterflies, and trees do certain things are easily noticed. Many of us, including myself, don&rsquo;t necessarily record these changes, but some do! In fact, there are many web sites with databases of observations of birds, butterflies, and more that anyone, not just scientists, can submit observations to. Some examples are the <a href="https://www.usanpn.org/">USA National Phenology Network</a> and <a href="http://www.inaturalist.org/">iNaturalist</a>. And of course there are other databases that are focused on observations of organisms collected by scientists, like <a href="http://www.gbif.org/">GBIF</a> and <a href="http://vertnet.org/index.php">VertNet</a>.</p>
<p>So what? What about it?</p>
<p>When enough of these observations are collected on any one species in one location (e.g., let&rsquo;s say we have 1000 observations of a species in Seattle over 20 years) we can simply ask how has the first date of record of the species in Seattle changed through time? If there is a change in timing of first appearance in the spring through the years, we can hypothesize that this may be due to climate change, and look at the data to see if there is a correlation, etc.</p>
<p>Non-scientists along with scientists are collecting vast amounts of data on observations of species. This data can be used to make people think about climate change. That is, why don&rsquo;t we not only facilitate the public&rsquo;s ability to collect data, but also to analyze the data - to do their own science, ask their own questions. In this way, people can link a bird appearing for the first time in spring a bit later than the previous year, or a tree flowering a bit early, to variables associated with climate change, like temperature, precipitation, etc.</p>
<p>Empowering the general public to do their own science may bring the vague notion of climate change into stark relief - thereby movivating some to take action with their elected representatives, or to at least get curious to find out more.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Coffeehouse - an aggregator for blog posts about data, data management, etc.</title>
      <link>http://localhost:1313/2013/06/coffeehouse/</link>
      <pubDate>Tue, 18 Jun 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/06/coffeehouse/</guid>
      <description>Have you heard of DataONE? It stands for the Data Observation Network for Earth, and I am involved in the Community Education and Engagement working group at DataONE. We try to communicate about data, data management, and similar things to scientists and other DataONE stakeholders.
At our last meeting, we decided to start a blog aggregator to pull in to one place blog posts about data, data management, and related topics.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>Have you heard of <a href="http://www.dataone.org/">DataONE</a>? It stands for the Data Observation Network for Earth, and I am involved in the <a href="http://www.dataone.org/working_groups/community-education-and-engagement">Community Education and Engagement working group</a> at DataONE. We try to communicate about data, data management, and similar things to scientists and other DataONE <em>stakeholders</em>.</p>
<p>At our last meeting, we decided to start a blog aggregator to pull in to one place blog posts about data, data management, and related topics. Those reading this blog have likely heard of <a href="http://www.r-bloggers.com/">R-Bloggers</a> - and there are many more aggregator blogs. We are calling this blog aggregator <strong>Coffeehouse</strong> - as it&rsquo;s sort of a place to gather to talk/read about ideas. Check it out <a href="https://coffeehouse.dataone.org/">here</a>. If you blog about data management think about adding your blog to Coffeehouse - go to the <a href="https://coffeehouse.dataone.org/add-your-blog/"><em>Add your blog</em></a> page to do so. A screenshot:</p>
<p><img loading="lazy" src="/public/img/coffeehouse.png" alt=""  />
</p>
<hr>
<p>The blogs already added to Coffeehouse:</p>
<ul>
<li><a href="http://dataconservancy.org/blog/">Data Conservancy</a></li>
<li><a href="http://datapub.cdlib.org/">Data Pub</a></li>
<li><a href="http://www.datacite.org/">DataCite</a></li>
<li><a href="http://researchremix.wordpress.com/">Research Remix</a></li>
<li><a href="http://blogs.loc.gov/digitalpreservation/">The Signal: Digital Preservation</a></li>
</ul>
<hr>
<p>The tech/styling details:</p>
<ul>
<li>As is obvious we are using Wordpress.org, with the Magazine Basic theme.</li>
<li>We don&rsquo;t accept comments - when someone clicks on the comments button it sends them back to the original post. This is on purpose so that the authors of the post get the comments on their own site.</li>
<li>On the top of each post there is an alert to tell you the post is syndicated, and gives a link to the original post. You can close this alert if it&rsquo;s annoying to you.</li>
<li>Style - we have strived to use clean and simple styling to make for a nice reading experience. A cluttered website makes reading painful. And using the <a href="http://www.icontrolwp.com/our-wordpress-plugins/wordpress-twitter-bootstrap-css-plugin-home/">Twitter Bootstrap WP plugin</a></li>
<li>Icons: done using the <a href="https://github.com/rachelbaker/Font-Awesome-WordPress-Plugin">FontAwesome Wordpress Plugin</a>.</li>
<li>Aggregating posts is done using the <a href="http://feedwordpress.radgeek.com/">FeedWordPress plugin</a>.</li>
<li>The add your blog form: using the <a href="http://wpninjas.com/ninja-forms/">Nina forms plugin</a></li>
<li>Analytics: using the <a href="http://wordpress.org/plugins/gauges/">Gauges WP plugin</a></li>
</ul>
<p>That&rsquo;s it. Let us know if you have any thoughts/comments.</p>
]]></content:encoded>
    </item>
    <item>
      <title>One R package for all your taxonomic needs</title>
      <link>http://localhost:1313/2012/12/taxize/</link>
      <pubDate>Thu, 06 Dec 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/12/taxize/</guid>
      <description>UPDATE: there were some errors in the tests for taxize, so the binaries aren&amp;rsquo;t avaiable yet. You can install from source though, see below.
Getting taxonomic information for the set of species you are studying can be a pain in the ass. You have to manually type, or paste in, your species one-by-one. Or, if you are lucky, there is a web service in which you can upload a list of species.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<blockquote>
<p>UPDATE: there were some errors in the tests for <code>taxize</code>, so the binaries aren&rsquo;t avaiable yet. You can install from source though, see below.</p>
</blockquote>
<p>Getting taxonomic information for the set of species you are studying can be a pain in the ass. You have to manually type, or paste in, your species one-by-one. Or, if you are lucky, there is a web service in which you can upload a list of species. Encyclopedia of Life (EOL) has a service where you can do this <a href="http://gni.globalnames.org/parsers/new">here</a>. But is this reproducible? No.</p>
<p>Getting your taxonomic information for your species can now be done programatically in R. Do you want to get taxonomic information from ITIS. We got that. Tropicos? We got that too. uBio? No worries, we got that. What about theplantlist.org? Yep, got that. Encyclopedia of Life? Indeed. What about getting sequence data for a taxon? Oh hell yeah, you can get sequences available for a taxon across all genes, or get all records for a taxon for a specific gene.</p>
<p>Of course this is all possible because these data providers have open APIs so that we can facilitate your computer talking to their database. Fun!</p>
<p>Why get your taxonomic data programatically? Because it&rsquo;s 1) faster than by hand in web sites/looking up in books, 2) reproducible, especially if you share your code (damnit!), and 3) you can easily mash up your new taxonomic data to get sequences to build a phylogeny, etc.</p>
<p>I&rsquo;ll give a few examples of using <code>taxize</code> based around use cases, that is, stuff someone might actually do instead of what particular functions do.</p>
<hr>
<h3 id="install-packages--you-can-get-from-cran-or-github">Install packages.  You can get from CRAN or GitHub.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#34;ritis&#34;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize_&#39;, &#39;ropensci&#39;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#34;taxize&#34;, type=&#34;source&#34;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ritis)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><hr>
<h3 id="attach-family-names-to-a-list-of-species">Attach family names to a list of species.</h3>
<h4 id="i-often-have-a-list-of-species-that-i-studied-and-simply-want-to-get-their-family-names-to-for-example-make-a-table-for-the-paper-im-writing">I often have a list of species that I studied and simply want to get their family names to, for example, make a table for the paper I&rsquo;m writing.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># For one species</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">itis_name</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Poa annua&#34;</span>, get <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;family&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Poa annua &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;Poaceae&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For many species</span>
</span></span><span style="display:flex;"><span>species <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Poa annua&#34;</span>, <span style="color:#e6db74">&#34;Abies procera&#34;</span>, <span style="color:#e6db74">&#34;Helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;Coffea arabica&#34;</span>)
</span></span><span style="display:flex;"><span>famnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sapply</span>(species, itis_name, get <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;family&#34;</span>, USE.NAMES <span style="color:#f92672">=</span> F)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Poa annua &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Abies procera &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Helianthus annuus &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Coffea arabica &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">data.frame</span>(species <span style="color:#f92672">=</span> species, family <span style="color:#f92672">=</span> famnames)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>            species     family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         Poa annua    Poaceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     Abies procera   Pinaceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> Helianthus annuus Asteraceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    Coffea arabica  Rubiaceae
</span></span></code></pre></div><hr>
<h3 id="resolve-taxonomic-names">Resolve taxonomic names.</h3>
<h4 id="this-is-a-common-use-case-for-ecologistsevolutionary-biologists-or-at-least-should-be-that-is-species-names-you-have-for-your-own-data-or-when-using-others-data-could-be-old-names---and-if-you-need-the-newest-names-for-your-species-list-how-can-you-make-this-as-painless-as-possible-you-can-query-taxonomic-data-from-many-different-sources-with-taxize">This is a common use case for ecologists/evolutionary biologists, or at least should be. That is, species names you have for your own data, or when using other&rsquo;s data, could be old names - and if you need the newest names for your species list, how can you make this as painless as possible? You can query taxonomic data from many different sources with <code>taxize</code>.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># The iPlantCollaborative provides access via API to their taxonomic name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># resolution service (TNRS)</span>
</span></span><span style="display:flex;"><span>mynames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;shorea robusta&#34;</span>, <span style="color:#e6db74">&#34;pandanus patina&#34;</span>, <span style="color:#e6db74">&#34;oryza sativa&#34;</span>, <span style="color:#e6db74">&#34;durio zibethinus&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;rubus ulmifolius&#34;</span>, <span style="color:#e6db74">&#34;asclepias curassavica&#34;</span>, <span style="color:#e6db74">&#34;pistacia lentiscus&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">iplant_tnrsmatch</span>(retrieve <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;all&#34;</span>, taxnames <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;acacia&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;gossypium&#34;</span>), output <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;names&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>       AcceptedName   MatchFam MatchGenus MatchScore    Accept<span style="color:#f92672">?</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Helianthus annuus Asteraceae Helianthus          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            Acacia   Fabaceae     Acacia          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                                  Acacia          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         Gossypium  Malvaceae  Gossypium          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span>     SubmittedNames
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> helianthus annuus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            acacia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            acacia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         gossypium
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The global names resolver is another attempt at this, hitting many</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># different data sources</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gnr_resolve</span>(names <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;Homo sapiens&#34;</span>), returndf <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   data_source_id    submitted_name       name_string score
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>               <span style="color:#ae81ff">4</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>              <span style="color:#ae81ff">10</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>              <span style="color:#ae81ff">12</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>             <span style="color:#ae81ff">110</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>            <span style="color:#ae81ff">159</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>            <span style="color:#ae81ff">166</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>            <span style="color:#ae81ff">169</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>               <span style="color:#ae81ff">4</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>              <span style="color:#ae81ff">10</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>              <span style="color:#ae81ff">12</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>             <span style="color:#ae81ff">107</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>             <span style="color:#ae81ff">122</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>            <span style="color:#ae81ff">123</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>            <span style="color:#ae81ff">159</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>            <span style="color:#ae81ff">168</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>            <span style="color:#ae81ff">169</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span>                     title
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                     NCBI
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                 Freebase
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>                      EOL
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>     Illinois Wildflowers
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>                 CU<span style="color:#f92672">*</span>STAR
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>                   nlbif
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>           uBio NameBank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                     NCBI
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                 Freebase
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                      EOL
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                AskNature
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>                 BioPedia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                   AnAge
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>                 CU<span style="color:#f92672">*</span>STAR
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span> Index to Organism Names
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>           uBio NameBank
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We can hit the Plantminer API too</span>
</span></span><span style="display:flex;"><span>plants <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Myrcia lingua&#34;</span>, <span style="color:#e6db74">&#34;Myrcia bella&#34;</span>, <span style="color:#e6db74">&#34;Ocotea pulchella&#34;</span>, <span style="color:#e6db74">&#34;Miconia&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Coffea arabica var. amarella&#34;</span>, <span style="color:#e6db74">&#34;Bleh&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plantminer</span>(plants)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Myrcia lingua 
</span></span><span style="display:flex;"><span>Myrcia bella 
</span></span><span style="display:flex;"><span>Ocotea pulchella 
</span></span><span style="display:flex;"><span>Miconia 
</span></span><span style="display:flex;"><span>Coffea arabica var. amarella 
</span></span><span style="display:flex;"><span>Bleh 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>              fam   genus                    sp             author
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       Myrtaceae  Myrcia                <span style="color:#a6e22e">lingua   </span>(O. Berg) Mattos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>       Myrtaceae  Myrcia                 bella           Cambess.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>       Lauraceae  Ocotea             <span style="color:#a6e22e">pulchella </span>(Nees <span style="color:#f92672">&amp;</span> Mart.) Mez
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> Melastomataceae Miconia                    <span style="color:#66d9ef">NA</span>        Ruiz <span style="color:#f92672">&amp;</span> Pav.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>       Rubiaceae  Coffea arabica var. amarella        A. Froehner
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>              <span style="color:#66d9ef">NA</span>    Bleh                    <span style="color:#66d9ef">NA</span>                 <span style="color:#66d9ef">NA</span>
</span></span><span style="display:flex;"><span>            source source.id   status confidence suggestion       database
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>              TRO <span style="color:#ae81ff">100227036</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>             WCSP    <span style="color:#ae81ff">131057</span> Accepted          H         <span style="color:#66d9ef">NA</span> The Plant List
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#a6e22e">WCSP </span>(<span style="color:#66d9ef">in</span> review)    <span style="color:#ae81ff">989758</span> Accepted          M         <span style="color:#66d9ef">NA</span> The Plant List
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>              TRO  <span style="color:#ae81ff">40018467</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>              TRO <span style="color:#ae81ff">100170231</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>               <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Baea             <span style="color:#66d9ef">NA</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We made a light wrapper around the Taxonstand package to search</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Theplantlist.org too</span>
</span></span><span style="display:flex;"><span>splist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Heliathus annuus&#34;</span>, <span style="color:#e6db74">&#34;Abies procera&#34;</span>, <span style="color:#e6db74">&#34;Poa annua&#34;</span>, <span style="color:#e6db74">&#34;Platanus occidentalis&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Carex abrupta&#34;</span>, <span style="color:#e6db74">&#34;Arctostaphylos canescens&#34;</span>, <span style="color:#e6db74">&#34;Ocimum basilicum&#34;</span>, <span style="color:#e6db74">&#34;Vicia faba&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Quercus kelloggii&#34;</span>, <span style="color:#e6db74">&#34;Lactuca serriola&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tpl_search</span>(taxon <span style="color:#f92672">=</span> splist)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>            Genus      Species Infraspecific Plant.Name.Index
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       Heliathus       annuus                          <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>           Abies      procera                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>             Poa        annua                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Platanus occidentalis                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>           Carex      abrupta                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Arctostaphylos    canescens                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>          Ocimum    basilicum                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>           Vicia         faba                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>         Quercus    kelloggii                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>        Lactuca     serriola                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>   Taxonomic.status      Family      New.Genus  New.Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                    Heliathus       annuus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Accepted    Pinaceae          Abies      procera
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>          Accepted     Poaceae            Poa        annua
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>          Accepted Platanaceae       Platanus occidentalis
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>          Accepted  Cyperaceae          Carex      abrupta
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>          Accepted   Ericaceae Arctostaphylos    canescens
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>          Accepted   Lamiaceae         Ocimum    basilicum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>          Accepted Leguminosae          Vicia         faba
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Accepted    Fagaceae        Quercus    kelloggii
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Accepted  Compositae        Lactuca     serriola
</span></span><span style="display:flex;"><span>   New.Infraspecific Authority  Typo WFormat
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                              <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                       Rehder <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>               <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">NA</span><span style="color:#f92672">&gt;</span>     Mack. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                       Eastw. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>               <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">NA</span><span style="color:#f92672">&gt;</span>     Newb. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                          L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span></code></pre></div><hr>
<h3 id="taxonomic-hierarchies">Taxonomic hierarchies</h3>
<h4 id="i-often-want-the-full-taxonomic-hierarchy-for-a-set-of-species-that-is-give-me-the-family-order-class-etc-for-my-list-of-species-there-are-two-different-easy-ways-to-do-this-with-taxize-the-first-example-uses-eol">I often want the full taxonomic hierarchy for a set of species. That is, give me the family, order, class, etc. for my list of species. There are two different easy ways to do this with <code>taxize</code>. The first example uses EOL.</h4>
<hr>
<h4 id="using-eol">Using EOL.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pageid <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eol_search</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>)<span style="color:#f92672">$</span>id[1]  <span style="color:#75715e"># first need to search for the taxon&#39;s page on EOL</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eol_pages</span>(taxonconceptID <span style="color:#f92672">=</span> pageid)  <span style="color:#75715e"># then we nee to get the taxon ID used by EOL</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Notice that there are multiple different sources you can pull the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># hierarchy from. Note even that you can get the hierarchy from the ITIS</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># service via this EOL API.</span>
</span></span><span style="display:flex;"><span>out
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  identifier                 scientificName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">46203061</span> Quercus douglasii Hook. <span style="color:#f92672">&amp;</span> Arn.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">48373995</span> Quercus douglasii Hook. <span style="color:#f92672">&amp;</span> Arn.
</span></span><span style="display:flex;"><span>                                  nameAccordingTo sourceIdentfier
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  Integrated Taxonomic Information <span style="color:#a6e22e">System </span>(ITIS)           <span style="color:#ae81ff">19322</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Species <span style="color:#ae81ff">2000</span> <span style="color:#f92672">&amp;</span> ITIS Catalogue of Life<span style="color:#f92672">:</span> May <span style="color:#ae81ff">2012</span>         <span style="color:#ae81ff">9723391</span>
</span></span><span style="display:flex;"><span>  taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Species
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Then the hierarchy!</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">eol_hierarchy</span>(out[out<span style="color:#f92672">$</span>nameAccordingTo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Species 2000 &amp; ITIS Catalogue of Life: May 2012&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;identifier&#34;</span>])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  sourceIdentifier  taxonID parentNameUsageID taxonConceptID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">11017504</span> <span style="color:#ae81ff">48276627</span>                 <span style="color:#ae81ff">0</span>            <span style="color:#ae81ff">281</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>         <span style="color:#ae81ff">11017505</span> <span style="color:#ae81ff">48276628</span>          <span style="color:#ae81ff">48276627</span>            <span style="color:#ae81ff">282</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>         <span style="color:#ae81ff">11017506</span> <span style="color:#ae81ff">48276629</span>          <span style="color:#ae81ff">48276628</span>            <span style="color:#ae81ff">283</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         <span style="color:#ae81ff">11022500</span> <span style="color:#ae81ff">48373354</span>          <span style="color:#ae81ff">48276629</span>           <span style="color:#ae81ff">4184</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>         <span style="color:#ae81ff">11025284</span> <span style="color:#ae81ff">48373677</span>          <span style="color:#ae81ff">48373354</span>           <span style="color:#ae81ff">4197</span>
</span></span><span style="display:flex;"><span>  scientificName taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>        Plantae   kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  Magnoliophyta    phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  Magnoliopsida     class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Fagales     order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>       Fagaceae    family
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">eol_hierarchy</span>(out[out<span style="color:#f92672">$</span>nameAccordingTo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Integrated Taxonomic Information System (ITIS)&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;identifier&#34;</span>])  <span style="color:#75715e"># and from ITIS, slightly different than ITIS output below, which includes taxa all the way down.</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   sourceIdentifier  taxonID parentNameUsageID taxonConceptID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">202422</span> <span style="color:#ae81ff">46150613</span>                 <span style="color:#ae81ff">0</span>            <span style="color:#ae81ff">281</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            <span style="color:#ae81ff">846492</span> <span style="color:#ae81ff">46159776</span>          <span style="color:#ae81ff">46150613</span>        <span style="color:#ae81ff">8654492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            <span style="color:#ae81ff">846494</span> <span style="color:#ae81ff">46161961</span>          <span style="color:#ae81ff">46159776</span>       <span style="color:#ae81ff">28818077</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>            <span style="color:#ae81ff">846496</span> <span style="color:#ae81ff">46167532</span>          <span style="color:#ae81ff">46161961</span>           <span style="color:#ae81ff">4494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>            <span style="color:#ae81ff">846504</span> <span style="color:#ae81ff">46169010</span>          <span style="color:#ae81ff">46167532</span>       <span style="color:#ae81ff">28825126</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>            <span style="color:#ae81ff">846505</span> <span style="color:#ae81ff">46169011</span>          <span style="color:#ae81ff">46169010</span>            <span style="color:#ae81ff">282</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>             <span style="color:#ae81ff">18063</span> <span style="color:#ae81ff">46169012</span>          <span style="color:#ae81ff">46169011</span>            <span style="color:#ae81ff">283</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>            <span style="color:#ae81ff">846548</span> <span style="color:#ae81ff">46202954</span>          <span style="color:#ae81ff">46169012</span>       <span style="color:#ae81ff">28859070</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>             <span style="color:#ae81ff">19273</span> <span style="color:#ae81ff">46202955</span>          <span style="color:#ae81ff">46202954</span>           <span style="color:#ae81ff">4184</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>            <span style="color:#ae81ff">19275</span> <span style="color:#ae81ff">46203022</span>          <span style="color:#ae81ff">46202955</span>           <span style="color:#ae81ff">4197</span>
</span></span><span style="display:flex;"><span>    scientificName     taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>          Plantae       kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Viridaeplantae    subkingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     Streptophyta  infrakingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Tracheophyta      division
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  Spermatophytina   subdivision
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     Angiospermae infradivision
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>    Magnoliopsida         class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>          Rosanae    superorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Fagales         order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>        Fagaceae        family
</span></span></code></pre></div><hr>
<h4 id="and-getting-a-taxonomic-hierarchy-using-itis">And getting a taxonomic hierarchy using ITIS.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># First, get the taxonomic serial number (TSN) that ITIS uses</span>
</span></span><span style="display:flex;"><span>mytsn <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_tsn</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>, <span style="color:#e6db74">&#34;sciname&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Quercus douglasii &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the full taxonomic hierarchy for a taxon from the TSN</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">itis</span>(mytsn, <span style="color:#e6db74">&#34;getfullhierarchyfromtsn&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>        parentName parentTsn      rankName         taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                  Kingdom           Plantae <span style="color:#ae81ff">202422</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Plantae    <span style="color:#ae81ff">202422</span>    Subkingdom    Viridaeplantae <span style="color:#ae81ff">846492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>   Viridaeplantae    <span style="color:#ae81ff">846492</span>  Infrakingdom      Streptophyta <span style="color:#ae81ff">846494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Streptophyta    <span style="color:#ae81ff">846494</span>      Division      Tracheophyta <span style="color:#ae81ff">846496</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     Tracheophyta    <span style="color:#ae81ff">846496</span>   Subdivision   Spermatophytina <span style="color:#ae81ff">846504</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Spermatophytina    <span style="color:#ae81ff">846504</span> Infradivision      Angiospermae <span style="color:#ae81ff">846505</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>     Angiospermae    <span style="color:#ae81ff">846505</span>         Class     Magnoliopsida  <span style="color:#ae81ff">18063</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>    Magnoliopsida     <span style="color:#ae81ff">18063</span>    Superorder           Rosanae <span style="color:#ae81ff">846548</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Rosanae    <span style="color:#ae81ff">846548</span>         Order           Fagales  <span style="color:#ae81ff">19273</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Fagales     <span style="color:#ae81ff">19273</span>        Family          Fagaceae  <span style="color:#ae81ff">19275</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>        Fagaceae     <span style="color:#ae81ff">19275</span>         Genus           Quercus  <span style="color:#ae81ff">19276</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>         Quercus     <span style="color:#ae81ff">19276</span>       Species Quercus douglasii  <span style="color:#ae81ff">19322</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># But this can be even easier!</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">classification</span>(<span style="color:#a6e22e">get_tsn</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>))  <span style="color:#75715e"># Boom!</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Quercus douglasii &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>        parentName parentTsn      rankName         taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                  Kingdom           Plantae <span style="color:#ae81ff">202422</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Plantae    <span style="color:#ae81ff">202422</span>    Subkingdom    Viridaeplantae <span style="color:#ae81ff">846492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>   Viridaeplantae    <span style="color:#ae81ff">846492</span>  Infrakingdom      Streptophyta <span style="color:#ae81ff">846494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Streptophyta    <span style="color:#ae81ff">846494</span>      Division      Tracheophyta <span style="color:#ae81ff">846496</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     Tracheophyta    <span style="color:#ae81ff">846496</span>   Subdivision   Spermatophytina <span style="color:#ae81ff">846504</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Spermatophytina    <span style="color:#ae81ff">846504</span> Infradivision      Angiospermae <span style="color:#ae81ff">846505</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>     Angiospermae    <span style="color:#ae81ff">846505</span>         Class     Magnoliopsida  <span style="color:#ae81ff">18063</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>    Magnoliopsida     <span style="color:#ae81ff">18063</span>    Superorder           Rosanae <span style="color:#ae81ff">846548</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Rosanae    <span style="color:#ae81ff">846548</span>         Order           Fagales  <span style="color:#ae81ff">19273</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Fagales     <span style="color:#ae81ff">19273</span>        Family          Fagaceae  <span style="color:#ae81ff">19275</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>        Fagaceae     <span style="color:#ae81ff">19275</span>         Genus           Quercus  <span style="color:#ae81ff">19276</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>         Quercus     <span style="color:#ae81ff">19276</span>       Species Quercus douglasii  <span style="color:#ae81ff">19322</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You can also do this easy-peasy route to a taxonomic hierarchy using</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># uBio</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">classification</span>(<span style="color:#a6e22e">get_uid</span>(<span style="color:#e6db74">&#34;Ornithorhynchus anatinus&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>       ScientificName         Rank    UID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  cellular organisms      no rank <span style="color:#ae81ff">131567</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>           Eukaryota superkingdom   <span style="color:#ae81ff">2759</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>        Opisthokonta      no rank  <span style="color:#ae81ff">33154</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>             Metazoa      kingdom  <span style="color:#ae81ff">33208</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>           Eumetazoa      no rank   <span style="color:#ae81ff">6072</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>           Bilateria      no rank  <span style="color:#ae81ff">33213</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>           Coelomata      no rank  <span style="color:#ae81ff">33316</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>       Deuterostomia      no rank  <span style="color:#ae81ff">33511</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>            Chordata       phylum   <span style="color:#ae81ff">7711</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>           Craniata    subphylum  <span style="color:#ae81ff">89593</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>         Vertebrata      no rank   <span style="color:#ae81ff">7742</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>      Gnathostomata   superclass   <span style="color:#ae81ff">7776</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>         Teleostomi      no rank <span style="color:#ae81ff">117570</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>       Euteleostomi      no rank <span style="color:#ae81ff">117571</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>      Sarcopterygii      no rank   <span style="color:#ae81ff">8287</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>          Tetrapoda      no rank  <span style="color:#ae81ff">32523</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">17</span>            Amniota      no rank  <span style="color:#ae81ff">32524</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">18</span>           Mammalia        class  <span style="color:#ae81ff">40674</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>        Prototheria      no rank   <span style="color:#ae81ff">9254</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20</span>        Monotremata        order   <span style="color:#ae81ff">9255</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">21</span>  Ornithorhynchidae       family   <span style="color:#ae81ff">9256</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">22</span>    Ornithorhynchus        genus   <span style="color:#ae81ff">9257</span>
</span></span></code></pre></div><hr>
<h3 id="sequences">Sequences?</h3>
<h4 id="while-you-are-at-doing-taxonomic-stuff-you-often-wonder-hmmm-i-wonder-if-there-are-any-sequence-data-available-for-my-species-so-you-can-use-get_seqs-to-search-for-specific-genes-for-a-species-and-get_genes_avail-to-find-out-what-genes-are-available-for-a-certain-species-these-functions-search-for-data-on-ncbihttpwwwncbinlmnihgov">While you are at doing taxonomic stuff, you often wonder &ldquo;hmmm, I wonder if there are any sequence data available for my species?&rdquo; So, you can use <code>get_seqs</code> to search for specific genes for a species, and <code>get_genes_avail</code> to find out what genes are available for a certain species. These functions search for data on <a href="http://www.ncbi.nlm.nih.gov/">NCBI</a>.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get sequences (sequence is provied in output, but hiding here for</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># brevity). What&#39;s nice about this is that it gets the longest sequence</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># avaialable for the gene you searched for, and if there isn&#39;t anything</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># available, it lets you get a sequence from a congener if you set</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># getrelated=TRUE. The last column in the output data.frame also tells you</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># what species the sequence is from.</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_seqs</span>(taxon_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Acipenser brevirostrum&#34;</span>, gene <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;5S rRNA&#34;</span>), 
</span></span><span style="display:flex;"><span>    seqrange <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1:3000&#34;</span>, getrelated <span style="color:#f92672">=</span> T, writetodf <span style="color:#f92672">=</span> F)
</span></span><span style="display:flex;"><span>out[, <span style="color:#f92672">!</span><span style="color:#a6e22e">names</span>(out) <span style="color:#f92672">%in%</span> <span style="color:#e6db74">&#34;sequence&#34;</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>                   taxon                                         gene_desc
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Acipenser brevirostrum Acipenser brevirostrum <span style="color:#ae81ff">5</span>S rRNA gene, clone BRE92A
</span></span><span style="display:flex;"><span>     gi_no     acc_no length                 spused
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">60417159</span> AJ745069.1    <span style="color:#ae81ff">121</span> Acipenser brevirostrum
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search for available sequences</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_genes_avail</span>(taxon_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Umbra limi&#34;</span>, seqrange <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1:2000&#34;</span>, getrelated <span style="color:#f92672">=</span> F)
</span></span><span style="display:flex;"><span>out<span style="color:#a6e22e">[grep</span>(<span style="color:#e6db74">&#34;RAG1&#34;</span>, out<span style="color:#f92672">$</span>genesavail, ignore.case <span style="color:#f92672">=</span> T), ]  <span style="color:#75715e"># does the string &#39;RAG1&#39; exist in any of the gene names</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>        spused length
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span> Umbra limi    <span style="color:#ae81ff">732</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span> Umbra limi    <span style="color:#ae81ff">959</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span> Umbra limi   <span style="color:#ae81ff">1631</span>
</span></span><span style="display:flex;"><span>                                                                            genesavail
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span> isolate UlimA recombinase activating protein <span style="color:#ae81ff">1</span> (rag1) gene, exon <span style="color:#ae81ff">3</span> and partial cds
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span>           recombination<span style="color:#f92672">-</span>activating protein <span style="color:#ae81ff">1</span> (RAG1) gene, intron <span style="color:#ae81ff">2</span> and partial cds
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span>                        recombination<span style="color:#f92672">-</span>activating protein <span style="color:#ae81ff">1</span> (RAG1) gene, partial cds
</span></span><span style="display:flex;"><span>    predicted
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span>  JX190826
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span>  AY459526
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span>  AY380548
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-12-06-taxize.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-12-06-taxize.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Altecology, a call to unconference action</title>
      <link>http://localhost:1313/2012/11/altecology/</link>
      <pubDate>Thu, 15 Nov 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/11/altecology/</guid>
      <description>Note: This post is cross-posted on Sandra Chung&amp;rsquo;s blog here.
The rise of the unconference The Ecological Society of America meeting is holding its 98th annual meeting next year in Minneapolis, MN. Several thousand students and professionals in ecological science and education will gather to hear and read the latest work and ideas in ecology in the familiar poster and lecture formats that are the core of every major scientific conference.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>Note: This post is cross-posted on Sandra Chung&rsquo;s blog <a href="http://sandrachung.com/">here</a>.</p>
<hr>
<h3 id="the-rise-of-the-unconference">The rise of the unconference</h3>
<p>The Ecological Society of America meeting is holding its <a href="http://www.esa.org/minneapolis/">98th annual meeting</a> next year in Minneapolis, MN. Several thousand students and professionals in ecological science and education will gather to hear and read the latest work and ideas in ecology in the familiar poster and lecture formats that are the core of every major scientific conference. But a subset of these people will get a taste of something a little bit different: an unconference within the conference.</p>
<p>The most important difference between traditional science conferences and the unconference format is that it prioritizes human interaction. Often the best and most important parts of science meetings are the interactions between talks, next to posters, and at the end of the day over drinks. These connections pave the way for collaborations and friendships that nourish our professional and personal lives with shared opportunities, camaraderie and support.</p>
<p>In recognition of the increasing relative importance of the “meeting” part of a science meeting, the unconference format emphasizes interaction over presentation. It attempts to engage participants to the maximum extent reasonable in discussion and doing. <a href="http://scienceonline.com/">Science Online</a> is a good example of this unconference format, in which the session topics are typically decided on democratically by the conference attendees (partly before arrival, partly on arrival), and you vote with your feet by going to and leaving sessions as you desire.</p>
<hr>
<h3 id="ecology-is-changing">Ecology is changing</h3>
<p>Ecology is now adopting some of the same online and social tools that are already accelerating innovation in computing and other science disciplines. Ecologists, ecology students and educators are asking many of the same basic questions they have always asked: What should we be doing? How do we do it better and faster? Social media, open source software, open science, altmetrics, crowdsourcing, crowdfunding, data visualization, data sharing, alternative peer review, and an increasing emphasis on more and better communication and collaboration are just some of the newer tools being put forth to help address those questions in the 21st century.</p>
<p>Social media is rapidly becoming more common in ecologists’ toolkits to disseminate news of their new papers, communicate about research and research tools, and even filter the deluge of publications. Tools like blogs, Twitter and Facebook are filling the communication gaps between annual meetings and adding a new layer of conversation and connection to conferences and classrooms.</p>
<p>Social media, in turn, is connecting scientists directly to people besides their immediate colleagues who appreciate the impact of their work and want it to continue. The crowdfunding movement - exemplified by Kickstarter - has spurred similar alternative science funding projects such as SciFund. #SciFund project has shown that social media engagement increases donations to crowdfunded research (<a href="http://jecology.libsyn.com/interview-with-jarrett-byrnes-on-science-crowdfunding">interview with Jarrett Byrnes</a>).</p>
<p>In addition, we are in the era of big data, and <a href="http://www.neoninc.org/news/big-data-part-i">this includes ecology</a>. To deal with this “data deluge”, ecologists increasingly want to learn how to manage, share, retrieve, use, and visualize data. There are new tools for all of these tasks - we need to aid each other in learning them. Online and offline communities are coalescing around the development and dissemination of these tools for the benefit of ecological science, and they are meeting face-to-face at our ecological unconference.</p>
<p>Science in general is becoming increasingly complex and calling for larger and larger collaborations. This growth in turn is spurring a drive toward more openness and transparency within the culture of science. The more collaborative and complex scientific study becomes, the more scientists depend upon each other to do good work that we can all build upon with confidence. The often unstated assumption about ecology, and all of science, is that research findings are reproducible; but that assumption is quite shaky given the increasing number of retractions (see the <a href="http://retractionwatch.wordpress.com/">Retraction Watch blog</a>) and findings that much research is not reproducible (see media coverage <a href="http://www.nature.com/nature/journal/v483/n7391/full/483531a.html">here</a> and <a href="http://www.reuters.com/article/2012/03/28/us-science-cancer-idUSBRE82R12P20120328">here</a>).</p>
<p>A recent initiative seeks to facilitate attempts to reproduce research: <a href="https://www.scienceexchange.com/reproducibility">The Reproducibility Initiative</a>. Jarrett Byrnes <a href="http://www.slideshare.net/JarrettByrnes/taking-the-ecological-conversation-online">spoke at #ESA2012</a> of how transparent, online discourse enhances our ability to discuss and improve our work and the work of our peers, both before and after publication.</p>
<p>Much of the ecological science community shares one or both of these goals: to do the best possible science, and to do it in a way that is most useful and accessible to colleagues and to society at large. The goal of this year’s ecological unconference is to introduce as many people as possible to resources - both tools and people - that can help all of us achieve those goals, on our own, or together.</p>
<p>One way we as ecologists can quickly make our research more reproducible is the way we write. By simply using tools that make reproducing what we have done easy to do, we can avoid retracted papers, failed drugs, and ruined careers.</p>
<hr>
<h3 id="what-are-you-proposing">What are you proposing?</h3>
<p>We originally thought about a separate event from ESA itself, modeled after <a href="http://scienceonline.com/">Science Online</a>, incorporating a variety of topics. However, we thought testing the waters for this sort of non-traditional unconference format would be better in 2013. We are gathering ideas from the community (see “How do I make my voice heard?” below). The ideas on the wiki that get the most traction, and have 1-2 champions that are willing to see the idea through and lead the workshop at ESA will be turned in to proposals for ESA workshops. In addition, we will be submitting a proposal for an Ignite session at ESA. To summarise, we will be running:</p>
<ul>
<li>A few workshops (at lunch hours, and half-day). Topics may include:
<ul>
<li>Data sharing</li>
<li>Data visualization</li>
<li>Data management</li>
<li>Alternatives to academia</li>
<li>Blogging</li>
<li>Social media</li>
<li>Reproducible science writing</li>
</ul>
</li>
<li>One Ignite session on “Tools for better/faster science”. See more about Ignite sessions <a href="http://www.esa.org/minneapolis/ignite.php">here</a>.</li>
<li>A “tweetup” event to socialize in a more relaxed atmosphere</li>
</ul>
<p>These will all be loosely aggregated under the <a href="https://twitter.com/search/realtime?q=%23AltEcology">#AltEcology</a> hashtag.</p>
<hr>
<h3 id="how-do-i-make-my-voice-heard">How do I make my voice heard?</h3>
<p>We have set up a wiki in which anyone can contribute. Please share your ideas and voice your support for existing ones at the wiki <a href="http://ecologyunconference.wikispaces.com/">here</a>.  You can just throw ideas out there, or even propose new workshops and nominate people to lead them. We’re currently moving to transform existing ideas into ESA workshop and Ignite proposals to meet the <a href="http://www.esa.org/minneapolis/workshop.php">November 29 deadline</a>, but we’ll be incorporating input from the wiki right up to the meeting itself in August 2013.</p>
<hr>
<h3 id="get-in-touch">Get in touch</h3>
<p>If you have any questions/comments, let us know in the comments section below, tweet us (Sandra: <a href="https://twitter.com/sandramchung">@sandramchung</a>, Scott: <a href="https://twitter.com/recology_">@recology_</a>), or email (<a href="mailto:sandra.m.chung@gmail.com">Sandra</a>, <a href="mailto:myrmecocystus@gmail.com">Scott</a>).</p>
<hr>
<p>Get the .md file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-11-15-altecology.md">at my github account</a>.  Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Getting taxonomic names downstream</title>
      <link>http://localhost:1313/2012/10/get-taxa-downstream/</link>
      <pubDate>Tue, 16 Oct 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/10/get-taxa-downstream/</guid>
      <description>It can be a pain in the ass to get taxonomic names. For example, I sometimes need to get all the Class names for a set of species. This is a relatively easy problem using the ITIS API (example below).
The much harder problem is getting all the taxonomic names downstream. ITIS doesn&amp;rsquo;t provide an API method for this - well, they do (getHirerachyDownFromTSN), but it only provides direct children (e.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>It can be a pain in the ass to get taxonomic names. For example, I sometimes need to get all the Class names for a set of species.  This is a relatively easy problem using the <a href="http://www.itis.gov/ws_description.html">ITIS API</a> (example below).</p>
<p>The much harder problem is getting all the taxonomic names downstream. ITIS doesn&rsquo;t provide an API method for this - well, they do (<a href="http://www.itis.gov/ws_hierApiDescription.html#getHierarchyDn"><code>getHirerachyDownFromTSN</code></a>), but it only provides direct children (e.g., the genera within a tribe - but it won&rsquo;t give all the species within each genus).</p>
<p>So in the <code>taxize</code> package, we wrote a function called <code>downstream</code>, which allows you to get taxonomic names to any downstream point, e.g.:</p>
<ul>
<li>get all Classes within Animalia,</li>
<li>get all Species within a Family</li>
<li>etc.</li>
</ul>
<h3 id="install-packages--you-can-get-other-packages-from-cran-but-taxize-is-only-on-github-for-now">Install packages.  You can get other packages from CRAN, but taxize is only on GitHub for now.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;ritis&#39;, &#39;ropensci&#39;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize&#39;, &#39;ropensci&#39;) # uncomment if not already</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ritis)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><h3 id="get-upstream-taxonomic-names">Get upstream taxonomic names.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Search for a TSN by scientific name</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">searchbyscientificname</span>(<span style="color:#e6db74">&#34;Tardigrada&#34;</span>)
</span></span><span style="display:flex;"><span>tsn <span style="color:#f92672">&lt;-</span> df[df<span style="color:#f92672">$</span>combinedname <span style="color:#f92672">%in%</span> <span style="color:#e6db74">&#34;Tardigrada&#34;</span>, <span style="color:#e6db74">&#34;tsn&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get just one immediate higher taxonomic name</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gethierarchyupfromtsn</span>(tsn <span style="color:#f92672">=</span> tsn)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  parentName parentTsn rankName  taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   Animalia    <span style="color:#ae81ff">202423</span>   Phylum Tardigrada <span style="color:#ae81ff">155166</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get full hierarchy upstream from TSN</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">getfullhierarchyfromtsn</span>(tsn <span style="color:#f92672">=</span> tsn)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  parentName parentTsn rankName        taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                       Kingdom         Animalia <span style="color:#ae81ff">202423</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Animalia    <span style="color:#ae81ff">202423</span>   Phylum       Tardigrada <span style="color:#ae81ff">155166</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class     Eutardigrada <span style="color:#ae81ff">155362</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class Heterotardigrada <span style="color:#ae81ff">155167</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class   Mesotardigrada <span style="color:#ae81ff">155358</span>
</span></span></code></pre></div><h3 id="get-taxonomc-names-downstream">Get taxonomc names downstream.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get genera downstream fromthe Class Bangiophyceae</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">846509</span>, <span style="color:#e6db74">&#34;Genus&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>    tsn parentName parentTsn   taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">11531</span> Bangiaceae     <span style="color:#ae81ff">11530</span>      Bangia    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">11540</span> Bangiaceae     <span style="color:#ae81ff">11530</span>    Porphyra    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">11577</span> Bangiaceae     <span style="color:#ae81ff">11530</span> Porphyrella    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">11580</span> Bangiaceae     <span style="color:#ae81ff">11530</span> Conchocelis    <span style="color:#ae81ff">180</span>    Genus
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get families downstream from Acridoidea</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">650497</span>, <span style="color:#e6db74">&#34;Family&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>      tsn parentName parentTsn      taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">102195</span> Acridoidea    <span style="color:#ae81ff">650497</span>      Acrididae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">650502</span> Acridoidea    <span style="color:#ae81ff">650497</span>     Romaleidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">657472</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Charilaidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">657473</span> Acridoidea    <span style="color:#ae81ff">650497</span>   Lathiceridae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">657474</span> Acridoidea    <span style="color:#ae81ff">650497</span>     Lentulidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">657475</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Lithidiidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">657476</span> Acridoidea    <span style="color:#ae81ff">650497</span>   Ommexechidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>  <span style="color:#ae81ff">657477</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Pamphagidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>  <span style="color:#ae81ff">657478</span> Acridoidea    <span style="color:#ae81ff">650497</span>  Pyrgacrididae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span> <span style="color:#ae81ff">657479</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Tristiridae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span> <span style="color:#ae81ff">657492</span> Acridoidea    <span style="color:#ae81ff">650497</span> Dericorythidae    <span style="color:#ae81ff">140</span>   Family
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get species downstream from Ursus</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">180541</span>, <span style="color:#e6db74">&#34;Species&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>     tsn parentName parentTsn        taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">180542</span>      Ursus    <span style="color:#ae81ff">180541</span>  Ursus maritimus    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">180543</span>      Ursus    <span style="color:#ae81ff">180541</span>     Ursus arctos    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">180544</span>      Ursus    <span style="color:#ae81ff">180541</span> Ursus americanus    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">621850</span>      Ursus    <span style="color:#ae81ff">180541</span> Ursus thibetanus    <span style="color:#ae81ff">220</span>  Species
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-10-16-get-taxa-downstream.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-10-16-get-taxa-downstream.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>GBIF biodiversity data from R - more functions</title>
      <link>http://localhost:1313/2012/10/rgbif-newfxns/</link>
      <pubDate>Mon, 08 Oct 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/10/rgbif-newfxns/</guid>
      <description>UPDATE: In response to Jarrett&amp;rsquo;s query I laid out a separate use case in which you may want to query by higher taxonomic rankings than species. See below. In addition, added examples of querying by location in reply to comments by seminym.
We have been working on an R package to get GBIF data from R, with the stable version available through CRAN, and the development version available on GitHub at https://github.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<blockquote>
<p>UPDATE: In response to Jarrett&rsquo;s query I laid out a separate use case in which you may want to query by higher taxonomic rankings than species. See below.  In addition, added examples of querying by location in reply to comments by seminym.</p>
</blockquote>
<p>We have been working on an R package to get GBIF data from R, with the stable version available through CRAN, and the development version available on GitHub at <a href="https://github.com/rgbif">https://github.com/rgbif</a></p>
<p>We had a Google Summer of code stuent work on the package this summer - you can see his work on the package over at his GitHub page <a href="">here</a>.  We have added some new functionality since his work, and would like to show it off.</p>
<h3 id="install">Install</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;rgbif&#39;, &#39;ropensci&#39;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rgbif)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(plyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(XML)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(httr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(maps)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span></code></pre></div><h3 id="get-taxonomic-information-on-a-specific-taxon-or-taxa-in-gbif-by-their-taxon-concept-keys">Get taxonomic information on a specific taxon or taxa in GBIF by their taxon concept keys.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(keys <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">taxonsearch</span>(scientificname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Puma concolor&#34;</span>))  <span style="color:#75715e"># many matches to this search</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;51780668&#34;</span> <span style="color:#e6db74">&#34;51758018&#34;</span> <span style="color:#e6db74">&#34;50010499&#34;</span> <span style="color:#e6db74">&#34;51773067&#34;</span> <span style="color:#e6db74">&#34;51078815&#34;</span> <span style="color:#e6db74">&#34;51798065&#34;</span>
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;51088007&#34;</span> <span style="color:#e6db74">&#34;50410780&#34;</span> <span style="color:#e6db74">&#34;50305290&#34;</span> <span style="color:#e6db74">&#34;51791438&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">taxonget</span>(keys[[1]])  <span style="color:#75715e"># let&#39;s get the first one - the first row in the data.frame is the one we searched for (51780668)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[[1]]
</span></span><span style="display:flex;"><span>                    sciname taxonconceptkeys       rank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>             Puma concolor         <span style="color:#ae81ff">51780668</span>    species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                      Puma         <span style="color:#ae81ff">51780667</span>      genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                   Felidae         <span style="color:#ae81ff">51780651</span>     family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                 Carnivora         <span style="color:#ae81ff">51780613</span>      order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>                  Mammalia         <span style="color:#ae81ff">51780547</span>      class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                  Chordata         <span style="color:#ae81ff">51775774</span>     phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                  Animalia         <span style="color:#ae81ff">51775773</span>    kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span> Puma concolor californica         <span style="color:#ae81ff">51780669</span> subspecies
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>   Puma concolor improcera         <span style="color:#ae81ff">51780670</span> subspecies
</span></span></code></pre></div><h3 id="the-occurrencedensity-function-was-renamed-to-densitylist-because-it-is-in-the-density-api-service-not-the-occurrence-api-service--you-can-use-densitylist-to-get-a-dataframe-of-total-occurrence-counts-by-one-degree-cell-for-a-single-taxon-country-dataset-data-publisher-or-data-network--just-a-quick-reminder-of-what-the-function-can-do">The <code>occurrencedensity</code> function was renamed to <code>densitylist</code> because it is in the <code>density</code> API service, not the <code>occurrence</code> API service.  You can use <code>densitylist</code> to get a data.frame of total occurrence counts by one-degree cell for a single taxon, country, dataset, data publisher or data network.  Just a quick reminder of what the function can do:</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">densitylist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CA&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  cellid minLatitude maxLatitude minLongitude maxLongitude count
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">46913</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-67</span>          <span style="color:#ae81ff">-66</span>    <span style="color:#ae81ff">44</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">46914</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-66</span>          <span style="color:#ae81ff">-65</span>   <span style="color:#ae81ff">907</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">46915</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-65</span>          <span style="color:#ae81ff">-64</span>   <span style="color:#ae81ff">510</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">46916</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-64</span>          <span style="color:#ae81ff">-63</span>   <span style="color:#ae81ff">645</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">46917</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-63</span>          <span style="color:#ae81ff">-62</span>    <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">46918</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-62</span>          <span style="color:#ae81ff">-61</span>   <span style="color:#ae81ff">143</span>
</span></span></code></pre></div><h3 id="using-a-related-function-density_spplist-you-can-get-a-species-list-by-one-degree-cell-as-well">Using a related function, <code>density_spplist</code>, you can get a species list by one-degree cell as well.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get a species list by cell, choosing one at random</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">density_spplist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CO&#34;</span>, spplist <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;random&#34;</span>)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;Abarema laeta (Benth.) Barneby &amp; J.W.Grimes&#34;</span>
</span></span><span style="display:flex;"><span> [2] <span style="color:#e6db74">&#34;Abuta grandifolia (Mart.) Sandwith&#34;</span>         
</span></span><span style="display:flex;"><span> [3] <span style="color:#e6db74">&#34;Acalypha cuneata Poepp.&#34;</span>                    
</span></span><span style="display:flex;"><span> [4] <span style="color:#e6db74">&#34;Acalypha diversifolia Jacq.&#34;</span>                
</span></span><span style="display:flex;"><span> [5] <span style="color:#e6db74">&#34;Acalypha macrostachya Jacq.&#34;</span>                
</span></span><span style="display:flex;"><span> [6] <span style="color:#e6db74">&#34;Acalypha stachyura Pax&#34;</span>                     
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;Acanthoscelio acutus&#34;</span>                       
</span></span><span style="display:flex;"><span> [8] <span style="color:#e6db74">&#34;Accipiter collaris&#34;</span>                         
</span></span><span style="display:flex;"><span> [9] <span style="color:#e6db74">&#34;Actitis macularia&#34;</span>                          
</span></span><span style="display:flex;"><span>[10] <span style="color:#e6db74">&#34;Adelobotrys klugii Wurdack&#34;</span>                 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># density_spplist(originisocountrycode = &#39;CO&#39;, spplist = &#39;r&#39;) # can</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># abbreviate the `spplist` argument</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get a species list by cell, choosing the one with the greatest no. of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># records</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">density_spplist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CO&#34;</span>, spplist <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;great&#34;</span>)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>]  <span style="color:#75715e"># great is abbreviated from `greatest`</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span> [1] <span style="color:#e6db74">&#34;Acanthaceae Juss.&#34;</span>                
</span></span><span style="display:flex;"><span> [2] <span style="color:#e6db74">&#34;Accipitridae sp.&#34;</span>                 
</span></span><span style="display:flex;"><span> [3] <span style="color:#e6db74">&#34;Accipitriformes/Falconiformes sp.&#34;</span>
</span></span><span style="display:flex;"><span> [4] <span style="color:#e6db74">&#34;Apodidae sp.&#34;</span>                     
</span></span><span style="display:flex;"><span> [5] <span style="color:#e6db74">&#34;Apodidae sp. (large swift sp.)&#34;</span>   
</span></span><span style="display:flex;"><span> [6] <span style="color:#e6db74">&#34;Apodidae sp. (small swift sp.)&#34;</span>   
</span></span><span style="display:flex;"><span> [7] <span style="color:#e6db74">&#34;Arctiinae&#34;</span>                        
</span></span><span style="display:flex;"><span> [8] <span style="color:#e6db74">&#34;Asteraceae Bercht. &amp; J. Presl&#34;</span>    
</span></span><span style="display:flex;"><span> [9] <span style="color:#e6db74">&#34;Asteraceae sp. 1&#34;</span>                 
</span></span><span style="display:flex;"><span>[10] <span style="color:#e6db74">&#34;Asteraceae sp. 6&#34;</span>                 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Can also get a data.frame with counts instead of the species list</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">density_spplist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CO&#34;</span>, spplist <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;great&#34;</span>, listcount <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;counts&#34;</span>)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>, 
</span></span><span style="display:flex;"><span>    ]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>                              names_ count
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                  Acanthaceae Juss.     <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                   Accipitridae sp.     <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  Accipitriformes<span style="color:#f92672">/</span>Falconiformes sp.     <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                       Apodidae sp.     <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     Apodidae <span style="color:#a6e22e">sp. </span>(large swift sp.)     <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     Apodidae <span style="color:#a6e22e">sp. </span>(small swift sp.)     <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                          Arctiinae     <span style="color:#ae81ff">7</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>      Asteraceae Bercht. <span style="color:#f92672">&amp;</span> J. Presl     <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>                   Asteraceae sp. <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                  Asteraceae sp. <span style="color:#ae81ff">6</span>    <span style="color:#ae81ff">10</span>
</span></span></code></pre></div><h3 id="you-can-now-map-point-results-from-fxns-occurrencelist-and-those-from-densitylist-which-plots-them-as-points-or-as-tiles-respectively--point-map-using-output-from-occurrencelist">You can now map point results, from fxns <code>occurrencelist</code> and those from <code>densitylist</code>, which plots them as points or as tiles, respectively.  Point map, using output from occurrencelist.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">occurrencelist</span>(scientificname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Puma concolor&#34;</span>, coordinatestatus <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, 
</span></span><span style="display:flex;"><span>    maxresults <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, latlongdf <span style="color:#f92672">=</span> T)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(input <span style="color:#f92672">=</span> out)  <span style="color:#75715e"># make a map, plotting on world map</span>
</span></span></code></pre></div><p><img loading="lazy" src="/gbifmap1.png" alt="center"  />
</p>
<h3 id="point-map-using-output-from-occurrencelist-with-many-species-plotted-as-different-colors">Point map, using output from occurrencelist, with many species plotted as different colors</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>splist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Accipiter erythronemius&#34;</span>, <span style="color:#e6db74">&#34;Junco hyemalis&#34;</span>, <span style="color:#e6db74">&#34;Aix sponsa&#34;</span>, <span style="color:#e6db74">&#34;Buteo regalis&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(splist, <span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">occurrencelist</span>(x, coordinatestatus <span style="color:#f92672">=</span> T, maxresults <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>, 
</span></span><span style="display:flex;"><span>    latlongdf <span style="color:#f92672">=</span> T))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/gbifmap2.png" alt="center"  />
</p>
<h3 id="tile-map-using-output-from-densitylist-using-results-in-canada-only">Tile map, using output from densitylist, using results in Canada only.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">densitylist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CA&#34;</span>)  <span style="color:#75715e"># data for Canada</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out2)  <span style="color:#75715e"># on world map</span>
</span></span></code></pre></div><p><img loading="lazy" src="/gbifmap31.png" alt="center"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out2, region <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Canada&#34;</span>)  <span style="color:#75715e"># on Canada map</span>
</span></span></code></pre></div><p><img loading="lazy" src="/gbifmap32.png" alt="NA"  />
</p>
<hr>
<h3 id="we-can-also-query-by-higher-taxonomic-rankings-and-map-all-lower-species-within-that-ranking-above-we-queried-by-scientificname-but-we-can-also-query-by-higher-taxonomy-7071443-is-the-taxonconceptkey-for-bacillariophyceae-a-class-which-includes-many-lower-species">We can also query by higher taxonomic rankings, and map all lower species within that ranking. Above we queried by scientificname, but we can also query by higher taxonomy. 7071443 is the taxonconceptkey for &lsquo;Bacillariophyceae&rsquo;, a Class which includes many lower species.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">densitylist</span>(taxonconceptKey <span style="color:#f92672">=</span> <span style="color:#ae81ff">7071443</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/algae.png" alt="center"  />
</p>
<h3 id="seminym-asked-about-querying-by-area-you-can-query-by-area-though-slightly-differently-for-occurrencelist-and-densitylist-functions-for-occurrencelist-you-can-search-using-min-and-max-lat-and-long-values-and-min-an-max-altitude-pretty-cool-eh">seminym asked about querying by area. You can query by area, though slightly differently for occurrencelist and densitylist functions. For occurrencelist you can search using min and max lat and long values (and min an max altitude, pretty cool, eh).</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get occurrences or density by area, using min/max lat/long coordinates</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">occurrencelist</span>(minlatitude <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>, maxlatitude <span style="color:#f92672">=</span> <span style="color:#ae81ff">35</span>, minlongitude <span style="color:#f92672">=</span> <span style="color:#ae81ff">-100</span>, 
</span></span><span style="display:flex;"><span>    maxlongitude <span style="color:#f92672">=</span> <span style="color:#ae81ff">-95</span>, coordinatestatus <span style="color:#f92672">=</span> T, maxresults <span style="color:#f92672">=</span> <span style="color:#ae81ff">5000</span>, latlongdf <span style="color:#f92672">=</span> T)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Using `geom_point`</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out, <span style="color:#e6db74">&#34;state&#34;</span>, <span style="color:#e6db74">&#34;texas&#34;</span>, geom_point)
</span></span></code></pre></div><p><img loading="lazy" src="/byarea_occurr1.png" alt="center"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Using geom_jitter to move the points apart from one another</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out, <span style="color:#e6db74">&#34;state&#34;</span>, <span style="color:#e6db74">&#34;texas&#34;</span>, geom_jitter, <span style="color:#a6e22e">position_jitter</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>))
</span></span></code></pre></div><p><img loading="lazy" src="/byarea_occurr2.png" alt="NA"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># And move points a lot</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gbifmap</span>(out, <span style="color:#e6db74">&#34;state&#34;</span>, <span style="color:#e6db74">&#34;texas&#34;</span>, geom_jitter, <span style="color:#a6e22e">position_jitter</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>))
</span></span></code></pre></div><p><img loading="lazy" src="/byarea_occurr3.png" alt="NA"  />
</p>
<h3 id="and-you-can-query-by-area-in-densitylist-by-specifying-a-place-using-the-originisocountrycode-argument-as-done-in-an-above-example--just-showing-the-head-of-the-dataframe-here">And you can query by area in <code>densitylist</code> by specifying a place using the <code>originisocountrycode</code> argument (as done in an above example).  Just showing the head of the data.frame here.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get density by place, note that you can&#39;t use the lat and long arguments</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># in densitylist</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">densitylist</span>(originisocountrycode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CA&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  cellid minLatitude maxLatitude minLongitude maxLongitude count
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">46913</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-67</span>          <span style="color:#ae81ff">-66</span>    <span style="color:#ae81ff">44</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">46914</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-66</span>          <span style="color:#ae81ff">-65</span>   <span style="color:#ae81ff">907</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">46915</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-65</span>          <span style="color:#ae81ff">-64</span>   <span style="color:#ae81ff">510</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">46916</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-64</span>          <span style="color:#ae81ff">-63</span>   <span style="color:#ae81ff">645</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">46917</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-63</span>          <span style="color:#ae81ff">-62</span>    <span style="color:#ae81ff">56</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">46918</span>          <span style="color:#ae81ff">40</span>          <span style="color:#ae81ff">41</span>          <span style="color:#ae81ff">-62</span>          <span style="color:#ae81ff">-61</span>   <span style="color:#ae81ff">143</span>
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-10-08-rgbif-newfxns.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-10-08-rgbif-newfxns.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Vertnet - getting vertebrate museum record data and a quick map</title>
      <link>http://localhost:1313/2012/09/rvertnet/</link>
      <pubDate>Wed, 19 Sep 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/09/rvertnet/</guid>
      <description>We (rOpenSci) started a repo to wrap the API for VertNet, an open access online database of vertebrate specimen records across many collection holders. Find the open source code here - please contribute if you are so inclined. We had a great Google Summer of Code student, Vijay Barve contributing to the repo this summer, so it is getting close to being CRAN-able.
Most of the functions in the repo get you the raw data, but there were no functions to visualize the data.</description><content:encoded><![CDATA[ ]]>
               <![CDATA[<p>We (<a href="http://ropensci.org/">rOpenSci</a>) started a repo to wrap the API for <a href="http://vertnet.org/index.php">VertNet</a>, an open access online database of vertebrate specimen records across many collection holders. Find the open source code <a href="https://github.com/ropensci/rvertnet">here</a> - please contribute if you are so inclined.  We had a great Google Summer of Code student, <a href="http://vijaybarve.wordpress.com/">Vijay Barve</a> contributing to the repo this summer, so it is getting close to being CRAN-able.</p>
<p>Most of the functions in the repo get you the raw data, but there were no functions to visualize the data.  Since much of the data records of latitude and longitude data, maps are a natural visualization to use.</p>
<p>What follows is a quick example of using the basic <code>vertmap</code> function.</p>
<h3 id="install-rvertnet">Install <code>rvertnet</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;rvertnet&#39;, &#39;ropensci&#39;) # uncomment if not installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># already</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(rvertnet)
</span></span></code></pre></div><h3 id="get-data">Get data</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">vertoccurrence</span>(q <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;larva&#34;</span>, num <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>)  <span style="color:#75715e"># get records on keyword &#39;larva&#39;, limit to 100</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">nrow</span>(out)  <span style="color:#75715e"># how many rows?</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#ae81ff">100</span>
</span></span></code></pre></div><h3 id="map">Map</h3>
<p>Now map it using <code>vertmap</code>.  This is a very basic function: it simply cleans up the input data.frame, removing rows without lat/long data, and providing warnings when the input data.frame is not in the correct format.  <code>vertmap</code> uses the <code>ggplot2</code> framework for the map.  If you want to make you own map please do so -  this is just a simple fxn to get you started if you want to take a quick look at the data.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">vertmap</span>(input <span style="color:#f92672">=</span> out)  <span style="color:#75715e"># make a map using vertmap</span>
</span></span></code></pre></div><p><img loading="lazy" src="/vertmap.png" alt="center"  />
</p>
<hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-09-19-rvertnet.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-09-19-rvertnet.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>, and nice knitr highlighting/etc. in in <a href="http://rstudio.org/">RStudio</a>.</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
