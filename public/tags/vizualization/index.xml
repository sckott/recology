<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Vizualization on Recology</title>
    <link>http://localhost:1313/tags/vizualization/</link>
    <description>Recent content in Vizualization on Recology</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 22 May 2014 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/vizualization/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Logistic plot reboot</title>
      <link>http://localhost:1313/2014/05/logplotreboot/</link>
      <pubDate>Thu, 22 May 2014 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2014/05/logplotreboot/</guid>
      <description><![CDATA[<p>Someone asked about plotting something like this today</p>
<p>I <a href="/posts/2012-01-10-logistic-regression-barplot-fig/">wrote a few functions previously</a> to do something like this. However, since then <code>ggplot2</code> has changed, and one of the functions no longer works.</p>
<p>Hence, I fixed <code>opts()</code> to <code>theme()</code>, <code>theme_blank()</code> to <code>element_blank()</code>, and <code>panel.background = element_blank()</code> to <code>plot.background = element_blank()</code> to get the histograms to show up with the line plot and not cover it.</p>
<p>The new functions:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>loghistplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get bin numbers</span>
</span></span><span style="display:flex;"><span>  bin_no <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">hist</span>(data<span style="color:#f92672">$</span>x, plot <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)<span style="color:#f92672">$</span>counts) <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  theme_loghist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.text.y <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.text.x <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          axis.ticks <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.border <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>())
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  b <span style="color:#f92672">&lt;-</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[1], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">0</span>,bin_no)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    theme_loghist <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ggplot</span>(data[data<span style="color:#f92672">$</span>y <span style="color:#f92672">==</span> <span style="color:#a6e22e">unique</span>(data<span style="color:#f92672">$</span>y)[2], ], <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_histogram</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grey&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_y_continuous</span>(trans<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reverse&#39;</span>, limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(bin_no,<span style="color:#ae81ff">0</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    theme_loghist <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;\n&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">grid.newpage</span>()
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pushViewport</span>(<span style="color:#a6e22e">viewport</span>(layout <span style="color:#f92672">=</span> <span style="color:#a6e22e">grid.layout</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  vpa_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpb_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>  vpc_ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">viewport</span>(width <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, height <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, x <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(b, vp <span style="color:#f92672">=</span> vpb_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(c, vp <span style="color:#f92672">=</span> vpc_)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">print</span>(a, vp <span style="color:#f92672">=</span> vpa_)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>logpointplot  <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(data) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">names</span>(data) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;x&#39;</span>,<span style="color:#e6db74">&#39;y&#39;</span>) <span style="color:#75715e"># rename columns</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># get min and max axis values</span>
</span></span><span style="display:flex;"><span>  min_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  max_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>x)
</span></span><span style="display:flex;"><span>  min_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>  max_y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">max</span>(data<span style="color:#f92672">$</span>y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># create plots</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(data, <span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> x, y <span style="color:#f92672">=</span> y)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme_bw</span>(base_size<span style="color:#f92672">=</span><span style="color:#ae81ff">16</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_point</span>(size <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.5</span>, position <span style="color:#f92672">=</span> <span style="color:#a6e22e">position_jitter</span>(w<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>, h<span style="color:#f92672">=</span><span style="color:#ae81ff">0.02</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_smooth</span>(method <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;glm&#34;</span>, family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;binomial&#34;</span>, se <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>,
</span></span><span style="display:flex;"><span>                colour<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;black&#39;</span>, size<span style="color:#f92672">=</span><span style="color:#ae81ff">1.5</span>, alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.3</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">scale_x_continuous</span>(limits<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(min_x,max_x)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span>(panel.grid.major <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.grid.minor<span style="color:#f92672">=</span><span style="color:#a6e22e">element_blank</span>(),
</span></span><span style="display:flex;"><span>          panel.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_blank</span>()) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Probability\n&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;\nYour X Variable&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Install <code>ggplot2</code> and <code>gridExtra</code> if you don&rsquo;t have them:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>,<span style="color:#e6db74">&#34;gridExtra&#34;</span>), repos <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://cran.rstudio.com&#34;</span>)
</span></span></code></pre></div><p>And their use:</p>
<p><strong>Logistic histogram plots</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(data<span style="color:#f92672">=</span>mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-5.png" alt="plot of chunk unnamed-chunk-5"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-6.png" alt="plot of chunk unnamed-chunk-6"  />
</p>
<p><strong>Logistic point plots</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(data<span style="color:#f92672">=</span>mtcars[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;mpg&#34;</span>,<span style="color:#e6db74">&#34;vs&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-7.png" alt="plot of chunk unnamed-chunk-7"  />
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">loghistplot</span>(movies[,<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;rating&#34;</span>,<span style="color:#e6db74">&#34;Action&#34;</span>)])
</span></span></code></pre></div><p><img loading="lazy" src="/2014-05-22-logplotreboot/unnamed-chunk-8.png" alt="plot of chunk unnamed-chunk-8"  />
</p>
]]></description>
    </item>
  </channel>
</rss>
