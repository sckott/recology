<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Taxonomy on Recology</title>
    <link>http://localhost:1313/tags/taxonomy/</link>
    <description>Recent content in Taxonomy on Recology</description>
    <generator>Hugo -- 0.144.2</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 10 Sep 2020 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/taxonomy/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>stories behind archived packages</title>
      <link>http://localhost:1313/2020/09/archived-pkgs/</link>
      <pubDate>Thu, 10 Sep 2020 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2020/09/archived-pkgs/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;Update on 2021-02-09: I&amp;rsquo;ve archived 8 more packages. Post below updated&lt;/p&gt;&lt;/blockquote&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;p&gt;Code is often arranged in packages for any given language. Packages
are often cataloged in a package registry of some kind: NPM for
node, crates.io for Rust, etc. For R, that registry is either
&lt;a href=&#34;https://cran.r-project.org/&#34;&gt;CRAN&lt;/a&gt; or &lt;a href=&#34;https://bioconductor.org/&#34;&gt;Bioconductor&lt;/a&gt;
(for the most part).&lt;/p&gt;
&lt;p&gt;CRAN has the concept of an archived package. That is, the namespace
for a package (&lt;code&gt;foo&lt;/code&gt;) is still in the registry (and can not be used again),
but the package is archived - no longer gets updated and checks
I think are no longer performed.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<blockquote>
<p>Update on 2021-02-09: I&rsquo;ve archived 8 more packages. Post below updated</p></blockquote>
<!-- raw HTML omitted -->
<p>Code is often arranged in packages for any given language. Packages
are often cataloged in a package registry of some kind: NPM for
node, crates.io for Rust, etc. For R, that registry is either
<a href="https://cran.r-project.org/">CRAN</a> or <a href="https://bioconductor.org/">Bioconductor</a>
(for the most part).</p>
<p>CRAN has the concept of an archived package. That is, the namespace
for a package (<code>foo</code>) is still in the registry (and can not be used again),
but the package is archived - no longer gets updated and checks
I think are no longer performed.</p>
<p>We rarely hear the stories behind how software gets laid to rest. What are
the most common reasons for software to be abandoned?</p>
<h2 id="my-cran-archived-packages">My CRAN archived packages</h2>
<p>First, my archived CRAN packages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(pkgsearch)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(dplyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(data.table)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tibble)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#a6e22e">cran_events</span>(releases <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, archivals <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">4000L</span>)
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> <span style="color:#a6e22e">lapply</span>(x, <span style="color:#66d9ef">function</span>(w)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tibble</span>(pkg<span style="color:#f92672">=</span>w<span style="color:#f92672">$</span>name, maintainer<span style="color:#f92672">=</span>w<span style="color:#f92672">$</span>package<span style="color:#f92672">$</span>Maintainer))
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> <span style="color:#a6e22e">rbindlist</span>(res, use.names <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_tibble</span>(df)
</span></span><span style="display:flex;"><span>scott <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(df, <span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;chamberlain&#34;</span>, maintainer, ignore.case <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(pkg) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data.frame</span>()
</span></span><span style="display:flex;"><span>scott
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;            pkg</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      originr</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       geoaxe</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3         lawn</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     pleiades</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5       geoops</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6          rif</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7     rbraries</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8        ccafs</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9     rjsonapi</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10       rdpla</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 seaaroundus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12    crevents</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13      etseed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14      rtimes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15   rsunlight</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16        nneo</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17     binomen</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18        solr</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 19      enigma</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 20         alm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 21    ropensnp</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 22      govdat</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 23  spoccutils</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 24     rgauges</span>
</span></span></code></pre></div><p>I have 24 archived packages on CRAN.</p>
<h2 id="stories">Stories</h2>
<p>The following are brief stories of why each package was archived on CRAN.</p>
<ul>
<li><strong>spoccutils</strong>: was a package of utility functions that didn&rsquo;t quite fit within the scope of another package <a href="https://github.com/ropensci/spocc">spocc</a>. It was renamed to <a href="https://github.com/ropensci/mapr">mapr</a>. I suppose I could have asked CRAN to change the name, hmmm</li>
<li><strong><a href="https://github.com/ropensci-archive/rgauges">rgauges</a></strong>: was a client for the <a href="https://get.gaug.es/">Gaug.es</a> website analytics API - we started the package to gather data on visitors to the rOpenSci website. Eventually we stopped using Gaug.es and then it didn&rsquo;t make sense to maintain the package, so it was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/alm">alm</a></strong>: was a client for a generic article-level metrics web service framework called Lagotto. In the early days of rOpenSci we were quite engaged with the community of folks working on article-level metrics. If I remember correctly, Lagotto usage slowed down and wasn&rsquo;t used much so I gave up on maintaining <code>alm</code></li>
<li><strong>ropensnp</strong>: was a client for the service <a href="https://opensnp.org/">OpenSNP</a>. There were other sources of SNP data that I thought would be nice to access all from one package; so a new package (<a href="https://github.com/ropensci/rsnps">rsnps</a>) was created and incorporated functions for OpenSNP and <code>ropensnp</code> was archived.</li>
<li><strong>solr</strong>: was a package client for the <a href="https://lucene.apache.org/solr/">Apache Solr</a> database. At some point it got a major overhual and I decided to change the package name to <a href="https://github.com/ropensci/solrium">solrium</a>.</li>
<li><strong><a href="https://github.com/ropensci/binomen">binomen</a></strong>: aim of the package was functions for creating taxonomic classes/objects and functions for manipulating taxonomic data, sort of like dplyr. Evolution of ideas in <code>binomen</code> gave way to a new package <a href="https://github.com/ropensci/taxa">taxa</a>, now maintained by <a href="https://github.com/zachary-foster">Zach Foster</a>.</li>
<li><strong><a href="https://github.com/ropensci-archive/nneo">nneo</a></strong>: was a client for APIs for <a href="https://data.neonscience.org/data-api/">NEON</a> data. At some point I stumbled upon someone else from NEON making essentially the same package, so I archived mine.</li>
<li><strong><a href="https://github.com/ropensci-archive/etseed">etseed</a></strong>: was a package for interacting with the distributed key-value store <a href="https://etcd.io/">etcd</a>. I was on a kick at the time of making R packages for databases, and saw a missing package I thought. After getting familiar with etcd, I realized I would probably never use it myself, and further, it probably didn&rsquo;t make sense to interact with etcd from R anyway.</li>
<li><strong><a href="https://github.com/ropensci-archive/crevents">crevents</a></strong>: <a href="https://www.crossref.org/">Crossref</a> mints DOIs for scholarly articles (among other works). A neat service they started was collecting and making searchable the &ldquo;events&rdquo; on DOIs - that is, the links pointing to DOIs, e.g., from Twitter, etc. The service at some point became very unreliable (was often down), so the package was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/seaaroundus">seaaroundus</a></strong>: <a href="https://www.seaaroundus.org/">Seaaroundus</a> maintains fisheries and fisheries-related data. I was helping maintain an R package for the API, but it was a difficult one to maintain, and most users simply sent emails requesting dumps of data anyway - so the package was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rdpla">rdpla</a></strong>: The <a href="https://dp.la/">Digital Public Library of America</a> is a very cool organization that is similar to Crossref in a way, in that they centralize metadata about &ldquo;things&rdquo;; metadata on museum collections for DPLA and scholarly works for Crossref. I figured many researchers would enjoy being able to easily get metadata from DPLA for research on museum collections. In the end not many people used the package.</li>
<li><strong><a href="https://github.com/ropensci-archive/rjsonapi">rjsonapi</a></strong>: <a href="https://jsonapi.org/">JSON:API</a> is a cool idea - a sort of specification for building APIs in JSON. REST APIs are incredibly variable - this is an attempto standardize it a bit. I thought perhaps JSON:API would be adopted widely and that an R client would be useful for consuming JSON:API services - however, I&rsquo;ve seen only very few APIs using JSON:API.</li>
<li><strong><a href="https://github.com/ropensci-archive/originr">originr</a></strong>: The idea with <code>originr</code> originally was to centralize in one package tools for biologists to get data on &ldquo;nativity&rdquo; of species in their studies: are species X and Y native to A, B, and C countries. I was lucky to get a collaborator (<a href="https://github.com/ibartomeus">Ignasi Bartomeus</a>) to help on that package. The package simply was not used much at all, and the data sources used were very flaky, making for a buggy user experience.</li>
<li><strong><a href="https://github.com/ropensci-archive/geoaxe">geoaxe</a></strong>: This package always had a very narrow scope. It was created to solve a problem in two widely used packages: <a href="https://github.com/ropensci/rgbif">rgbif</a> and <a href="https://github.com/ropensci/spocc">spocc</a>. In both of those packages we needed to take user input of a Well-known text (WKT) string representing a polygon in which the user wanted to search for something in a remote data source. And with that WKT we would chop up the polygon into smaller polygons to be submitted in multiple (spatial) requests instead of one very large (spatial) request. I didn&rsquo;t want to depend on the heavy <code>rgdal</code> depenency, so I cooked up <code>geoaxe</code> that only used <code>sp</code> and <code>rgeos</code>. <code>geoaxe</code> lasted for many years, but there&rsquo;s better tools out there now, so it was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/lawn">lawn</a></strong>: This package started out when I was trying to see what we could do in spatial R packages, specifically around GeoJSON. Jeroen had recently created the <a href="https://github.com/jeroen/v8">V8</a> package so you could leverage bundled Javascript libraries in R. <a href="https://turfjs.org/">turf.js</a> was a neat project for Javascript for spatial analysis and built in a modular, approachable manner - I thought. So collaborator <a href="https://github.com/jhollist">Jeff Hollister</a> and I wrapped turf.js in R. It was not used that much - and especially not used much after the rise of sf and related &ldquo;tidy&rdquo; spatial packages, leading to archival.</li>
<li><strong><a href="https://github.com/sckott/geoops">geoops</a></strong>: This package was a follow on from <code>lawn</code>, in exploring more GeoJSON focused work. I wanted to learn how to make an R package mostly out of C++, with just a thin layer of R on top. Like <code>lawn</code>, <code>geoops</code> was not used much at all as far as I could tell, maybe partly because it focused only on GeoJSON - but this was also during the rise of <code>sf</code> and friends. I moved it to my own personal account just as a little C++ in R playground in case I want to brush up on that.</li>
<li><strong><a href="https://github.com/ropensci-archive/pleiades">pleiades</a></strong>: I don&rsquo;t remember how or why this package started. It was a client for Pleiades (<a href="https://pleiades.stoa.org/home">https://pleiades.stoa.org/home</a>), a database of historical geographic information about the ancient world. It was used very, very little as far as I could tell - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rif">rif</a></strong>: This package was started after a some exploration of what R work we (rOpenSci) could do in the neuroscience field. It was a client for the Neuroscience Information Framework (<a href="https://neuinfo.org/">https://neuinfo.org/</a>), a database of neuroscience information. Another package not used - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rbraries">rbraries</a></strong>: This package started because I thought rOpenSci would make use of the metadata around R package downloads/etc. that <a href="https://libraries.io/">https://libraries.io/</a> collected. We never ended up using the data - and no one seemed to use the package - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/ccafs">ccafs</a></strong>: A client for Climate Change, Agriculture, and Food Security (CCAFS) General Circulation Models (GCM) data (<a href="https://www.ccafs-climate.org/">https://www.ccafs-climate.org/</a>). All I could find for motivation for this package was an email with someone where they shared a few links to different sources of climate data - then apparently this package was born shortly thereafter. It wasn&rsquo;t used much at all - so was archived.</li>
</ul>
<p>The following four packages were all R clients for sources of government open data - see the organization <a href="https://github.com/ropengov">rOpenGov</a> for R packages on government data.</p>
<ul>
<li><strong>govdat</strong>: was split into two packages (<code>rsunlight</code> and <code>rtimes</code>) and <code>govdat</code> was archived</li>
<li><strong><a href="https://github.com/rOpenGov/rsunlight">rsunlight</a></strong>: was a client for many APIs of the organization <a href="https://sunlightfoundation.com/api/">Sunlight Labs</a> - part of the reason for archiving this package was the disintegration of Sunlight Labs, which made the previously sensible organization of many APIs into one R package not sensible anymore. Also, government data was considered out of scope for our work at rOpenSci.</li>
<li><strong><a href="https://github.com/rOpenGov/rtimes">rtimes</a></strong>: was a client for a number of the government data APIs from the New York Times. One reason for abandoning this package was that NYT almost never responded to questions/feedback on their APIs. Another reason was the aforementioned focus of rOpenSci.</li>
<li><strong><a href="https://github.com/rOpenGov/enigma">enigma</a></strong>: was a client for the Enigma API - the company I think was first focused on making open government data easier to access - as well as data on companies. I didn&rsquo;t really use the package at all though, and there wasn&rsquo;t much usage of the package, so archived it.</li>
</ul>
<p>As a summary of the lists above, a list of the major reasons each package was archived:</p>
<ul>
<li>Not used
<ul>
<li>rjsonapi</li>
<li>rdpla</li>
<li>etseed</li>
<li>enigma</li>
<li>rgauges</li>
<li>rtimes</li>
<li>originr</li>
<li>geaoxe</li>
<li>pleiades</li>
<li>rif</li>
<li>rbraries</li>
<li>ccafs</li>
</ul>
</li>
<li>The fall of the GeoJSON-verse <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<ul>
<li>lawn</li>
<li>geoops</li>
</ul>
</li>
<li>Bad/retired service
<ul>
<li>rtimes</li>
<li>seaaroundus</li>
<li>crevents</li>
<li>alm</li>
</ul>
</li>
<li>Name change
<ul>
<li>solr</li>
<li>ropensnp</li>
<li>spoccutils</li>
</ul>
</li>
<li>Evolution to new package
<ul>
<li>binomen</li>
<li>govdat</li>
</ul>
</li>
<li>Duplicated work
<ul>
<li>nneo</li>
</ul>
</li>
<li>Out of scope
<ul>
<li>rsunlight</li>
</ul>
</li>
</ul>
<p>Footnotes:</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>although, <code>geojsonsf</code> is very successful so I think my projects were just crap I guess :)&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
]]></content:encoded>
    </item>
    <item>
      <title>taxizedb: an update</title>
      <link>http://localhost:1313/2020/08/taxizedb-update/</link>
      <pubDate>Mon, 17 Aug 2020 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2020/08/taxizedb-update/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://github.com/ropensci/taxizedb&#34;&gt;taxizedb&lt;/a&gt; arose from pain in using &lt;a href=&#34;https://github.com/ropensci/taxize&#34;&gt;taxize&lt;/a&gt; when dealing with large amounts of data in a single request or doing a lot of requests of any data size. &lt;a href=&#34;https://github.com/ropensci/taxize&#34;&gt;taxize&lt;/a&gt; works with remote data sources on the web, so there&amp;rsquo;s a number of issues that can slow the response down: internet speed, server response speed (was a response already cached or not; or do they even use caching), etc.&lt;/p&gt;
&lt;p&gt;The idea with &lt;a href=&#34;https://github.com/ropensci/taxizedb&#34;&gt;taxizedb&lt;/a&gt; was to allow users to do the same things as taxize allows, but much faster by accessing the entire database for a data source on their own computer. The previous versions of taxizedb used a variety of different databases (MySQL/MariaDB, PostgreSQL, SQLite), so the technical barrier to entry was pretty high. In the newest version just released, we&amp;rsquo;ve drastically simplified the database situation, among other things.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p><a href="https://github.com/ropensci/taxizedb">taxizedb</a> arose from pain in using <a href="https://github.com/ropensci/taxize">taxize</a> when dealing with large amounts of data in a single request or doing a lot of requests of any data size. <a href="https://github.com/ropensci/taxize">taxize</a> works with remote data sources on the web, so there&rsquo;s a number of issues that can slow the response down: internet speed, server response speed (was a response already cached or not; or do they even use caching), etc.</p>
<p>The idea with <a href="https://github.com/ropensci/taxizedb">taxizedb</a> was to allow users to do the same things as taxize allows, but much faster by accessing the entire database for a data source on their own computer. The previous versions of taxizedb used a variety of different databases (MySQL/MariaDB, PostgreSQL, SQLite), so the technical barrier to entry was pretty high. In the newest version just released, we&rsquo;ve drastically simplified the database situation, among other things.</p>
<p><a href="https://github.com/ropensci/taxadb">taxadb</a> was developed as an alternative approach to taxizedb and should also be considered when dealing with taxonomic names. It takes a different approach for the data, with tabular files hosted on GitHub releases, but is similar in that after downloading the data is put into a SQL database, SQLite by default (with other options for databases). taxadb user facing functions are different from those in taxizedb, and largely don&rsquo;t overlap.</p>
<p>taxizedb quick links:</p>
<ul>
<li><a href="https://github.com/ropensci/taxizedb">taxizedb repo</a></li>
<li><a href="https://cloud.r-project.org/web/packages/taxizedb/">taxizedb on cran</a></li>
<li><a href="https://ropensci.github.io/taxizedb/">taxizedb docs</a></li>
</ul>
<p>Install the latest version, if you don&rsquo;t get <code>v0.2.0</code> with</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;taxizedb&#34;</span>)
</span></span></code></pre></div><p>then use</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;taxizedb&#34;</span>, repos <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://dev.ropensci.org&#34;</span>)
</span></span></code></pre></div><p>Load the package</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxizedb)
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="all-sqlite">All SQLite!</h2>
<p>SQLite is shipped in nearly every device these days, so taxizedb now uses only SQLite for the database backend for each data source. Every person that installs taxizedb should have SQLite already installed. In addition, there&rsquo;s no usernames/passwords/ports to setup with. How we&rsquo;ve accomplished this is partly through automation:</p>
<ul>
<li>NCBI: SQLite built within R from tabular files</li>
<li>ITIS: they provide a SQLite dump</li>
<li>Plantlist: is no longer updated; we build a SQLite manually from csv files</li>
<li>COL: a SQLite is built once a day via GitHub Actions</li>
<li>GBIF: a SQLite is built once a day via GitHub Actions</li>
<li>Wikidata: SQLite built within R from a tabular file</li>
<li>World Flora Online: SQLite built within R from a tabular file</li>
</ul>
<p>Some of the databases have indices to speed up queries, making them a bit larger relative to no indices, but these days most people likely are willing to use up a little more disk space on their computer to have faster queries.</p>
<!-- raw HTML omitted -->
<h2 id="new-data-sources">New data sources</h2>
<p>Three new data sources were added:</p>
<ul>
<li><a href="https://www.ncbi.nlm.nih.gov/taxonomy">NCBI taxonomy</a> - all of this work was done by <a href="https://github.com/arendsee">Zebulun Arendsee</a></li>
<li><a href="https://www.worldfloraonline.org/">World Flora Online</a> - the replacement for The Plant List</li>
<li><a href="https://zenodo.org/record/1213477">Wikidata</a> - the table <code>wikidata-taxon-info</code>, extracted taxon objects from Wikidata, last updated April 2018, on Zenodo</li>
</ul>
<!-- raw HTML omitted -->
<h2 id="new-functions-taxize-equivalents">New functions: taxize equivalents</h2>
<p>Three new high level functions matching those in taxize were added: <code>children</code>, <code>classification</code>, <code>downstream</code>. The taxize version of those functions are still good for smaller requests, but with larger requests, its probably best to use taxizedb. The most common problem where taxize becomes frustrating is with <code>downstream</code> where a user wants all species within a high taxonomic rank like phylum. The original work for these functions was done by <a href="https://github.com/arendsee">Zebulun Arendsee</a>.</p>
<p>Here&rsquo;s a comparison of taxize vs. taxizedb with <code>downstream</code> - getting all species within the genus <em>Bombus</em> (bumble bees)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>id_tx <span style="color:#f92672">&lt;-</span> taxize<span style="color:#f92672">::</span><span style="color:#a6e22e">get_tsn</span>(<span style="color:#e6db74">&#34;Bombus&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">system.time</span>(taxize<span style="color:#f92672">::</span><span style="color:#a6e22e">downstream</span>(id_tx, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;itis&#34;</span>, downto <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;species&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    user  system elapsed </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   2.144   0.130  20.533</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id_txdb <span style="color:#f92672">&lt;-</span> taxizedb<span style="color:#f92672">::</span><span style="color:#a6e22e">name2taxid</span>(<span style="color:#e6db74">&#39;Bombus&#39;</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;itis&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">system.time</span>(taxizedb<span style="color:#f92672">::</span><span style="color:#a6e22e">downstream</span>(id_txdb, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;itis&#34;</span>, downto <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;species&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    user  system elapsed </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   0.132   0.051   0.186</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>In addition, three new &ldquo;mapping&rdquo; functions were added that are similar to those in taxize, but with different names: <code>name2taxid</code> (scientific or common name to taxonomy ID); <code>taxid2name</code> (taxonomy ID to scientific name); <code>taxid2rank</code> (taxonomy ID to rank).</p>
<p>We saw <code>name2taxid</code> above. Below we get the taxonomic ID for COL, ITIS and GBIF for <em>Bombus</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">name2taxid</span>(<span style="color:#e6db74">&#39;Bombus&#39;</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;col&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;3993765&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name2taxid</span>(<span style="color:#e6db74">&#39;Bombus&#39;</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;itis&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;154397&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name2taxid</span>(<span style="color:#e6db74">&#39;Bombus&#39;</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;gbif&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;1340278&#34;</span>
</span></span></code></pre></div><p>Get the scientific name from a taxonomic ID</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">taxid2name</span>(<span style="color:#ae81ff">3993765</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;col&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Bombus&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">taxid2rank</span>(<span style="color:#ae81ff">3993765</span>, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;col&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;genus&#34;</span>
</span></span></code></pre></div><p>These functions are quite fast too:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> taxize<span style="color:#f92672">::</span><span style="color:#a6e22e">names_list</span>(rank <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;species&#34;</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10000L</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">system.time</span>(<span style="color:#a6e22e">name2taxid</span>(x, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;gbif&#34;</span>, out_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;summary&#34;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    user  system elapsed </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   0.096   0.206   1.053</span>
</span></span></code></pre></div><!-- raw HTML omitted -->
<h2 id="thoughts">Thoughts?</h2>
<p>Get in touch if you have any feedback at <a href="https://github.com/ropensci/taxizedb/issues">https://github.com/ropensci/taxizedb/issues</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>binomen - Tools for slicing and dicing taxonomic names</title>
      <link>http://localhost:1313/2015/12/binomen-taxonomy-tools/</link>
      <pubDate>Tue, 08 Dec 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/12/binomen-taxonomy-tools/</guid>
      <description>&lt;p&gt;The first version of &lt;code&gt;binomen&lt;/code&gt; is now up on &lt;a href=&#34;https://cran.rstudio.com/web/packages/binomen&#34;&gt;CRAN&lt;/a&gt;. It provides various taxonomic classes for defining a single taxon, multiple taxa, and a taxonomic data.frame. It is designed as a companion to &lt;a href=&#34;https://github.com/ropensci/taxize&#34;&gt;taxize&lt;/a&gt;, where you can get taxonomic data on taxonomic names from the web.&lt;/p&gt;
&lt;p&gt;The classes (S3):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;taxon&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;taxonref&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;taxonrefs&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;binomial&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;grouping&lt;/code&gt; (i.e., classification - used different term to avoid conflict with classification in &lt;code&gt;taxize&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, the &lt;code&gt;binomial&lt;/code&gt; class is defined by a genus, epithet, authority, and optional full species name and canonical version.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>The first version of <code>binomen</code> is now up on <a href="https://cran.rstudio.com/web/packages/binomen">CRAN</a>. It provides various taxonomic classes for defining a single taxon, multiple taxa, and a taxonomic data.frame. It is designed as a companion to <a href="https://github.com/ropensci/taxize">taxize</a>, where you can get taxonomic data on taxonomic names from the web.</p>
<p>The classes (S3):</p>
<ul>
<li><code>taxon</code></li>
<li><code>taxonref</code></li>
<li><code>taxonrefs</code></li>
<li><code>binomial</code></li>
<li><code>grouping</code> (i.e., classification - used different term to avoid conflict with classification in <code>taxize</code>)</li>
</ul>
<p>For example, the <code>binomial</code> class is defined by a genus, epithet, authority, and optional full species name and canonical version.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">binomial</span>(<span style="color:#e6db74">&#34;Poa&#34;</span>, <span style="color:#e6db74">&#34;annua&#34;</span>, authority<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;L.&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>binomial<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  genus<span style="color:#f92672">:</span> Poa
</span></span><span style="display:flex;"><span>  epithet<span style="color:#f92672">:</span> annua
</span></span><span style="display:flex;"><span>  canonical<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  species<span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>  authority<span style="color:#f92672">:</span> L.
</span></span></code></pre></div><p>The package has a suite of functions to work on these taxonomic classes:</p>
<ul>
<li><code>gethier()</code> - get hierarchy from a <code>taxon</code> class</li>
<li><code>scatter()</code> - make each row in taxonomic data.frame (<code>taxondf</code>) a separate <code>taxon</code> object within a single <code>taxa</code> object</li>
<li><code>assemble()</code> - make a <code>taxa</code> object into a <code>taxondf</code> data.frame</li>
<li><code>pick()</code> - pick out one or more taxonomic groups</li>
<li><code>pop()</code> - pop out (drop) one or more taxonomic groups</li>
<li><code>span()</code> - pick a range between two taxonomic groups (inclusive)</li>
<li><code>strain()</code> - filter by taxonomic groups, like dplyr&rsquo;s filter</li>
<li><code>name()</code> - get the taxon name for each <code>taxonref</code> object</li>
<li><code>uri()</code> - get the reference uri for each <code>taxonref</code> object</li>
<li><code>rank()</code> - get the taxonomic rank for each <code>taxonref</code> object</li>
<li><code>id()</code> - get the reference uri for each <code>taxonref</code> object</li>
</ul>
<p>The approach in this package I suppose is sort of like <code>split-apply-combine</code> from <code>plyr</code>/<code>dplyr</code>, whereas this is aims to make it easy to do with taxonomic names.</p>
<h2 id="install">Install</h2>
<p>For examples below, you&rsquo;ll need the development version:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;binomen&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;binomen&#34;</span>)
</span></span></code></pre></div><h2 id="make-a-taxon">Make a taxon</h2>
<p>Make a taxon object</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(obj <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">make_taxon</span>(genus<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Poa&#34;</span>, epithet<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;annua&#34;</span>, authority<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;L.&#34;</span>,
</span></span><span style="display:flex;"><span>  family<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Poaceae&#39;</span>, clazz<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Poales&#39;</span>, kingdom<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Plantae&#39;</span>, variety<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;annua&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     variety: annua</span>
</span></span></code></pre></div><p>Index to various parts of the object</p>
<p>The binomial</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>binomial
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;binomial&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   epithet: annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   canonical: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   species: Poa annua L.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   authority: L.</span>
</span></span></code></pre></div><p>The authority</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>binomial<span style="color:#f92672">$</span>authority
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;L.&#34;</span>
</span></span></code></pre></div><p>The classification</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>grouping
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;grouping&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   variety: annua</span>
</span></span></code></pre></div><p>The family</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>grouping<span style="color:#f92672">$</span>family
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: family</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span></code></pre></div><h2 id="subset-taxon-objects">Subset taxon objects</h2>
<p>Get one or more ranks via <code>pick()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pick</span>(family)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pick</span>(family, genus)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span></code></pre></div><p>Drop one or more ranks via <code>pop()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pop</span>(family)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     variety: annua</span>
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pop</span>(family, genus)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     variety: annua</span>
</span></span></code></pre></div><p>Get a range of ranks via <code>span()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">span</span>(kingdom, family)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span></code></pre></div><p>Extract classification as a <code>data.frame</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">gethier</span>(obj)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      rank      name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 kingdom   Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   clazz    Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  family   Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   genus       Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 species Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 variety     annua</span>
</span></span></code></pre></div><h2 id="taxonomic-dataframes">Taxonomic data.frame&rsquo;s</h2>
<p>Make one</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(order <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Asterales&#39;</span>,<span style="color:#e6db74">&#39;Asterales&#39;</span>,<span style="color:#e6db74">&#39;Fagales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>),
</span></span><span style="display:flex;"><span>  family <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Asteraceae&#39;</span>,<span style="color:#e6db74">&#39;Asteraceae&#39;</span>,<span style="color:#e6db74">&#39;Fagaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>),
</span></span><span style="display:flex;"><span>  genus <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Helianthus&#39;</span>,<span style="color:#e6db74">&#39;Helianthus&#39;</span>,<span style="color:#e6db74">&#39;Quercus&#39;</span>,<span style="color:#e6db74">&#39;Poa&#39;</span>,<span style="color:#e6db74">&#39;Festuca&#39;</span>,<span style="color:#e6db74">&#39;Holodiscus&#39;</span>),
</span></span><span style="display:flex;"><span>  stringsAsFactors <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>(df2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">taxon_df</span>(df))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order     family      genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagales   Fagaceae    Quercus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poales    Poaceae        Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poales    Poaceae    Festuca</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poales    Poaceae Holodiscus</span>
</span></span></code></pre></div><p>Parse - get rank order via <code>pick()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pick</span>(order)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poales</span>
</span></span></code></pre></div><p>get ranks order, family, and genus via <code>pick()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">pick</span>(order, family, genus)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order     family      genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagales   Fagaceae    Quercus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poales    Poaceae        Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poales    Poaceae    Festuca</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poales    Poaceae Holodiscus</span>
</span></span></code></pre></div><p>get range of names via <code>span()</code>, from rank <code>X</code> to rank <code>Y</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">span</span>(family, genus)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       family      genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagaceae    Quercus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poaceae        Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poaceae    Festuca</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poaceae Holodiscus</span>
</span></span></code></pre></div><p>Separate each row into a <code>taxon</code> class (many <code>taxon</code> objects are a <code>taxa</code> class)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">scatter</span>(df2)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Asterales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Asteraceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Asterales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Asteraceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Quercus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Fagales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Fagaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Quercus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Quercus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[5]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Festuca none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Festuca</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Festuca none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[6]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Holodiscus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   grouping: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Holodiscus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Holodiscus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;taxa&#34;</span>
</span></span></code></pre></div><p>And you can re-assemble a data.frame from the output of <code>scatter()</code> with <code>assemble()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">scatter</span>(df2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">assemble</span>(out)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order     family      genus         species</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales Asteraceae Helianthus Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales Asteraceae Helianthus Helianthus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagales   Fagaceae    Quercus    Quercus none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poales    Poaceae        Poa        Poa none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poales    Poaceae    Festuca    Festuca none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poales    Poaceae Holodiscus Holodiscus none</span>
</span></span></code></pre></div><h2 id="thoughts">Thoughts?</h2>
<p>I&rsquo;m really curious what people think of <code>binomen</code>. I&rsquo;m not sure how useful this will be in the wild. Try it. Let me know. Thanks much :)</p>
]]></content:encoded>
    </item>
    <item>
      <title>binomen - taxonomic classes and parsing</title>
      <link>http://localhost:1313/2015/01/binomen/</link>
      <pubDate>Mon, 19 Jan 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/01/binomen/</guid>
      <description>&lt;p&gt;I maintain, along with other &lt;a href=&#34;https://github.com/ropensci/taxize/graphs/contributors&#34;&gt;awesome people&lt;/a&gt;, the &lt;a href=&#34;https://github.com/ropensci/taxize&#34;&gt;taxize&lt;/a&gt; R package - a taxonomic toolbelt for R, for interacting with taxonomic data sources on the web.&lt;/p&gt;
&lt;p&gt;Taxonomy data is not standardized, but there are a lot of common elements, and there is a finite list of taxonomic ranks, and finite number of major taxonomic data sets. Thus, I&amp;rsquo;ve been interested in attempting to define a pseudo standard for expressing taxonomic data in R. The conversation &lt;a href=&#34;https://github.com/ropensci/taxize/issues/261&#34;&gt;started a while back&lt;/a&gt; in a GitHub issue, and hasn&amp;rsquo;t moved very far.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>I maintain, along with other <a href="https://github.com/ropensci/taxize/graphs/contributors">awesome people</a>, the <a href="https://github.com/ropensci/taxize">taxize</a> R package - a taxonomic toolbelt for R, for interacting with taxonomic data sources on the web.</p>
<p>Taxonomy data is not standardized, but there are a lot of common elements, and there is a finite list of taxonomic ranks, and finite number of major taxonomic data sets. Thus, I&rsquo;ve been interested in attempting to define a pseudo standard for expressing taxonomic data in R. The conversation <a href="https://github.com/ropensci/taxize/issues/261">started a while back</a> in a GitHub issue, and hasn&rsquo;t moved very far.</p>
<p>I decided to start playing with this more, which is easier to do in a separate pacakge. Thus: <code>binomen</code>. It&rsquo;s an attempt to define a set of taxonomic classes/objects in R, along with a suite of functions to help construct and parse these objects.</p>
<p>Would love any/all feedback.</p>
<p>Here&rsquo;s some examples:</p>
<h2 id="install">Install</h2>
<p>Install <code>binomen</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;devtools&#34;</span>)
</span></span><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/binomen&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;binomen&#34;</span>)
</span></span></code></pre></div><h2 id="make-a-taxon">Make a taxon</h2>
<p>Make a taxon object</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(obj <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">make_taxon</span>(genus<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Poa&#34;</span>, epithet<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;annua&#34;</span>, authority<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;L.&#34;</span>,
</span></span><span style="display:flex;"><span>                   family<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Poaceae&#39;</span>, clazz<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Poales&#39;</span>, 
</span></span><span style="display:flex;"><span>                   kingdom<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Plantae&#39;</span>, variety<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;annua&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxon&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   binomial: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   classification: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     variety: annua</span>
</span></span></code></pre></div><p>Index to various parts of the object</p>
<p>The binomial</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>binomial
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;binomial&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   epithet: annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   canonical: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   species: Poa annua L.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   authority: L.</span>
</span></span></code></pre></div><p>The authority</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>binomial<span style="color:#f92672">$</span>authority
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;L.&#34;</span>
</span></span></code></pre></div><p>The classification</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>classification
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;classification&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     kingdom: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     clazz: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     family: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     genus: Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     species: Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     variety: annua</span>
</span></span></code></pre></div><p>The family</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj<span style="color:#f92672">$</span>classification<span style="color:#f92672">$</span>family
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: family</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span></code></pre></div><h2 id="subset-taxon-objects">Subset taxon objects</h2>
<p>Get a single rank</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(family)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: family</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span></code></pre></div><p>Get a range of ranks</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>obj <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">range</span>(kingdom, family)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $kingdom</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: kingdom</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $clazz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: clazz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $family</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;taxonref&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   rank: family</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   name: Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   id: none</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   uri: none</span>
</span></span></code></pre></div><p>Extract classification as a <code>data.frame</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">gethier</span>(obj)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      rank      name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 kingdom   Plantae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   clazz    Poales</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  family   Poaceae</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   genus       Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 species Poa annua</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 variety     annua</span>
</span></span></code></pre></div><h2 id="taxonomic-dataframes">Taxonomic data.frame&rsquo;s</h2>
<p>Make one</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(
</span></span><span style="display:flex;"><span>  order<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Asterales&#39;</span>,<span style="color:#e6db74">&#39;Asterales&#39;</span>,<span style="color:#e6db74">&#39;Fagales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>,<span style="color:#e6db74">&#39;Poales&#39;</span>),
</span></span><span style="display:flex;"><span>  family<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Asteraceae&#39;</span>,<span style="color:#e6db74">&#39;Asteraceae&#39;</span>,<span style="color:#e6db74">&#39;Fagaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>,<span style="color:#e6db74">&#39;Poaceae&#39;</span>),
</span></span><span style="display:flex;"><span>  genus<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;Helianthus&#39;</span>,<span style="color:#e6db74">&#39;Helianthus&#39;</span>,<span style="color:#e6db74">&#39;Quercus&#39;</span>,<span style="color:#e6db74">&#39;Poa&#39;</span>,<span style="color:#e6db74">&#39;Festuca&#39;</span>,<span style="color:#e6db74">&#39;Holodiscus&#39;</span>),
</span></span><span style="display:flex;"><span>  stringsAsFactors <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>(df2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">taxon_df</span>(df))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order     family      genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   Fagales   Fagaceae    Quercus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4    Poales    Poaceae        Poa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    Poales    Poaceae    Festuca</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6    Poales    Poaceae Holodiscus</span>
</span></span></code></pre></div><p>Parse - get rank order matching <em>Fagales</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(order, Fagales)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     order   family   genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Fagales Fagaceae Quercus</span>
</span></span></code></pre></div><p>get rank family matching <em>Asteraceae</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(family, Asteraceae)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;       order     family      genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Asterales Asteraceae Helianthus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Asterales Asteraceae Helianthus</span>
</span></span></code></pre></div><p>get rank genus matching <em>Poa</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df2 <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(genus, Poa)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    order  family genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 Poales Poaceae   Poa</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>pytaxize - low level ITIS functions</title>
      <link>http://localhost:1313/2014/12/pytaxize-itis/</link>
      <pubDate>Fri, 26 Dec 2014 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2014/12/pytaxize-itis/</guid>
      <description>&lt;p&gt;I&amp;rsquo;ve been working on a Python port of the R package &lt;code&gt;taxize&lt;/code&gt; that I maintain. It&amp;rsquo;s still early days with this Python library, I&amp;rsquo;d love to know what people think. For example, I&amp;rsquo;m giving back Pandas DataFrame&amp;rsquo;s from most functions. Does this make sense?&lt;/p&gt;
&lt;h2 id=&#34;installation&#34;&gt;Installation&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sudo pip install git+git://github.com/sckott/pytaxize.git#egg=pytaxize
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Or &lt;code&gt;git clone&lt;/code&gt; the repo down, and &lt;code&gt;python setup.py build &amp;amp;&amp;amp; python setup.py install&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;load-library&#34;&gt;Load library&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pytaxize
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;itis-ping&#34;&gt;ITIS ping&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;itis_ping()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;This is the ITIS Web Service, providing access to the data behind www.itis.gov. The database contains 665,266 scientific names (501,207 of them valid/accepted) and 122,735 common names.&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;get-hierarchy-down-from-tsn&#34;&gt;Get hierarchy down from tsn&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gethierarchydownfromtsn(tsn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;161030&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      tsn rankName       taxonName    parentName parentTsn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;161048&lt;/span&gt;    Class   Sarcopterygii  Osteichthyes    &lt;span style=&#34;color:#ae81ff&#34;&gt;161030&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  &lt;span style=&#34;color:#ae81ff&#34;&gt;161061&lt;/span&gt;    Class  Actinopterygii  Osteichthyes    &lt;span style=&#34;color:#ae81ff&#34;&gt;161030&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;get-hierarchy-up-from-tsn&#34;&gt;Get hierarchy up from tsn&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gethierarchyupfromtsn(tsn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;37906&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;               author  parentName parentTsn rankName taxonName    tsn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;  Gaertn&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt; ex Schreb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;  Asteraceae     &lt;span style=&#34;color:#ae81ff&#34;&gt;35420&lt;/span&gt;    Genus   Liatris  &lt;span style=&#34;color:#ae81ff&#34;&gt;37906&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;get-rank-names&#34;&gt;Get rank names&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getranknames()
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    kingdomname rankid      rankname
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;       Kingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;    Subkingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;        Phylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;     Subphylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;    Superclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;         Class
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;70&lt;/span&gt;      Subclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;    Infraclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;      Bacteria     &lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;    Superorder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;      Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;         Order
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;110&lt;/span&gt;      Suborder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;120&lt;/span&gt;    Infraorder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;130&lt;/span&gt;   Superfamily
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;140&lt;/span&gt;        Family
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;14&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;     Subfamily
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;160&lt;/span&gt;         Tribe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;170&lt;/span&gt;      Subtribe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;17&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt;         Genus
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;18&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;190&lt;/span&gt;      Subgenus
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;19&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;220&lt;/span&gt;       Species
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;     Bacteria    &lt;span style=&#34;color:#ae81ff&#34;&gt;230&lt;/span&gt;    Subspecies
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;21&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;       Kingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;22&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;    Subkingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;23&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;  Infrakingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;24&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;        Phylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;     Subphylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;26&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;45&lt;/span&gt;   Infraphylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;27&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;47&lt;/span&gt;    Parvphylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;28&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;    Superclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;29&lt;/span&gt;     Protozoa     &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;         Class
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;..&lt;/span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;           &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;190&lt;/span&gt;      Subgenus
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;151&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;       Section
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;152&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;210&lt;/span&gt;    Subsection
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;153&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;220&lt;/span&gt;       Species
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;154&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;230&lt;/span&gt;    Subspecies
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;155&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;240&lt;/span&gt;       Variety
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;156&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;250&lt;/span&gt;    Subvariety
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;157&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;260&lt;/span&gt;          Form
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;158&lt;/span&gt;   Chromista    &lt;span style=&#34;color:#ae81ff&#34;&gt;270&lt;/span&gt;       Subform
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;159&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;       Kingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;160&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;    Subkingdom
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;161&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;        Phylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;162&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;40&lt;/span&gt;     Subphylum
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;163&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;    Superclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;164&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;         Class
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;165&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;70&lt;/span&gt;      Subclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;166&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;    Infraclass
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;167&lt;/span&gt;     Archaea     &lt;span style=&#34;color:#ae81ff&#34;&gt;90&lt;/span&gt;    Superorder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;168&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;         Order
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;169&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;110&lt;/span&gt;      Suborder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;170&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;120&lt;/span&gt;    Infraorder
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;171&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;130&lt;/span&gt;   Superfamily
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;172&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;140&lt;/span&gt;        Family
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;173&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;150&lt;/span&gt;     Subfamily
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;174&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;160&lt;/span&gt;         Tribe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;175&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;170&lt;/span&gt;      Subtribe
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;176&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;180&lt;/span&gt;         Genus
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;177&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;190&lt;/span&gt;      Subgenus
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;178&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;220&lt;/span&gt;       Species
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;179&lt;/span&gt;     Archaea    &lt;span style=&#34;color:#ae81ff&#34;&gt;230&lt;/span&gt;    Subspecies
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;search-by-scientific-name&#34;&gt;Search by scientific name&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;searchbyscientificname(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Tardigrada&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;           combinedname     tsn
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;    Rotaria tardigrada   &lt;span style=&#34;color:#ae81ff&#34;&gt;58274&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;  Notommata tardigrada   &lt;span style=&#34;color:#ae81ff&#34;&gt;58898&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;   Pilargis tardigrada   &lt;span style=&#34;color:#ae81ff&#34;&gt;65562&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;            Tardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;155166&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;      Heterotardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;155167&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;      Arthrotardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;155168&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;        Mesotardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;155358&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;          Eutardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;155362&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;8&lt;/span&gt;   Scytodes tardigrada  &lt;span style=&#34;color:#ae81ff&#34;&gt;866744&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;get-accepted-names-from-tsn&#34;&gt;Get accepted names from tsn&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python3&#34; data-lang=&#34;python3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;pytaxize&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getacceptednamesfromtsn(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;208527&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If accepted, returns the same id&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>I&rsquo;ve been working on a Python port of the R package <code>taxize</code> that I maintain. It&rsquo;s still early days with this Python library, I&rsquo;d love to know what people think. For example, I&rsquo;m giving back Pandas DataFrame&rsquo;s from most functions. Does this make sense?</p>
<h2 id="installation">Installation</h2>
<pre tabindex="0"><code>sudo pip install git+git://github.com/sckott/pytaxize.git#egg=pytaxize
</code></pre><p>Or <code>git clone</code> the repo down, and <code>python setup.py build &amp;&amp; python setup.py install</code></p>
<h2 id="load-library">Load library</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span><span style="color:#f92672">import</span> pytaxize
</span></span></code></pre></div><h2 id="itis-ping">ITIS ping</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>itis_ping()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span><span style="color:#e6db74">&#39;This is the ITIS Web Service, providing access to the data behind www.itis.gov. The database contains 665,266 scientific names (501,207 of them valid/accepted) and 122,735 common names.&#39;</span>
</span></span></code></pre></div><h2 id="get-hierarchy-down-from-tsn">Get hierarchy down from tsn</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>gethierarchydownfromtsn(tsn <span style="color:#f92672">=</span> <span style="color:#ae81ff">161030</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>      tsn rankName       taxonName    parentName parentTsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>  <span style="color:#ae81ff">161048</span>    Class   Sarcopterygii  Osteichthyes    <span style="color:#ae81ff">161030</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">161061</span>    Class  Actinopterygii  Osteichthyes    <span style="color:#ae81ff">161030</span>
</span></span></code></pre></div><h2 id="get-hierarchy-up-from-tsn">Get hierarchy up from tsn</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>gethierarchyupfromtsn(tsn <span style="color:#f92672">=</span> <span style="color:#ae81ff">37906</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>               author  parentName parentTsn rankName taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>  Gaertn<span style="color:#f92672">.</span> ex Schreb<span style="color:#f92672">.</span>  Asteraceae     <span style="color:#ae81ff">35420</span>    Genus   Liatris  <span style="color:#ae81ff">37906</span>
</span></span></code></pre></div><h2 id="get-rank-names">Get rank names</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>getranknames()
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>    kingdomname rankid      rankname
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>      Bacteria     <span style="color:#ae81ff">10</span>       Kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>      Bacteria     <span style="color:#ae81ff">20</span>    Subkingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>      Bacteria     <span style="color:#ae81ff">30</span>        Phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>      Bacteria     <span style="color:#ae81ff">40</span>     Subphylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>      Bacteria     <span style="color:#ae81ff">50</span>    Superclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      Bacteria     <span style="color:#ae81ff">60</span>         Class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>      Bacteria     <span style="color:#ae81ff">70</span>      Subclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>      Bacteria     <span style="color:#ae81ff">80</span>    Infraclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>      Bacteria     <span style="color:#ae81ff">90</span>    Superorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>      Bacteria    <span style="color:#ae81ff">100</span>         Order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>     Bacteria    <span style="color:#ae81ff">110</span>      Suborder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>     Bacteria    <span style="color:#ae81ff">120</span>    Infraorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>     Bacteria    <span style="color:#ae81ff">130</span>   Superfamily
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>     Bacteria    <span style="color:#ae81ff">140</span>        Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>     Bacteria    <span style="color:#ae81ff">150</span>     Subfamily
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>     Bacteria    <span style="color:#ae81ff">160</span>         Tribe
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>     Bacteria    <span style="color:#ae81ff">170</span>      Subtribe
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">17</span>     Bacteria    <span style="color:#ae81ff">180</span>         Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">18</span>     Bacteria    <span style="color:#ae81ff">190</span>      Subgenus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>     Bacteria    <span style="color:#ae81ff">220</span>       Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20</span>     Bacteria    <span style="color:#ae81ff">230</span>    Subspecies
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">21</span>     Protozoa     <span style="color:#ae81ff">10</span>       Kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">22</span>     Protozoa     <span style="color:#ae81ff">20</span>    Subkingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">23</span>     Protozoa     <span style="color:#ae81ff">25</span>  Infrakingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">24</span>     Protozoa     <span style="color:#ae81ff">30</span>        Phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">25</span>     Protozoa     <span style="color:#ae81ff">40</span>     Subphylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">26</span>     Protozoa     <span style="color:#ae81ff">45</span>   Infraphylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">27</span>     Protozoa     <span style="color:#ae81ff">47</span>    Parvphylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">28</span>     Protozoa     <span style="color:#ae81ff">50</span>    Superclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">29</span>     Protozoa     <span style="color:#ae81ff">60</span>         Class
</span></span><span style="display:flex;"><span><span style="color:#f92672">..</span>          <span style="color:#f92672">...</span>    <span style="color:#f92672">...</span>           <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">150</span>   Chromista    <span style="color:#ae81ff">190</span>      Subgenus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">151</span>   Chromista    <span style="color:#ae81ff">200</span>       Section
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">152</span>   Chromista    <span style="color:#ae81ff">210</span>    Subsection
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">153</span>   Chromista    <span style="color:#ae81ff">220</span>       Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">154</span>   Chromista    <span style="color:#ae81ff">230</span>    Subspecies
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">155</span>   Chromista    <span style="color:#ae81ff">240</span>       Variety
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">156</span>   Chromista    <span style="color:#ae81ff">250</span>    Subvariety
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">157</span>   Chromista    <span style="color:#ae81ff">260</span>          Form
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">158</span>   Chromista    <span style="color:#ae81ff">270</span>       Subform
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">159</span>     Archaea     <span style="color:#ae81ff">10</span>       Kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">160</span>     Archaea     <span style="color:#ae81ff">20</span>    Subkingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">161</span>     Archaea     <span style="color:#ae81ff">30</span>        Phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">162</span>     Archaea     <span style="color:#ae81ff">40</span>     Subphylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">163</span>     Archaea     <span style="color:#ae81ff">50</span>    Superclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">164</span>     Archaea     <span style="color:#ae81ff">60</span>         Class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">165</span>     Archaea     <span style="color:#ae81ff">70</span>      Subclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">166</span>     Archaea     <span style="color:#ae81ff">80</span>    Infraclass
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">167</span>     Archaea     <span style="color:#ae81ff">90</span>    Superorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">168</span>     Archaea    <span style="color:#ae81ff">100</span>         Order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">169</span>     Archaea    <span style="color:#ae81ff">110</span>      Suborder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">170</span>     Archaea    <span style="color:#ae81ff">120</span>    Infraorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">171</span>     Archaea    <span style="color:#ae81ff">130</span>   Superfamily
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">172</span>     Archaea    <span style="color:#ae81ff">140</span>        Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">173</span>     Archaea    <span style="color:#ae81ff">150</span>     Subfamily
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">174</span>     Archaea    <span style="color:#ae81ff">160</span>         Tribe
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">175</span>     Archaea    <span style="color:#ae81ff">170</span>      Subtribe
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">176</span>     Archaea    <span style="color:#ae81ff">180</span>         Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">177</span>     Archaea    <span style="color:#ae81ff">190</span>      Subgenus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">178</span>     Archaea    <span style="color:#ae81ff">220</span>       Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">179</span>     Archaea    <span style="color:#ae81ff">230</span>    Subspecies
</span></span></code></pre></div><h2 id="search-by-scientific-name">Search by scientific name</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>searchbyscientificname(x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Tardigrada&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>           combinedname     tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>    Rotaria tardigrada   <span style="color:#ae81ff">58274</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  Notommata tardigrada   <span style="color:#ae81ff">58898</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Pilargis tardigrada   <span style="color:#ae81ff">65562</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            Tardigrada  <span style="color:#ae81ff">155166</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>      Heterotardigrada  <span style="color:#ae81ff">155167</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>      Arthrotardigrada  <span style="color:#ae81ff">155168</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>        Mesotardigrada  <span style="color:#ae81ff">155358</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>          Eutardigrada  <span style="color:#ae81ff">155362</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>   Scytodes tardigrada  <span style="color:#ae81ff">866744</span>
</span></span></code></pre></div><h2 id="get-accepted-names-from-tsn">Get accepted names from tsn</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>pytaxize<span style="color:#f92672">.</span>getacceptednamesfromtsn(<span style="color:#e6db74">&#39;208527&#39;</span>)
</span></span></code></pre></div><p>If accepted, returns the same id</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span><span style="color:#e6db74">&#39;208527&#39;</span>
</span></span></code></pre></div><h2 id="more">More</h2>
<p>For the other functions see <a href="https://github.com/sckott/pytaxize/blob/master/pytaxize/itis.py">https://github.com/sckott/pytaxize/blob/master/pytaxize/itis.py</a></p>
]]></content:encoded>
    </item>
    <item>
      <title>taxize workflows</title>
      <link>http://localhost:1313/2014/12/taxize-workflows/</link>
      <pubDate>Tue, 02 Dec 2014 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2014/12/taxize-workflows/</guid>
      <description>&lt;p&gt;A missed chat on the rOpenSci website the other day asked:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hi there, i am trying to use the taxize package and have a .csv file of species names to run through taxize updating them. What would be the code i would need to run to achieve this?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;One way to answer this is to talk about the basic approach to importing data, doing stuff to the data, then recombining data. There are many ways to do this, but I&amp;rsquo;ll go over a few of them.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>A missed chat on the rOpenSci website the other day asked:</p>
<blockquote>
<p>Hi there, i am trying to use the taxize package and have a .csv file of species names to run through taxize updating them. What would be the code i would need to run to achieve this?</p></blockquote>
<p>One way to answer this is to talk about the basic approach to importing data, doing stuff to the data, then recombining data. There are many ways to do this, but I&rsquo;ll go over a few of them.</p>
<h2 id="install-taxize">Install taxize</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;taxize&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;downloader&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;taxize&#34;</span>)
</span></span></code></pre></div><h2 id="import-data">Import data</h2>
<p>We&rsquo;ll use Winston Chang&rsquo;s new <code>downloader</code> package to avoid problems with <code>https</code>, and get a dataset from our ropensci datasets repo <a href="https://github.com/ropensci/datasets">https://github.com/ropensci/datasets</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>downloader<span style="color:#f92672">::</span><span style="color:#a6e22e">download</span>(<span style="color:#e6db74">&#34;https://raw.githubusercontent.com/ropensci/datasets/master/planttraits/morphological.csv&#34;</span>, <span style="color:#e6db74">&#34;morphological.csv&#34;</span>)
</span></span><span style="display:flex;"><span>dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read.csv</span>(<span style="color:#e6db74">&#34;morphological.csv&#34;</span>, stringsAsFactors <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(dat)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                  species log_SLA leaf_water_content log_wood_density</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1         Abies concolor    3.46               0.51            -0.52</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies grandis    3.58               0.49            -0.51</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3        Abies magnifica    3.87               0.62            -0.53</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4      Acacia farnesiana      NA                 NA               NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5           Acer glabrum    5.07               0.69            -0.54</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 Adenostoma fasciculata    3.56               0.46            -0.31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   log_ht log_N</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   7.72  0.02</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   7.51 -0.31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   7.58 -0.14</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   5.70    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5   3.25  1.02</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6   5.33  0.29</span>
</span></span></code></pre></div><p>After importing data, there are a variety of approaches you could take:</p>
<ol>
<li>Vector: Take species names as vector from your <code>data.frame</code>, cleaning them, then re-attching to the <code>data.frame</code> later, or</li>
<li>In-Place: Use for loops or <code>lapply</code> family functions to iterate over each name while simultaneously re-inserting into the <code>data.frame</code></li>
</ol>
<h2 id="1-vector">1. Vector</h2>
<p>Make a vector of names</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>splist <span style="color:#f92672">&lt;-</span> dat<span style="color:#f92672">$</span>species
</span></span></code></pre></div><p>Then proceed to do name cleaning, e.g, we can use the <code>tnrs</code> function to see if any names are potentially not spelled correctly.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>tnrs_out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tnrs</span>(splist, source <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;iPlant_TNRS&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(tnrs_out)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;              submittedname             acceptedname    sourceid score</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     Ceanothus prostratus     Ceanothus prostratus iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies magnifica          Abies magnifica iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Arctostaphylos canescens Arctostaphylos canescens iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4         Berberis nervosa         Berberis nervosa iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5        Arbutus menziesii        Arbutus menziesii iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Calocedrus decurrens     Calocedrus decurrens iPlant_TNRS     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                matchedname      authority</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     Ceanothus prostratus         Benth.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies magnifica  A. Murray bis</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Arctostaphylos canescens         Eastw.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4         Berberis nervosa          Pursh</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5        Arbutus menziesii          Pursh</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Calocedrus decurrens (Torr.) Florin</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                     uri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 http://www.tropicos.org/Name/27500276</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 http://www.tropicos.org/Name/24900142</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 http://www.tropicos.org/Name/12302547</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  http://www.tropicos.org/Name/3500175</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 http://www.tropicos.org/Name/12302436</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  http://www.tropicos.org/Name/9400069</span>
</span></span></code></pre></div><p>Those with score of less than 1 may have misspellings</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>tnrs_out[ tnrs_out<span style="color:#f92672">$</span>score <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1</span>, ]
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                 submittedname              acceptedname    sourceid score</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 23     Adenostoma fasciculata   Adenostoma fasciculatum iPlant_TNRS  0.97</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 24 Arctostaphylos glandulosus Arctostaphylos glandulosa iPlant_TNRS  0.97</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 36        Chamaebatia foliosa     Chamaebatia foliolosa iPlant_TNRS  0.95</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 38     Juniperus californicus     Juniperus californica iPlant_TNRS  0.97</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 77         Prunus illicifolia         Prunus ilicifolia iPlant_TNRS  0.99</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 78         Prunus subcordatus         Prunus subcordata iPlant_TNRS  0.97</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                  matchedname                         authority</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 23   Adenostoma fasciculatum                      Hook. &amp; Arn.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 24 Arctostaphylos glandulosa                            Eastw.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 36     Chamaebatia foliolosa                            Benth.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 38     Juniperus californica                          Carrière</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 77         Prunus ilicifolia (Nutt. ex Hook. &amp; Arn.) D. Dietr.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 78         Prunus subcordata                            Benth.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                      uri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 23 http://www.tropicos.org/Name/27801458</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 24 http://www.tropicos.org/Name/12300542</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 36 http://www.tropicos.org/Name/27801486</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 38  http://www.tropicos.org/Name/9400374</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 77 http://www.tropicos.org/Name/27801102</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 78 http://www.tropicos.org/Name/27801124</span>
</span></span></code></pre></div><p>So let&rsquo;s take the <code>acceptedname</code> column as a the new names and assign to a new vector</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>cleaned_names <span style="color:#f92672">&lt;-</span> tnrs_out<span style="color:#f92672">$</span>acceptedname
</span></span></code></pre></div><p>Then join names back, replacing them, or adding as a new column</p>
<p>Replace</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat<span style="color:#f92672">$</span>species <span style="color:#f92672">&lt;-</span> cleaned_names
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(dat)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    species log_SLA leaf_water_content log_wood_density</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     Ceanothus prostratus    3.46               0.51            -0.52</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies magnifica    3.58               0.49            -0.51</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Arctostaphylos canescens    3.87               0.62            -0.53</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4         Berberis nervosa      NA                 NA               NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5        Arbutus menziesii    5.07               0.69            -0.54</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Calocedrus decurrens    3.56               0.46            -0.31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   log_ht log_N</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   7.72  0.02</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   7.51 -0.31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   7.58 -0.14</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   5.70    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5   3.25  1.02</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6   5.33  0.29</span>
</span></span></code></pre></div><p>New column</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat<span style="color:#f92672">$</span>species_cleaned <span style="color:#f92672">&lt;-</span> cleaned_names
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(dat)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    species log_SLA leaf_water_content log_wood_density</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     Ceanothus prostratus    3.46               0.51            -0.52</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies magnifica    3.58               0.49            -0.51</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Arctostaphylos canescens    3.87               0.62            -0.53</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4         Berberis nervosa      NA                 NA               NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5        Arbutus menziesii    5.07               0.69            -0.54</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Calocedrus decurrens    3.56               0.46            -0.31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   log_ht log_N          species_cleaned</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   7.72  0.02     Ceanothus prostratus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   7.51 -0.31          Abies magnifica</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   7.58 -0.14 Arctostaphylos canescens</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   5.70    NA         Berberis nervosa</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5   3.25  1.02        Arbutus menziesii</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6   5.33  0.29     Calocedrus decurrens</span>
</span></span></code></pre></div><h2 id="2-in-place">2. In-place</h2>
<p>You can use functions from the <code>dplyr</code> package to <code>split-apply-combine</code>, where <code>split</code> is split apart your vector for each taxon, <code>apply</code> to apply a function or functions to do name cleaning, then <code>combine</code> to put them back together.</p>
<p>Here, we&rsquo;ll attach taxonomic ids from the Catalogue of Life to each species (each row) (with just a subset of the data to save time):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;dplyr&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tbl_df</span>(dat)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>,] <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rowwise</span>() <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(colid <span style="color:#f92672">=</span> <span style="color:#a6e22e">get_colid</span>(species)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(species, colid)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [5 x 2]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Groups: &lt;by row&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    species    colid</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     Ceanothus prostratus 19544732</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          Abies magnifica 18158318</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 Arctostaphylos canescens 19358934</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4         Berberis nervosa 19374077</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5        Arbutus menziesii 19358819</span>
</span></span></code></pre></div><p>Let&rsquo;s do something a bit more complicated. Get common names for each taxon in a new column, if more than 1, concatenate into a single character string for easy inclusion in a <code>data.frame</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>sci2comm_concat <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">function</span>(x){
</span></span><span style="display:flex;"><span>  temp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sci2comm</span>(x, db <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;eol&#34;</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">length</span>(temp) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) <span style="color:#66d9ef">NA</span> <span style="color:#66d9ef">else</span> <span style="color:#a6e22e">paste0</span>(temp[[1]], collapse <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;, &#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dat_new <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tbl_df</span>(dat)[1<span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>,] <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rowwise</span>() <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(comm <span style="color:#f92672">=</span> <span style="color:#a6e22e">sci2comm_concat</span>(species))
</span></span></code></pre></div><p>To see the new column, do</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>dat_new <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(comm)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [5 x 1]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Groups: &lt;by row&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                          comm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                      Mahala-mat Ceanothus, prostrate ceanothus, squawcarpet</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 Prächtige Tanne, Goldtanne (Gold-Tanne), Kalifornische Rot-Tanne, Pracht-Ta</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3                          hoary manzanita, hoary manzanita, Sonoma manzanita</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 Longleaf Oregon-grape, Cascade barberry, Dull Oregon grape, Oregon grape-ho</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5                   pacific madrone, Madrona, madrone, Kalifornianmansikkapuu</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Taxonomy data from the web in three languages</title>
      <link>http://localhost:1313/2013/09/taxonomy-in-three-acts/</link>
      <pubDate>Fri, 27 Sep 2013 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2013/09/taxonomy-in-three-acts/</guid>
      <description>&lt;p&gt;Eduard Szöcs and I started developing a taxonomic toolbelt for the R language a while back , which lets you interact with a multitude of taxonomic databases on the web. We have a paper in F1000Research if you want to find out more (see &lt;a href=&#34;http://f1000research.com/articles/2-191/v1&#34;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;I thought it would be fun to rewrite some of taxize in other languages to learn more languages. Ruby and Python made the most sense to try. I did try others (Julia, Node), but gave up on those for now. The goal here isn&amp;rsquo;t to port taxize to Python and Ruby right now - it&amp;rsquo;s for me to learn myself some coding.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Eduard Szöcs and I started developing a taxonomic toolbelt for the R language a while back , which lets you interact with a multitude of taxonomic databases on the web. We have a paper in F1000Research if you want to find out more (see <a href="http://f1000research.com/articles/2-191/v1">here</a>).</p>
<p>I thought it would be fun to rewrite some of taxize in other languages to learn more languages. Ruby and Python made the most sense to try. I did try others (Julia, Node), but gave up on those for now. The goal here isn&rsquo;t to port taxize to Python and Ruby right now - it&rsquo;s for me to learn myself some coding.</p>
<p>Anyway, here&rsquo;s use of the same function in three languages: R, Ruby, and Python. The function searches the <a href="http://gni.globalnames.org/">Global Names Index</a>, but is named slightly differently in R (<code>gni_search</code>) vs. Ruby/Python (<code>gniSearch</code>). (yes, I realize the package names aren&rsquo;t consistent)</p>
<p>Note that there are only a few functions available in the Ruby and Python versions:</p>
<ul>
<li>itisPing</li>
<li>gnrResolve</li>
<li>gniParse</li>
<li>gniSearch</li>
<li>gniDetails</li>
<li>colChildren (Python, not Ruby)</li>
</ul>
<p>And the behavior of these functions does not necessarily match that in the R version.</p>
<p>One thing I have learned is that packaging in R is much harder than in Python or Ruby. <a href="cran.r-project.org/web/packages/devtools/index.html">devtools</a> does make R packaging easier, but still&hellip;</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="r">R</h3>
<p>Code <a href="https://github.com/ropensci/taxize_">here</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;taxize&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><p>Then search for a taxonomic name</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">gni_search</span>(<span style="color:#e6db74">&#39;Helianthus annuus&#39;</span>)
</span></span><span style="display:flex;"><span>out[1,]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>               name      id
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Helianthus annuus <span style="color:#ae81ff">3329657</span>
</span></span><span style="display:flex;"><span>                                                                 lsid
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> urn<span style="color:#f92672">:</span>lsid<span style="color:#f92672">:</span>globalnames.org<span style="color:#f92672">:</span>index<span style="color:#f92672">:</span><span style="color:#ae81ff">18</span>f9c244<span style="color:#f92672">-</span>a450<span style="color:#ae81ff">-535</span>e<span style="color:#f92672">-</span>adcd<span style="color:#ae81ff">-2</span>bfaf85c9b2e
</span></span><span style="display:flex;"><span>                              uuid_hex resource_url
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">18</span>f9c244<span style="color:#f92672">-</span>a450<span style="color:#ae81ff">-535</span>e<span style="color:#f92672">-</span>adcd<span style="color:#ae81ff">-2</span>bfaf85c9b2e         none
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="ruby">Ruby</h3>
<p>Code <a href="https://github.com/sckott/tacksize">here</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/sckott/tacksize.git
</span></span><span style="display:flex;"><span>cd tacksize
</span></span><span style="display:flex;"><span>gem build tacksize.gemspec
</span></span><span style="display:flex;"><span>gem install ./tacksize-0.0.1.gem
</span></span></code></pre></div><p>In a Ruby repl, like <code>irb</code>, search for a taxonomic name</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span>require <span style="color:#e6db74">&#39;tacksize&#39;</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">=</span> <span style="color:#66d9ef">Tacksize</span><span style="color:#f92672">.</span>gniSearch(<span style="color:#e6db74">:search_term</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;Helianthus annuus&#39;</span>)
</span></span><span style="display:flex;"><span>out<span style="color:#f92672">[</span><span style="color:#ae81ff">0</span><span style="color:#f92672">]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ruby" data-lang="ruby"><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> {<span style="color:#e6db74">&#34;uuid_hex&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;18f9c244-a450-535e-adcd-2bfaf85c9b2e&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;Helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;lsid&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;urn:lsid:globalnames.org:index:18f9c244-a450-535e-adcd-2bfaf85c9b2e&#34;</span>, <span style="color:#e6db74">&#34;resource_uri&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;http://gni.globalnames.org/name_strings/3329657.xml&#34;</span>, <span style="color:#e6db74">&#34;id&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#ae81ff">3329657</span>}
</span></span></code></pre></div><p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h3 id="python">Python</h3>
<p>Code <a href="https://github.com/sckott/pytaxize">here</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/sckott/pytaxize.git
</span></span><span style="display:flex;"><span>cd pytaxize
</span></span><span style="display:flex;"><span>python setup.py install
</span></span></code></pre></div><p>In a Python repl, like <code>ipython</code>, search for a taxonomic name</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span><span style="color:#f92672">import</span> pytaxize
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">=</span> pytaxize<span style="color:#f92672">.</span>gniSearch(name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Helianthus annuus&#39;</span>)
</span></span><span style="display:flex;"><span>out[<span style="color:#e6db74">&#39;name_strings&#39;</span>][<span style="color:#ae81ff">0</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python3" data-lang="python3"><span style="display:flex;"><span>{<span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;id&#39;</span>: <span style="color:#ae81ff">3329657</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;lsid&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;urn:lsid:globalnames.org:index:18f9c244-a450-535e-adcd-2bfaf85c9b2e&#39;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;name&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;Helianthus annuus&#39;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;resource_uri&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;http://gni.globalnames.org/name_strings/3329657.xml&#39;</span>,
</span></span><span style="display:flex;"><span> <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;uuid_hex&#39;</span>: <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;18f9c244-a450-535e-adcd-2bfaf85c9b2e&#39;</span>}
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>One R package for all your taxonomic needs</title>
      <link>http://localhost:1313/2012/12/taxize/</link>
      <pubDate>Thu, 06 Dec 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/12/taxize/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;UPDATE: there were some errors in the tests for &lt;code&gt;taxize&lt;/code&gt;, so the binaries aren&amp;rsquo;t avaiable yet. You can install from source though, see below.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Getting taxonomic information for the set of species you are studying can be a pain in the ass. You have to manually type, or paste in, your species one-by-one. Or, if you are lucky, there is a web service in which you can upload a list of species. Encyclopedia of Life (EOL) has a service where you can do this &lt;a href=&#34;http://gni.globalnames.org/parsers/new&#34;&gt;here&lt;/a&gt;. But is this reproducible? No.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<blockquote>
<p>UPDATE: there were some errors in the tests for <code>taxize</code>, so the binaries aren&rsquo;t avaiable yet. You can install from source though, see below.</p></blockquote>
<p>Getting taxonomic information for the set of species you are studying can be a pain in the ass. You have to manually type, or paste in, your species one-by-one. Or, if you are lucky, there is a web service in which you can upload a list of species. Encyclopedia of Life (EOL) has a service where you can do this <a href="http://gni.globalnames.org/parsers/new">here</a>. But is this reproducible? No.</p>
<p>Getting your taxonomic information for your species can now be done programatically in R. Do you want to get taxonomic information from ITIS. We got that. Tropicos? We got that too. uBio? No worries, we got that. What about theplantlist.org? Yep, got that. Encyclopedia of Life? Indeed. What about getting sequence data for a taxon? Oh hell yeah, you can get sequences available for a taxon across all genes, or get all records for a taxon for a specific gene.</p>
<p>Of course this is all possible because these data providers have open APIs so that we can facilitate your computer talking to their database. Fun!</p>
<p>Why get your taxonomic data programatically? Because it&rsquo;s 1) faster than by hand in web sites/looking up in books, 2) reproducible, especially if you share your code (damnit!), and 3) you can easily mash up your new taxonomic data to get sequences to build a phylogeny, etc.</p>
<p>I&rsquo;ll give a few examples of using <code>taxize</code> based around use cases, that is, stuff someone might actually do instead of what particular functions do.</p>
<hr>
<h3 id="install-packages--you-can-get-from-cran-or-github">Install packages.  You can get from CRAN or GitHub.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#34;ritis&#34;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize_&#39;, &#39;ropensci&#39;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install.packages(&#34;taxize&#34;, type=&#34;source&#34;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ritis)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><hr>
<h3 id="attach-family-names-to-a-list-of-species">Attach family names to a list of species.</h3>
<h4 id="i-often-have-a-list-of-species-that-i-studied-and-simply-want-to-get-their-family-names-to-for-example-make-a-table-for-the-paper-im-writing">I often have a list of species that I studied and simply want to get their family names to, for example, make a table for the paper I&rsquo;m writing.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># For one species</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">itis_name</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Poa annua&#34;</span>, get <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;family&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Poa annua &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>[1] <span style="color:#e6db74">&#34;Poaceae&#34;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># For many species</span>
</span></span><span style="display:flex;"><span>species <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Poa annua&#34;</span>, <span style="color:#e6db74">&#34;Abies procera&#34;</span>, <span style="color:#e6db74">&#34;Helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;Coffea arabica&#34;</span>)
</span></span><span style="display:flex;"><span>famnames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">sapply</span>(species, itis_name, get <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;family&#34;</span>, USE.NAMES <span style="color:#f92672">=</span> F)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Poa annua &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Abies procera &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Helianthus annuus &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Coffea arabica &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">data.frame</span>(species <span style="color:#f92672">=</span> species, family <span style="color:#f92672">=</span> famnames)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>            species     family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         Poa annua    Poaceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>     Abies procera   Pinaceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> Helianthus annuus Asteraceae
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>    Coffea arabica  Rubiaceae
</span></span></code></pre></div><hr>
<h3 id="resolve-taxonomic-names">Resolve taxonomic names.</h3>
<h4 id="this-is-a-common-use-case-for-ecologistsevolutionary-biologists-or-at-least-should-be-that-is-species-names-you-have-for-your-own-data-or-when-using-others-data-could-be-old-names---and-if-you-need-the-newest-names-for-your-species-list-how-can-you-make-this-as-painless-as-possible-you-can-query-taxonomic-data-from-many-different-sources-with-taxize">This is a common use case for ecologists/evolutionary biologists, or at least should be. That is, species names you have for your own data, or when using other&rsquo;s data, could be old names - and if you need the newest names for your species list, how can you make this as painless as possible? You can query taxonomic data from many different sources with <code>taxize</code>.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># The iPlantCollaborative provides access via API to their taxonomic name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># resolution service (TNRS)</span>
</span></span><span style="display:flex;"><span>mynames <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;shorea robusta&#34;</span>, <span style="color:#e6db74">&#34;pandanus patina&#34;</span>, <span style="color:#e6db74">&#34;oryza sativa&#34;</span>, <span style="color:#e6db74">&#34;durio zibethinus&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;rubus ulmifolius&#34;</span>, <span style="color:#e6db74">&#34;asclepias curassavica&#34;</span>, <span style="color:#e6db74">&#34;pistacia lentiscus&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">iplant_tnrsmatch</span>(retrieve <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;all&#34;</span>, taxnames <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;acacia&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;gossypium&#34;</span>), output <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;names&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>       AcceptedName   MatchFam MatchGenus MatchScore    Accept<span style="color:#f92672">?</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Helianthus annuus Asteraceae Helianthus          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            Acacia   Fabaceae     Acacia          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                                  Acacia          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         Gossypium  Malvaceae  Gossypium          <span style="color:#ae81ff">1</span> No opinion
</span></span><span style="display:flex;"><span>     SubmittedNames
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> helianthus annuus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            acacia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            acacia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         gossypium
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The global names resolver is another attempt at this, hitting many</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># different data sources</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gnr_resolve</span>(names <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Helianthus annuus&#34;</span>, <span style="color:#e6db74">&#34;Homo sapiens&#34;</span>), returndf <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   data_source_id    submitted_name       name_string score
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>               <span style="color:#ae81ff">4</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>              <span style="color:#ae81ff">10</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>              <span style="color:#ae81ff">12</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>             <span style="color:#ae81ff">110</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>            <span style="color:#ae81ff">159</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>            <span style="color:#ae81ff">166</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>            <span style="color:#ae81ff">169</span> Helianthus annuus Helianthus annuus <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>               <span style="color:#ae81ff">4</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>              <span style="color:#ae81ff">10</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>              <span style="color:#ae81ff">12</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>             <span style="color:#ae81ff">107</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>             <span style="color:#ae81ff">122</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>            <span style="color:#ae81ff">123</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>            <span style="color:#ae81ff">159</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>            <span style="color:#ae81ff">168</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>            <span style="color:#ae81ff">169</span>      Homo sapiens      Homo sapiens <span style="color:#ae81ff">0.988</span>
</span></span><span style="display:flex;"><span>                     title
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                     NCBI
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                 Freebase
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>                      EOL
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>     Illinois Wildflowers
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>                 CU<span style="color:#f92672">*</span>STAR
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>                   nlbif
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>           uBio NameBank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                     NCBI
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                 Freebase
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                      EOL
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                AskNature
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>                 BioPedia
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                   AnAge
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>                 CU<span style="color:#f92672">*</span>STAR
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span> Index to Organism Names
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>           uBio NameBank
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We can hit the Plantminer API too</span>
</span></span><span style="display:flex;"><span>plants <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Myrcia lingua&#34;</span>, <span style="color:#e6db74">&#34;Myrcia bella&#34;</span>, <span style="color:#e6db74">&#34;Ocotea pulchella&#34;</span>, <span style="color:#e6db74">&#34;Miconia&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Coffea arabica var. amarella&#34;</span>, <span style="color:#e6db74">&#34;Bleh&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plantminer</span>(plants)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>Myrcia lingua 
</span></span><span style="display:flex;"><span>Myrcia bella 
</span></span><span style="display:flex;"><span>Ocotea pulchella 
</span></span><span style="display:flex;"><span>Miconia 
</span></span><span style="display:flex;"><span>Coffea arabica var. amarella 
</span></span><span style="display:flex;"><span>Bleh 
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>              fam   genus                    sp             author
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       Myrtaceae  Myrcia                <span style="color:#a6e22e">lingua   </span>(O. Berg) Mattos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>       Myrtaceae  Myrcia                 bella           Cambess.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>       Lauraceae  Ocotea             <span style="color:#a6e22e">pulchella </span>(Nees <span style="color:#f92672">&amp;</span> Mart.) Mez
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> Melastomataceae Miconia                    <span style="color:#66d9ef">NA</span>        Ruiz <span style="color:#f92672">&amp;</span> Pav.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>       Rubiaceae  Coffea arabica var. amarella        A. Froehner
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>              <span style="color:#66d9ef">NA</span>    Bleh                    <span style="color:#66d9ef">NA</span>                 <span style="color:#66d9ef">NA</span>
</span></span><span style="display:flex;"><span>            source source.id   status confidence suggestion       database
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>              TRO <span style="color:#ae81ff">100227036</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>             WCSP    <span style="color:#ae81ff">131057</span> Accepted          H         <span style="color:#66d9ef">NA</span> The Plant List
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#a6e22e">WCSP </span>(<span style="color:#66d9ef">in</span> review)    <span style="color:#ae81ff">989758</span> Accepted          M         <span style="color:#66d9ef">NA</span> The Plant List
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>              TRO  <span style="color:#ae81ff">40018467</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>              TRO <span style="color:#ae81ff">100170231</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Tropicos
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>               <span style="color:#66d9ef">NA</span>        <span style="color:#66d9ef">NA</span>       <span style="color:#66d9ef">NA</span>         <span style="color:#66d9ef">NA</span>       Baea             <span style="color:#66d9ef">NA</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># We made a light wrapper around the Taxonstand package to search</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Theplantlist.org too</span>
</span></span><span style="display:flex;"><span>splist <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Heliathus annuus&#34;</span>, <span style="color:#e6db74">&#34;Abies procera&#34;</span>, <span style="color:#e6db74">&#34;Poa annua&#34;</span>, <span style="color:#e6db74">&#34;Platanus occidentalis&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Carex abrupta&#34;</span>, <span style="color:#e6db74">&#34;Arctostaphylos canescens&#34;</span>, <span style="color:#e6db74">&#34;Ocimum basilicum&#34;</span>, <span style="color:#e6db74">&#34;Vicia faba&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;Quercus kelloggii&#34;</span>, <span style="color:#e6db74">&#34;Lactuca serriola&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">tpl_search</span>(taxon <span style="color:#f92672">=</span> splist)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>            Genus      Species Infraspecific Plant.Name.Index
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>       Heliathus       annuus                          <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>           Abies      procera                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>             Poa        annua                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Platanus occidentalis                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>           Carex      abrupta                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Arctostaphylos    canescens                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>          Ocimum    basilicum                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>           Vicia         faba                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>         Quercus    kelloggii                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>        Lactuca     serriola                           <span style="color:#66d9ef">TRUE</span>
</span></span><span style="display:flex;"><span>   Taxonomic.status      Family      New.Genus  New.Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                    Heliathus       annuus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Accepted    Pinaceae          Abies      procera
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>          Accepted     Poaceae            Poa        annua
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>          Accepted Platanaceae       Platanus occidentalis
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>          Accepted  Cyperaceae          Carex      abrupta
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>          Accepted   Ericaceae Arctostaphylos    canescens
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>          Accepted   Lamiaceae         Ocimum    basilicum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>          Accepted Leguminosae          Vicia         faba
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Accepted    Fagaceae        Quercus    kelloggii
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Accepted  Compositae        Lactuca     serriola
</span></span><span style="display:flex;"><span>   New.Infraspecific Authority  Typo WFormat
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                              <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>                       Rehder <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>               <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">NA</span><span style="color:#f92672">&gt;</span>     Mack. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>                       Eastw. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>                           L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>               <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">NA</span><span style="color:#f92672">&gt;</span>     Newb. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>                          L. <span style="color:#66d9ef">FALSE</span>   <span style="color:#66d9ef">FALSE</span>
</span></span></code></pre></div><hr>
<h3 id="taxonomic-hierarchies">Taxonomic hierarchies</h3>
<h4 id="i-often-want-the-full-taxonomic-hierarchy-for-a-set-of-species-that-is-give-me-the-family-order-class-etc-for-my-list-of-species-there-are-two-different-easy-ways-to-do-this-with-taxize-the-first-example-uses-eol">I often want the full taxonomic hierarchy for a set of species. That is, give me the family, order, class, etc. for my list of species. There are two different easy ways to do this with <code>taxize</code>. The first example uses EOL.</h4>
<hr>
<h4 id="using-eol">Using EOL.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>pageid <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eol_search</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>)<span style="color:#f92672">$</span>id[1]  <span style="color:#75715e"># first need to search for the taxon&#39;s page on EOL</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">eol_pages</span>(taxonconceptID <span style="color:#f92672">=</span> pageid)  <span style="color:#75715e"># then we nee to get the taxon ID used by EOL</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Notice that there are multiple different sources you can pull the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># hierarchy from. Note even that you can get the hierarchy from the ITIS</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># service via this EOL API.</span>
</span></span><span style="display:flex;"><span>out
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  identifier                 scientificName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">46203061</span> Quercus douglasii Hook. <span style="color:#f92672">&amp;</span> Arn.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">48373995</span> Quercus douglasii Hook. <span style="color:#f92672">&amp;</span> Arn.
</span></span><span style="display:flex;"><span>                                  nameAccordingTo sourceIdentfier
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  Integrated Taxonomic Information <span style="color:#a6e22e">System </span>(ITIS)           <span style="color:#ae81ff">19322</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> Species <span style="color:#ae81ff">2000</span> <span style="color:#f92672">&amp;</span> ITIS Catalogue of Life<span style="color:#f92672">:</span> May <span style="color:#ae81ff">2012</span>         <span style="color:#ae81ff">9723391</span>
</span></span><span style="display:flex;"><span>  taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Species
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Then the hierarchy!</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">eol_hierarchy</span>(out[out<span style="color:#f92672">$</span>nameAccordingTo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Species 2000 &amp; ITIS Catalogue of Life: May 2012&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;identifier&#34;</span>])
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  sourceIdentifier  taxonID parentNameUsageID taxonConceptID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">11017504</span> <span style="color:#ae81ff">48276627</span>                 <span style="color:#ae81ff">0</span>            <span style="color:#ae81ff">281</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>         <span style="color:#ae81ff">11017505</span> <span style="color:#ae81ff">48276628</span>          <span style="color:#ae81ff">48276627</span>            <span style="color:#ae81ff">282</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>         <span style="color:#ae81ff">11017506</span> <span style="color:#ae81ff">48276629</span>          <span style="color:#ae81ff">48276628</span>            <span style="color:#ae81ff">283</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>         <span style="color:#ae81ff">11022500</span> <span style="color:#ae81ff">48373354</span>          <span style="color:#ae81ff">48276629</span>           <span style="color:#ae81ff">4184</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>         <span style="color:#ae81ff">11025284</span> <span style="color:#ae81ff">48373677</span>          <span style="color:#ae81ff">48373354</span>           <span style="color:#ae81ff">4197</span>
</span></span><span style="display:flex;"><span>  scientificName taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>        Plantae   kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  Magnoliophyta    phylum
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  Magnoliopsida     class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>        Fagales     order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>       Fagaceae    family
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">eol_hierarchy</span>(out[out<span style="color:#f92672">$</span>nameAccordingTo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Integrated Taxonomic Information System (ITIS)&#34;</span>, 
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;identifier&#34;</span>])  <span style="color:#75715e"># and from ITIS, slightly different than ITIS output below, which includes taxa all the way down.</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>   sourceIdentifier  taxonID parentNameUsageID taxonConceptID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>            <span style="color:#ae81ff">202422</span> <span style="color:#ae81ff">46150613</span>                 <span style="color:#ae81ff">0</span>            <span style="color:#ae81ff">281</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>            <span style="color:#ae81ff">846492</span> <span style="color:#ae81ff">46159776</span>          <span style="color:#ae81ff">46150613</span>        <span style="color:#ae81ff">8654492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>            <span style="color:#ae81ff">846494</span> <span style="color:#ae81ff">46161961</span>          <span style="color:#ae81ff">46159776</span>       <span style="color:#ae81ff">28818077</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>            <span style="color:#ae81ff">846496</span> <span style="color:#ae81ff">46167532</span>          <span style="color:#ae81ff">46161961</span>           <span style="color:#ae81ff">4494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>            <span style="color:#ae81ff">846504</span> <span style="color:#ae81ff">46169010</span>          <span style="color:#ae81ff">46167532</span>       <span style="color:#ae81ff">28825126</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>            <span style="color:#ae81ff">846505</span> <span style="color:#ae81ff">46169011</span>          <span style="color:#ae81ff">46169010</span>            <span style="color:#ae81ff">282</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>             <span style="color:#ae81ff">18063</span> <span style="color:#ae81ff">46169012</span>          <span style="color:#ae81ff">46169011</span>            <span style="color:#ae81ff">283</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>            <span style="color:#ae81ff">846548</span> <span style="color:#ae81ff">46202954</span>          <span style="color:#ae81ff">46169012</span>       <span style="color:#ae81ff">28859070</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>             <span style="color:#ae81ff">19273</span> <span style="color:#ae81ff">46202955</span>          <span style="color:#ae81ff">46202954</span>           <span style="color:#ae81ff">4184</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>            <span style="color:#ae81ff">19275</span> <span style="color:#ae81ff">46203022</span>          <span style="color:#ae81ff">46202955</span>           <span style="color:#ae81ff">4197</span>
</span></span><span style="display:flex;"><span>    scientificName     taxonRank
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>          Plantae       kingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Viridaeplantae    subkingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>     Streptophyta  infrakingdom
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Tracheophyta      division
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  Spermatophytina   subdivision
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>     Angiospermae infradivision
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>    Magnoliopsida         class
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>          Rosanae    superorder
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Fagales         order
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>        Fagaceae        family
</span></span></code></pre></div><hr>
<h4 id="and-getting-a-taxonomic-hierarchy-using-itis">And getting a taxonomic hierarchy using ITIS.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># First, get the taxonomic serial number (TSN) that ITIS uses</span>
</span></span><span style="display:flex;"><span>mytsn <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_tsn</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>, <span style="color:#e6db74">&#34;sciname&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Quercus douglasii &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get the full taxonomic hierarchy for a taxon from the TSN</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">itis</span>(mytsn, <span style="color:#e6db74">&#34;getfullhierarchyfromtsn&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>        parentName parentTsn      rankName         taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                  Kingdom           Plantae <span style="color:#ae81ff">202422</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Plantae    <span style="color:#ae81ff">202422</span>    Subkingdom    Viridaeplantae <span style="color:#ae81ff">846492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>   Viridaeplantae    <span style="color:#ae81ff">846492</span>  Infrakingdom      Streptophyta <span style="color:#ae81ff">846494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Streptophyta    <span style="color:#ae81ff">846494</span>      Division      Tracheophyta <span style="color:#ae81ff">846496</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     Tracheophyta    <span style="color:#ae81ff">846496</span>   Subdivision   Spermatophytina <span style="color:#ae81ff">846504</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Spermatophytina    <span style="color:#ae81ff">846504</span> Infradivision      Angiospermae <span style="color:#ae81ff">846505</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>     Angiospermae    <span style="color:#ae81ff">846505</span>         Class     Magnoliopsida  <span style="color:#ae81ff">18063</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>    Magnoliopsida     <span style="color:#ae81ff">18063</span>    Superorder           Rosanae <span style="color:#ae81ff">846548</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Rosanae    <span style="color:#ae81ff">846548</span>         Order           Fagales  <span style="color:#ae81ff">19273</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Fagales     <span style="color:#ae81ff">19273</span>        Family          Fagaceae  <span style="color:#ae81ff">19275</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>        Fagaceae     <span style="color:#ae81ff">19275</span>         Genus           Quercus  <span style="color:#ae81ff">19276</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>         Quercus     <span style="color:#ae81ff">19276</span>       Species Quercus douglasii  <span style="color:#ae81ff">19322</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># But this can be even easier!</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">classification</span>(<span style="color:#a6e22e">get_tsn</span>(<span style="color:#e6db74">&#34;Quercus douglasii&#34;</span>))  <span style="color:#75715e"># Boom!</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Retrieving data <span style="color:#66d9ef">for</span> species <span style="color:#e6db74">&#39; Quercus douglasii &#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>        parentName parentTsn      rankName         taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                                  Kingdom           Plantae <span style="color:#ae81ff">202422</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>          Plantae    <span style="color:#ae81ff">202422</span>    Subkingdom    Viridaeplantae <span style="color:#ae81ff">846492</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>   Viridaeplantae    <span style="color:#ae81ff">846492</span>  Infrakingdom      Streptophyta <span style="color:#ae81ff">846494</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>     Streptophyta    <span style="color:#ae81ff">846494</span>      Division      Tracheophyta <span style="color:#ae81ff">846496</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>     Tracheophyta    <span style="color:#ae81ff">846496</span>   Subdivision   Spermatophytina <span style="color:#ae81ff">846504</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  Spermatophytina    <span style="color:#ae81ff">846504</span> Infradivision      Angiospermae <span style="color:#ae81ff">846505</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>     Angiospermae    <span style="color:#ae81ff">846505</span>         Class     Magnoliopsida  <span style="color:#ae81ff">18063</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>    Magnoliopsida     <span style="color:#ae81ff">18063</span>    Superorder           Rosanae <span style="color:#ae81ff">846548</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>          Rosanae    <span style="color:#ae81ff">846548</span>         Order           Fagales  <span style="color:#ae81ff">19273</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>         Fagales     <span style="color:#ae81ff">19273</span>        Family          Fagaceae  <span style="color:#ae81ff">19275</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>        Fagaceae     <span style="color:#ae81ff">19275</span>         Genus           Quercus  <span style="color:#ae81ff">19276</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>         Quercus     <span style="color:#ae81ff">19276</span>       Species Quercus douglasii  <span style="color:#ae81ff">19322</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># You can also do this easy-peasy route to a taxonomic hierarchy using</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># uBio</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">classification</span>(<span style="color:#a6e22e">get_uid</span>(<span style="color:#e6db74">&#34;Ornithorhynchus anatinus&#34;</span>))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#f92672">$</span>`1`
</span></span><span style="display:flex;"><span>       ScientificName         Rank    UID
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  cellular organisms      no rank <span style="color:#ae81ff">131567</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>           Eukaryota superkingdom   <span style="color:#ae81ff">2759</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>        Opisthokonta      no rank  <span style="color:#ae81ff">33154</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>             Metazoa      kingdom  <span style="color:#ae81ff">33208</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>           Eumetazoa      no rank   <span style="color:#ae81ff">6072</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>           Bilateria      no rank  <span style="color:#ae81ff">33213</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>           Coelomata      no rank  <span style="color:#ae81ff">33316</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>       Deuterostomia      no rank  <span style="color:#ae81ff">33511</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>            Chordata       phylum   <span style="color:#ae81ff">7711</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span>           Craniata    subphylum  <span style="color:#ae81ff">89593</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span>         Vertebrata      no rank   <span style="color:#ae81ff">7742</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">12</span>      Gnathostomata   superclass   <span style="color:#ae81ff">7776</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span>         Teleostomi      no rank <span style="color:#ae81ff">117570</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">14</span>       Euteleostomi      no rank <span style="color:#ae81ff">117571</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">15</span>      Sarcopterygii      no rank   <span style="color:#ae81ff">8287</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">16</span>          Tetrapoda      no rank  <span style="color:#ae81ff">32523</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">17</span>            Amniota      no rank  <span style="color:#ae81ff">32524</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">18</span>           Mammalia        class  <span style="color:#ae81ff">40674</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">19</span>        Prototheria      no rank   <span style="color:#ae81ff">9254</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">20</span>        Monotremata        order   <span style="color:#ae81ff">9255</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">21</span>  Ornithorhynchidae       family   <span style="color:#ae81ff">9256</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">22</span>    Ornithorhynchus        genus   <span style="color:#ae81ff">9257</span>
</span></span></code></pre></div><hr>
<h3 id="sequences">Sequences?</h3>
<h4 id="while-you-are-at-doing-taxonomic-stuff-you-often-wonder-hmmm-i-wonder-if-there-are-any-sequence-data-available-for-my-species-so-you-can-use-get_seqs-to-search-for-specific-genes-for-a-species-and-get_genes_avail-to-find-out-what-genes-are-available-for-a-certain-species-these-functions-search-for-data-on-ncbi">While you are at doing taxonomic stuff, you often wonder &ldquo;hmmm, I wonder if there are any sequence data available for my species?&rdquo; So, you can use <code>get_seqs</code> to search for specific genes for a species, and <code>get_genes_avail</code> to find out what genes are available for a certain species. These functions search for data on <a href="http://www.ncbi.nlm.nih.gov/">NCBI</a>.</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get sequences (sequence is provied in output, but hiding here for</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># brevity). What&#39;s nice about this is that it gets the longest sequence</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># avaialable for the gene you searched for, and if there isn&#39;t anything</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># available, it lets you get a sequence from a congener if you set</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># getrelated=TRUE. The last column in the output data.frame also tells you</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># what species the sequence is from.</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_seqs</span>(taxon_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Acipenser brevirostrum&#34;</span>, gene <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;5S rRNA&#34;</span>), 
</span></span><span style="display:flex;"><span>    seqrange <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1:3000&#34;</span>, getrelated <span style="color:#f92672">=</span> T, writetodf <span style="color:#f92672">=</span> F)
</span></span><span style="display:flex;"><span>out[, <span style="color:#f92672">!</span><span style="color:#a6e22e">names</span>(out) <span style="color:#f92672">%in%</span> <span style="color:#e6db74">&#34;sequence&#34;</span>]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>                   taxon                                         gene_desc
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> Acipenser brevirostrum Acipenser brevirostrum <span style="color:#ae81ff">5</span>S rRNA gene, clone BRE92A
</span></span><span style="display:flex;"><span>     gi_no     acc_no length                 spused
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">60417159</span> AJ745069.1    <span style="color:#ae81ff">121</span> Acipenser brevirostrum
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Search for available sequences</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_genes_avail</span>(taxon_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Umbra limi&#34;</span>, seqrange <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1:2000&#34;</span>, getrelated <span style="color:#f92672">=</span> F)
</span></span><span style="display:flex;"><span>out<span style="color:#a6e22e">[grep</span>(<span style="color:#e6db74">&#34;RAG1&#34;</span>, out<span style="color:#f92672">$</span>genesavail, ignore.case <span style="color:#f92672">=</span> T), ]  <span style="color:#75715e"># does the string &#39;RAG1&#39; exist in any of the gene names</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>        spused length
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span> Umbra limi    <span style="color:#ae81ff">732</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span> Umbra limi    <span style="color:#ae81ff">959</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span> Umbra limi   <span style="color:#ae81ff">1631</span>
</span></span><span style="display:flex;"><span>                                                                            genesavail
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span> isolate UlimA recombinase activating protein <span style="color:#ae81ff">1</span> (rag1) gene, exon <span style="color:#ae81ff">3</span> and partial cds
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span>           recombination<span style="color:#f92672">-</span>activating protein <span style="color:#ae81ff">1</span> (RAG1) gene, intron <span style="color:#ae81ff">2</span> and partial cds
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span>                        recombination<span style="color:#f92672">-</span>activating protein <span style="color:#ae81ff">1</span> (RAG1) gene, partial cds
</span></span><span style="display:flex;"><span>    predicted
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">414</span>  JX190826
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">427</span>  AY459526
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">434</span>  AY380548
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-12-06-taxize.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-12-06-taxize.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
    <item>
      <title>Getting taxonomic names downstream</title>
      <link>http://localhost:1313/2012/10/get-taxa-downstream/</link>
      <pubDate>Tue, 16 Oct 2012 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2012/10/get-taxa-downstream/</guid>
      <description>&lt;p&gt;It can be a pain in the ass to get taxonomic names. For example, I sometimes need to get all the Class names for a set of species.  This is a relatively easy problem using the &lt;a href=&#34;http://www.itis.gov/ws_description.html&#34;&gt;ITIS API&lt;/a&gt; (example below).&lt;/p&gt;
&lt;p&gt;The much harder problem is getting all the taxonomic names downstream. ITIS doesn&amp;rsquo;t provide an API method for this - well, they do (&lt;a href=&#34;http://www.itis.gov/ws_hierApiDescription.html#getHierarchyDn&#34;&gt;&lt;code&gt;getHirerachyDownFromTSN&lt;/code&gt;&lt;/a&gt;), but it only provides direct children (e.g., the genera within a tribe - but it won&amp;rsquo;t give all the species within each genus).&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>It can be a pain in the ass to get taxonomic names. For example, I sometimes need to get all the Class names for a set of species.  This is a relatively easy problem using the <a href="http://www.itis.gov/ws_description.html">ITIS API</a> (example below).</p>
<p>The much harder problem is getting all the taxonomic names downstream. ITIS doesn&rsquo;t provide an API method for this - well, they do (<a href="http://www.itis.gov/ws_hierApiDescription.html#getHierarchyDn"><code>getHirerachyDownFromTSN</code></a>), but it only provides direct children (e.g., the genera within a tribe - but it won&rsquo;t give all the species within each genus).</p>
<p>So in the <code>taxize</code> package, we wrote a function called <code>downstream</code>, which allows you to get taxonomic names to any downstream point, e.g.:</p>
<ul>
<li>get all Classes within Animalia,</li>
<li>get all Species within a Family</li>
<li>etc.</li>
</ul>
<h3 id="install-packages--you-can-get-other-packages-from-cran-but-taxize-is-only-on-github-for-now">Install packages.  You can get other packages from CRAN, but taxize is only on GitHub for now.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;ritis&#39;, &#39;ropensci&#39;) # uncomment if not already installed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># install_github(&#39;taxize&#39;, &#39;ropensci&#39;) # uncomment if not already</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ritis)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(taxize)
</span></span></code></pre></div><h3 id="get-upstream-taxonomic-names">Get upstream taxonomic names.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Search for a TSN by scientific name</span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">searchbyscientificname</span>(<span style="color:#e6db74">&#34;Tardigrada&#34;</span>)
</span></span><span style="display:flex;"><span>tsn <span style="color:#f92672">&lt;-</span> df[df<span style="color:#f92672">$</span>combinedname <span style="color:#f92672">%in%</span> <span style="color:#e6db74">&#34;Tardigrada&#34;</span>, <span style="color:#e6db74">&#34;tsn&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get just one immediate higher taxonomic name</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">gethierarchyupfromtsn</span>(tsn <span style="color:#f92672">=</span> tsn)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  parentName parentTsn rankName  taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>   Animalia    <span style="color:#ae81ff">202423</span>   Phylum Tardigrada <span style="color:#ae81ff">155166</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get full hierarchy upstream from TSN</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">getfullhierarchyfromtsn</span>(tsn <span style="color:#f92672">=</span> tsn)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>  parentName parentTsn rankName        taxonName    tsn
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>                       Kingdom         Animalia <span style="color:#ae81ff">202423</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>   Animalia    <span style="color:#ae81ff">202423</span>   Phylum       Tardigrada <span style="color:#ae81ff">155166</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class     Eutardigrada <span style="color:#ae81ff">155362</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class Heterotardigrada <span style="color:#ae81ff">155167</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span> Tardigrada    <span style="color:#ae81ff">155166</span>    Class   Mesotardigrada <span style="color:#ae81ff">155358</span>
</span></span></code></pre></div><h3 id="get-taxonomc-names-downstream">Get taxonomc names downstream.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get genera downstream fromthe Class Bangiophyceae</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">846509</span>, <span style="color:#e6db74">&#34;Genus&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>    tsn parentName parentTsn   taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">11531</span> Bangiaceae     <span style="color:#ae81ff">11530</span>      Bangia    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">11540</span> Bangiaceae     <span style="color:#ae81ff">11530</span>    Porphyra    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">11577</span> Bangiaceae     <span style="color:#ae81ff">11530</span> Porphyrella    <span style="color:#ae81ff">180</span>    Genus
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">11580</span> Bangiaceae     <span style="color:#ae81ff">11530</span> Conchocelis    <span style="color:#ae81ff">180</span>    Genus
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Get families downstream from Acridoidea</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">650497</span>, <span style="color:#e6db74">&#34;Family&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>      tsn parentName parentTsn      taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">102195</span> Acridoidea    <span style="color:#ae81ff">650497</span>      Acrididae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">650502</span> Acridoidea    <span style="color:#ae81ff">650497</span>     Romaleidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">657472</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Charilaidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">657473</span> Acridoidea    <span style="color:#ae81ff">650497</span>   Lathiceridae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">657474</span> Acridoidea    <span style="color:#ae81ff">650497</span>     Lentulidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">657475</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Lithidiidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">7</span>  <span style="color:#ae81ff">657476</span> Acridoidea    <span style="color:#ae81ff">650497</span>   Ommexechidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">8</span>  <span style="color:#ae81ff">657477</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Pamphagidae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">9</span>  <span style="color:#ae81ff">657478</span> Acridoidea    <span style="color:#ae81ff">650497</span>  Pyrgacrididae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">10</span> <span style="color:#ae81ff">657479</span> Acridoidea    <span style="color:#ae81ff">650497</span>    Tristiridae    <span style="color:#ae81ff">140</span>   Family
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">11</span> <span style="color:#ae81ff">657492</span> Acridoidea    <span style="color:#ae81ff">650497</span> Dericorythidae    <span style="color:#ae81ff">140</span>   Family
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get species downstream from Ursus</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">downstream</span>(<span style="color:#ae81ff">180541</span>, <span style="color:#e6db74">&#34;Species&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>     tsn parentName parentTsn        taxonName rankId rankName
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#ae81ff">180542</span>      Ursus    <span style="color:#ae81ff">180541</span>  Ursus maritimus    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span> <span style="color:#ae81ff">180543</span>      Ursus    <span style="color:#ae81ff">180541</span>     Ursus arctos    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span> <span style="color:#ae81ff">180544</span>      Ursus    <span style="color:#ae81ff">180541</span> Ursus americanus    <span style="color:#ae81ff">220</span>  Species
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">4</span> <span style="color:#ae81ff">621850</span>      Ursus    <span style="color:#ae81ff">180541</span> Ursus thibetanus    <span style="color:#ae81ff">220</span>  Species
</span></span></code></pre></div><hr>
<p>Get the .Rmd file used to create this post <a href="https://github.com/sckott/sckott.github.com/tree/master/_drafts/2012-10-16-get-taxa-downstream.Rmd">at my github account</a> - or <a href="https://github.com/sckott/sckott.github.com/tree/master/_posts/2012-10-16-get-taxa-downstream.md">.md file</a>.</p>
<p>Written in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with help from <a href="http://yihui.name/knitr/">knitr</a>.</p>
]]></content:encoded>
    </item>
  </channel>
</rss>
