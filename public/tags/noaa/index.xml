<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>NOAA on Recology</title>
    <link>http://localhost:1313/tags/noaa/</link>
    <description>Recent content in NOAA on Recology</description>
    <generator>Hugo -- 0.144.1</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 07 Jul 2015 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/noaa/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>rnoaa - Weather data in R</title>
      <link>http://localhost:1313/2015/07/weather-data-with-rnoaa/</link>
      <pubDate>Tue, 07 Jul 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/07/weather-data-with-rnoaa/</guid>
      <description>&lt;p&gt;NOAA provides a lot of weather data, across many different websites under different project names. The R package &lt;code&gt;rnoaa&lt;/code&gt; accesses many of these, including:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NOAA NCDC climate data, using the &lt;a href=&#34;https://www.ncdc.noaa.gov/cdo-web/webservices/v2&#34;&gt;NCDC API version 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;ftp://ftp.ncdc.noaa.gov/pub/data/ghcn/daily/&#34;&gt;GHCND FTP data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;ftp://ftp.ncdc.noaa.gov/pub/data/noaa/&#34;&gt;ISD FTP data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Severe weather data docs are at &lt;a href=&#34;https://www.ncdc.noaa.gov/swdiws/&#34;&gt;https://www.ncdc.noaa.gov/swdiws/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/shapefiles&#34;&gt;Sea ice data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ndbc.noaa.gov/&#34;&gt;NOAA buoy data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Tornadoes! Data from the &lt;a href=&#34;https://www.spc.noaa.gov/gis/svrgis/&#34;&gt;NOAA Storm Prediction Center&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;HOMR - Historical Observing Metadata Repository - from &lt;a href=&#34;https://www.ncdc.noaa.gov/homr/api&#34;&gt;NOAA NCDC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Storm data - from the &lt;a href=&#34;https://www.ncdc.noaa.gov/ibtracs/index.php?name=wmo-data&#34;&gt;International Best Track Archive for Climate Stewardship (IBTrACS)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;rnoaa&lt;/code&gt; used to provide access to &lt;a href=&#34;https://upwell.pfeg.noaa.gov/erddap/index.html&#34;&gt;ERDDAP servers&lt;/a&gt;, but a separate package &lt;a href=&#34;https://github.com/ropensci/rerddap&#34;&gt;rerddap&lt;/a&gt; focuses on just those data sources.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>NOAA provides a lot of weather data, across many different websites under different project names. The R package <code>rnoaa</code> accesses many of these, including:</p>
<ul>
<li>NOAA NCDC climate data, using the <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2">NCDC API version 2</a></li>
<li><a href="ftp://ftp.ncdc.noaa.gov/pub/data/ghcn/daily/">GHCND FTP data</a></li>
<li><a href="ftp://ftp.ncdc.noaa.gov/pub/data/noaa/">ISD FTP data</a></li>
<li>Severe weather data docs are at <a href="https://www.ncdc.noaa.gov/swdiws/">https://www.ncdc.noaa.gov/swdiws/</a></li>
<li><a href="ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/shapefiles">Sea ice data</a></li>
<li><a href="https://www.ndbc.noaa.gov/">NOAA buoy data</a></li>
<li>Tornadoes! Data from the <a href="https://www.spc.noaa.gov/gis/svrgis/">NOAA Storm Prediction Center</a></li>
<li>HOMR - Historical Observing Metadata Repository - from <a href="https://www.ncdc.noaa.gov/homr/api">NOAA NCDC</a></li>
<li>Storm data - from the <a href="https://www.ncdc.noaa.gov/ibtracs/index.php?name=wmo-data">International Best Track Archive for Climate Stewardship (IBTrACS)</a></li>
</ul>
<p><code>rnoaa</code> used to provide access to <a href="https://upwell.pfeg.noaa.gov/erddap/index.html">ERDDAP servers</a>, but a separate package <a href="https://github.com/ropensci/rerddap">rerddap</a> focuses on just those data sources.</p>
<p>We focus on getting you the data, so there&rsquo;s very little in <code>rnoaa</code> for visualizing, statistics, etc.</p>
<h2 id="installation">Installation</h2>
<p>The newest version should be on CRAN in the next few days. In the meantime, let&rsquo;s install from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/rnoaa&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;rnoaa&#34;</span>)
</span></span></code></pre></div><p>There&rsquo;s an example using the <code>lawn</code>, <code>sp</code>, and <code>dplyr</code> packages. If you want to try those, install like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;lawn&#34;</span>, <span style="color:#e6db74">&#34;dplyr&#34;</span>, <span style="color:#e6db74">&#34;sp&#34;</span>))
</span></span></code></pre></div><h2 id="ncdc">NCDC</h2>
<ul>
<li>NCDC = National Climatic Data Center</li>
<li>Data comes from a RESTful API described at <a href="https://www.ncdc.noaa.gov/cdo-web/webservices/v2">https://www.ncdc.noaa.gov/cdo-web/webservices/v2</a></li>
</ul>
<p>This web service requires an API key - get one at <a href="https://www.ncdc.noaa.gov/cdo-web/token">https://www.ncdc.noaa.gov/cdo-web/token</a> if you don&rsquo;t already have one. NCDC provides access to many different datasets:</p>
<!-- raw HTML omitted -->
<p>The main function to get data from NCDC is <code>ncdc()</code>. <code>datasetid</code>, <code>startdate</code>, and <code>enddate</code> are required parameters. A quick example, here getting data from the GHCND dataset, from a particular station, and from Oct 1st 2013 to Dec 12th 2013:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ncdc</span>(datasetid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;GHCND&#39;</span>, stationid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;GHCND:USW00014895&#39;</span>, startdate <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;2013-10-01&#39;</span>,
</span></span><span style="display:flex;"><span>   enddate <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;2013-12-01&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$totalCount</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 697</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$pageCount</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 25</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$offset</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [25 x 8]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                   date datatype           station value fl_m fl_q fl_so</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2013-10-01T00:00:00     AWND GHCND:USW00014895    29               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2013-10-01T00:00:00     PRCP GHCND:USW00014895     0               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2013-10-01T00:00:00     SNOW GHCND:USW00014895     0               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2013-10-01T00:00:00     SNWD GHCND:USW00014895     0               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2013-10-01T00:00:00     TAVG GHCND:USW00014895   179    H          S</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2013-10-01T00:00:00     TMAX GHCND:USW00014895   250               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2013-10-01T00:00:00     TMIN GHCND:USW00014895   133               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2013-10-01T00:00:00     WDF2 GHCND:USW00014895   210               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2013-10-01T00:00:00     WDF5 GHCND:USW00014895   230               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2013-10-01T00:00:00     WSF2 GHCND:USW00014895    76               W</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..                 ...      ...               ...   ...  ...  ...   ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: fl_t (chr)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ncdc_data&#34;</span>
</span></span></code></pre></div><p>You probably won&rsquo;t know what station you want data from off hand though, so you can first search for  stations, in this example using a bounding box that defines a rectangular area near Seattle</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;lawn&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">lawn_bbox_polygon</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-122.2047</span>, <span style="color:#ae81ff">47.5204</span>, <span style="color:#ae81ff">-122.1065</span>, <span style="color:#ae81ff">47.6139</span>)) <span style="color:#f92672">%&gt;%</span> view
</span></span></code></pre></div><p><img alt="lawnplot" loading="lazy" src="/2015-07-07-weather-data-with-rnoaa/lawnplot.png"></p>
<p>We&rsquo;ll search within that bounding box for weather stations.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ncdc_stations</span>(extent <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">47.5204</span>, <span style="color:#ae81ff">-122.2047</span>, <span style="color:#ae81ff">47.6139</span>, <span style="color:#ae81ff">-122.1065</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$totalCount</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 9</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$pageCount</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 25</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$offset</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [9 x 9]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   elevation    mindate    maxdate latitude                         name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     199.6 2008-06-01 2015-06-29  47.5503      EASTGATE 1.7 SSW, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     240.8 2010-05-01 2015-07-05  47.5604       EASTGATE 1.1 SW, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3      85.6 2008-07-01 2015-07-05  47.5916        BELLEVUE 0.8 S, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     104.2 2008-06-01 2015-07-05  47.5211 NEWPORT HILLS 1.9 SSE, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5      58.5 2008-08-01 2009-04-12  47.6138      BELLEVUE 2.3 ENE, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     199.9 2008-06-01 2009-11-22  47.5465   NEWPORT HILLS 1.4 E, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7      27.1 2008-07-01 2015-07-05  47.6046        BELLEVUE 1.8 W, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8     159.4 2008-11-01 2015-07-05  47.5694      BELLEVUE 2.3 SSE, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9      82.3 2008-12-01 2010-09-17  47.6095       BELLEVUE 0.6 NE, WA US</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: datacoverage (dbl), id (chr), elevationUnit (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   longitude (dbl)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ncdc_stations&#34;</span>
</span></span></code></pre></div><p>And there are 9 found. We could then use their station ids (e.g., <code>GHCND:US1WAKG0024</code>) to search for data using <code>ncdc()</code>, or search for what kind of data that station has with <code>ncdc_datasets()</code>, or other functions.</p>
<h2 id="ghcnd">GHCND</h2>
<ul>
<li>GHCND = Global Historical Climatology Network Daily (Data)</li>
<li>Data comes from an FTP server</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;dplyr&#34;</span>)
</span></span><span style="display:flex;"><span>dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ghcnd</span>(stationid <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;AGE00147704&#34;</span>)
</span></span><span style="display:flex;"><span>dat<span style="color:#f92672">$</span>data <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(element <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;PRCP&#34;</span>, year <span style="color:#f92672">==</span> <span style="color:#ae81ff">1909</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;            id year month element VALUE1 MFLAG1 QFLAG1 SFLAG1 VALUE2 MFLAG2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 AGE00147704 1909    11    PRCP  -9999     NA                -9999     NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 AGE00147704 1909    12    PRCP     23     NA             E      0     NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   QFLAG2 SFLAG2 VALUE3 MFLAG3 QFLAG3 SFLAG3 VALUE4 MFLAG4 QFLAG4 SFLAG4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                -9999     NA                -9999     NA              </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2             E      0     NA             E      0     NA             E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   VALUE5 MFLAG5 QFLAG5 SFLAG5 VALUE6 MFLAG6 QFLAG6 SFLAG6 VALUE7 MFLAG7</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  -9999     NA                -9999     NA                -9999     NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2      0     NA             E      0     NA             E      0     NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   QFLAG7 SFLAG7 VALUE8 MFLAG8 QFLAG8 SFLAG8 VALUE9 MFLAG9 QFLAG9 SFLAG9</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     NA         -9999     NA                -9999     NA              </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     NA      E    250     NA             E     75     NA             E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   VALUE10 MFLAG10 QFLAG10 SFLAG10 VALUE11 MFLAG11 QFLAG11 SFLAG11 VALUE12</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   -9999      NA                   -9999      NA                   -9999</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     131      NA               E       0      NA               E       0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   MFLAG12 QFLAG12 SFLAG12 VALUE13 MFLAG13 QFLAG13 SFLAG13 VALUE14 MFLAG14</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      NA                   -9999      NA                   -9999      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2      NA               E       0      NA               E       0      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   QFLAG14 SFLAG14 VALUE15 MFLAG15 QFLAG15 SFLAG15 VALUE16 MFLAG16 QFLAG16</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                   -9999      NA                   -9999      NA        </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2               E       0      NA               E       0      NA        </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   SFLAG16 VALUE17 MFLAG17 QFLAG17 SFLAG17 VALUE18 MFLAG18 QFLAG18 SFLAG18</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1           -9999      NA                   -9999      NA                </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       E       0      NA               E       0      NA               E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   VALUE19 MFLAG19 QFLAG19 SFLAG19 VALUE20 MFLAG20 QFLAG20 SFLAG20 VALUE21</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   -9999      NA      NA           -9999      NA      NA           -9999</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       0      NA      NA       E       0      NA      NA       E       0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   MFLAG21 QFLAG21 SFLAG21 VALUE22 MFLAG22 QFLAG22 SFLAG22 VALUE23 MFLAG23</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      NA                   -9999      NA                      22      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2      NA               E       0      NA               E       0      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   QFLAG23 SFLAG23 VALUE24 MFLAG24 QFLAG24 SFLAG24 VALUE25 MFLAG25 QFLAG25</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      NA       E       9      NA      NA       E       5      NA      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2      NA       E       0      NA      NA       E       0      NA      NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   SFLAG25 VALUE26 MFLAG26 QFLAG26 SFLAG26 VALUE27 MFLAG27 QFLAG27 SFLAG27</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1       E       0      NA               E      86      NA      NA       E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       E       0      NA               E       0      NA      NA       E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   VALUE28 MFLAG28 QFLAG28 SFLAG28 VALUE29 MFLAG29 QFLAG29 SFLAG29 VALUE30</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1       0      NA      NA       E      28      NA      NA       E       0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       0      NA      NA       E       0      NA      NA       E       0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   MFLAG30 QFLAG30 SFLAG30 VALUE31 MFLAG31 QFLAG31 SFLAG31</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      NA               E   -9999      NA      NA        </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2      NA               E      57      NA      NA       E</span>
</span></span></code></pre></div><p>You can also get to datasets by searching by station id, date min, date max, and variable. E.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ghcnd_search</span>(<span style="color:#e6db74">&#34;AGE00147704&#34;</span>, var <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;PRCP&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $prcp</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [9,803 x 6]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;             id  prcp       date mflag qflag sflag</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  AGE00147704 -9999 1909-11-01    NA            </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  AGE00147704    23 1909-12-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  AGE00147704    81 1910-01-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  AGE00147704     0 1910-02-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  AGE00147704    18 1910-03-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  AGE00147704     0 1910-04-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  AGE00147704   223 1910-05-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  AGE00147704     0 1910-06-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  AGE00147704     0 1910-07-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 AGE00147704     0 1910-08-01    NA           E</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..         ...   ...        ...   ...   ...   ...</span>
</span></span></code></pre></div><h2 id="isd">ISD</h2>
<ul>
<li>ISD = Integrated Surface Database</li>
<li>Data comes from an FTP server</li>
</ul>
<p>You&rsquo;ll likely first want to run <code>isd_stations()</code> to get list of stations</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>stations <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">isd_stations</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(stations)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   usaf  wban station_name ctry state icao lat lon elev_m    begin      end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 7005 99999   CWOS 07005                  NA  NA     NA 20120127 20120127</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 7011 99999   CWOS 07011                  NA  NA     NA 20111025 20121129</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 7018 99999   WXPOD 7018                   0   0   7018 20110309 20130730</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 7025 99999   CWOS 07025                  NA  NA     NA 20120127 20120127</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 7026 99999   WXPOD 7026   AF              0   0   7026 20120713 20141120</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 7034 99999   CWOS 07034                  NA  NA     NA 20121024 20121106</span>
</span></span></code></pre></div><p>Then get data from particular stations, like</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">isd</span>(usaf <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;011490&#34;</span>, wban <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;99999&#34;</span>, year <span style="color:#f92672">=</span> <span style="color:#ae81ff">1986</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ISD Data&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1328 X 85</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    total_chars usaf_station wban_station     date time date_flag latitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1           50        11490        99999 19860101    0         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          123        11490        99999 19860101  600         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3           50        11490        99999 19860101 1200         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4           94        11490        99999 19860101 1800         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5           50        11490        99999 19860102    0         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6          123        11490        99999 19860102  600         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7           50        11490        99999 19860102 1200         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8           94        11490        99999 19860102 1800         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9           50        11490        99999 19860103    0         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10         123        11490        99999 19860103  600         4    66267</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..         ...          ...          ...      ...  ...       ...      ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: longitude (int), type_code (chr), elevation (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      call_letter (int), quality (chr), wind_direction (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      wind_direction_quality (int), wind_code (chr), wind_speed (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      wind_speed_quality (int), ceiling_height (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      ceiling_height_quality (int), ceiling_height_determination (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      ceiling_height_cavok (chr), visibility_distance (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      visibility_distance_quality (int), visibility_code (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      visibility_code_quality (int), temperature (int), temperature_quality</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), temperature_dewpoint (int), temperature_dewpoint_quality</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), air_pressure (int), air_pressure_quality (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      AG1.precipitation (chr), AG1.discrepancy (int), AG1.est_water_depth</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), GF1.sky_condition (chr), GF1.coverage (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.opaque_coverage (int), GF1.coverage_quality (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.lowest_cover (int), GF1.lowest_cover_quality (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.low_cloud_genus (int), GF1.low_cloud_genus_quality (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.lowest_cloud_base_height (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.lowest_cloud_base_height_quality (int), GF1.mid_cloud_genus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), GF1.mid_cloud_genus_quality (int), GF1.high_cloud_genus (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      GF1.high_cloud_genus_quality (int), MD1.atmospheric_change (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      MD1.tendency (int), MD1.tendency_quality (int), MD1.three_hr (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      MD1.three_hr_quality (int), MD1.twentyfour_hr (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      MD1.twentyfour_hr_quality (int), REM.remarks (chr), REM.identifier</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (chr), REM.length_quantity (int), REM.comment (chr), KA1.extreme_temp</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (chr), KA1.period_quantity (int), KA1.max_min (chr), KA1.temp (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      KA1.temp_quality (int), AY1.manual_occurrence (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      AY1.condition_code (int), AY1.condition_quality (int), AY1.period</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), AY1.period_quality (int), AY2.manual_occurrence (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      AY2.condition_code (int), AY2.condition_quality (int), AY2.period</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      (int), AY2.period_quality (int), MW1.first_weather_reported (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      MW1.condition (int), MW1.condition_quality (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      EQD.observation_identifier (chr), EQD.observation_text (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      EQD.reason_code (int), EQD.parameter (chr),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      EQD.observation_identifier.1 (chr), EQD.observation_text.1 (int),</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      EQD.reason_code.1 (int), EQD.parameter.1 (chr)</span>
</span></span></code></pre></div><h2 id="severe-weather">Severe weather</h2>
<ul>
<li>SWDI = Severe Weather Data Inventory</li>
<li>From the SWDI site</li>
</ul>
<blockquote>
<p>The Severe Weather Data Inventory (SWDI) is an integrated database of severe weather records for the United States. The records in SWDI come from a variety of sources in the NCDC archive.</p></blockquote>
<p>The <code>swdi()</code> function allows you to get data in xml, csv, shp, or kmz format. You can get data from many different datasets:</p>
<ul>
<li>nx3tvs NEXRAD Level-3 Tornado Vortex Signatures (point)</li>
<li>nx3meso NEXRAD Level-3 Mesocyclone Signatures (point)</li>
<li>nx3hail NEXRAD Level-3 Hail Signatures (point)</li>
<li>nx3structure NEXRAD Level-3 Storm Cell Structure Information (point)</li>
<li>plsr Preliminary Local Storm Reports (point)</li>
<li>warn Severe Thunderstorm, Tornado, Flash Flood and Special Marine warnings (polygon)</li>
<li>nldn Lightning strikes from Vaisala (.gov and .mil ONLY) (point)</li>
</ul>
<p>An example: Get all <code>plsr</code> within the bounding box (-91,30,-90,31)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">swdi</span>(dataset <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;plsr&#39;</span>, startdate <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;20060505&#39;</span>, enddate <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;20060510&#39;</span>,
</span></span><span style="display:flex;"><span>bbox <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-91</span>, <span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">-90</span>, <span style="color:#ae81ff">31</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$totalCount</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; numeric(0)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $meta$totalTimeInSeconds</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 0</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [5 x 8]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                  ztime     id        event magnitude            city</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 2006-05-09T02:20:00Z 427540         HAIL         1    5 E KENTWOOD</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 2006-05-09T02:40:00Z 427536         HAIL         1    MOUNT HERMAN</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 2006-05-09T02:40:00Z 427537 TSTM WND DMG     -9999    MOUNT HERMAN</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 2006-05-09T03:00:00Z 427199         HAIL         0     FRANKLINTON</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 2006-05-09T03:17:00Z 427200      TORNADO     -9999 5 S FRANKLINTON</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: county (chr), state (chr), source (chr)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $shape</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                  shape</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 POINT (-90.43 30.93)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  POINT (-90.3 30.96)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  POINT (-90.3 30.96)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 POINT (-90.14 30.85)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 POINT (-90.14 30.78)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;swdi&#34;</span>
</span></span></code></pre></div><h2 id="sea-ice">Sea ice</h2>
<p>The <code>seaice()</code> function simply grabs shape files that describe sea ice cover at the Northa and South poles, and can be useful for examining change through time in sea ice cover, among other things.</p>
<p>An example: Plot sea ice cover for April 1990 for the North pole.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>urls <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seaiceeurls</span>(mo <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Apr&#39;</span>, pole <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;N&#39;</span>, yr <span style="color:#f92672">=</span> <span style="color:#ae81ff">1990</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seaice</span>(urls)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;ggplot2&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(out, <span style="color:#a6e22e">aes</span>(long, lat, group <span style="color:#f92672">=</span> group)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">geom_polygon</span>(fill <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;steelblue&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">theme_ice</span>()
</span></span></code></pre></div><p><img alt="plot of chunk unnamed-chunk-13" loading="lazy" src="/2015-07-07-weather-data-with-rnoaa/unnamed-chunk-13-1.png"></p>
<h2 id="buoys">Buoys</h2>
<ul>
<li>Get NOAA buoy data from the National Buoy Data Center</li>
</ul>
<p>Using buoy data requires the <code>ncdf</code> package. Make sure you have that installed, like <code>install.packages(&quot;ncdf&quot;)</code>. <code>buoy()</code> and <code>buoys()</code> will fail if you don&rsquo;t have <code>ncdf</code> installed.</p>
<p><code>buoys()</code> - Get available buoys given a dataset name</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">buoys</span>(dataset <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;cwind&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 41001</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 41002</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 41004</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 41006</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 41008</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 41009</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                       url</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41001/catalog.html</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41002/catalog.html</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41004/catalog.html</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41006/catalog.html</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41008/catalog.html</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 https://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41009/catalog.html</span>
</span></span></code></pre></div><p><code>buoy()</code> - Get data for a buoy - if no year or datatype specified, we get the first file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">buoy</span>(dataset <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;cwind&#39;</span>, buoyid <span style="color:#f92672">=</span> <span style="color:#ae81ff">46085</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Dimensions (rows/cols): [33486 X 5] </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2 variables: [wind_dir, wind_spd] </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    time latitude longitude wind_dir wind_spd</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2007-05-05T02:00:00Z   55.855  -142.559      331      2.8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2007-05-05T02:10:00Z   55.855  -142.559      328      2.6</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2007-05-05T02:20:00Z   55.855  -142.559      329      2.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2007-05-05T02:30:00Z   55.855  -142.559      356      2.1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2007-05-05T02:40:00Z   55.855  -142.559      360      1.5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2007-05-05T02:50:00Z   55.855  -142.559       10      1.9</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2007-05-05T03:00:00Z   55.855  -142.559       10      2.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2007-05-05T03:10:00Z   55.855  -142.559       14      2.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2007-05-05T03:20:00Z   55.855  -142.559       16      2.1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2007-05-05T03:30:00Z   55.855  -142.559       22      1.6</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..                  ...      ...       ...      ...      ...</span>
</span></span></code></pre></div><h2 id="tornadoes">Tornadoes</h2>
<p>The function <code>tornadoes()</code> gets tornado data from <a href="https://www.spc.noaa.gov/gis/svrgis/">https://www.spc.noaa.gov/gis/svrgis/</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>shp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tornadoes</span>()
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;sp&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(shp)
</span></span></code></pre></div><p><img alt="tornadoes" loading="lazy" src="/2015-07-07-weather-data-with-rnoaa/tornadoes.png"></p>
<h2 id="historical-observing-metadata-repository">Historical Observing Metadata Repository</h2>
<ul>
<li>HOMR = Historical Observing Metadata Repository</li>
<li>Data from RESTful API at <a href="https://www.ncdc.noaa.gov/homr/api">https://www.ncdc.noaa.gov/homr/api</a></li>
</ul>
<p><code>homr_definitions()</code> gets you definitions and metadata for datasets</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">homr_definitions</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [6 x 7]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   defType  abbr                fullName    displayName</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     ids GHCND        GHCND IDENTIFIER       GHCND ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     ids  COOP             COOP NUMBER        COOP ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3     ids  WBAN             WBAN NUMBER        WBAN ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     ids   FAA FAA LOCATION IDENTIFIER         FAA ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5     ids  ICAO                 ICAO ID        ICAO ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     ids TRANS          TRANSMITTAL ID Transmittal ID</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: description (chr), cssaName (chr), ghcndName (chr)</span>
</span></span></code></pre></div><p><code>homr()</code> gets you metadata for stations given query parameters. In this example, search for data for the state of Delaware</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">homr</span>(state <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;DE&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(res) <span style="color:#75715e"># the stations</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  [1] &#34;10001871&#34; &#34;10100162&#34; &#34;10100164&#34; &#34;10100166&#34; &#34;20004155&#34; &#34;20004158&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  [7] &#34;20004160&#34; &#34;20004162&#34; &#34;20004163&#34; &#34;20004168&#34; &#34;20004171&#34; &#34;20004176&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [13] &#34;20004178&#34; &#34;20004179&#34; &#34;20004180&#34; &#34;20004182&#34; &#34;20004184&#34; &#34;20004185&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [19] &#34;30001831&#34; &#34;30017384&#34; &#34;30020917&#34; &#34;30021161&#34; &#34;30021998&#34; &#34;30022674&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [25] &#34;30026770&#34; &#34;30027455&#34; &#34;30032423&#34; &#34;30032685&#34; &#34;30034222&#34; &#34;30039554&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [31] &#34;30043742&#34; &#34;30046662&#34; &#34;30046814&#34; &#34;30051475&#34; &#34;30057217&#34; &#34;30063570&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [37] &#34;30064900&#34; &#34;30065901&#34; &#34;30067636&#34; &#34;30069663&#34; &#34;30075067&#34; &#34;30077378&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [43] &#34;30077857&#34; &#34;30077923&#34; &#34;30077988&#34; &#34;30079088&#34; &#34;30079240&#34; &#34;30082430&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [49] &#34;30084216&#34; &#34;30084262&#34; &#34;30084537&#34; &#34;30084796&#34; &#34;30094582&#34; &#34;30094639&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [55] &#34;30094664&#34; &#34;30094670&#34; &#34;30094683&#34; &#34;30094730&#34; &#34;30094806&#34; &#34;30094830&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [61] &#34;30094917&#34; &#34;30094931&#34; &#34;30094936&#34; &#34;30094991&#34;</span>
</span></span></code></pre></div><p>You can index to each one to get more data</p>
<h2 id="storms">Storms</h2>
<ul>
<li>Data from: International Best Track Archive for Climate Stewardship (IBTrACS)</li>
<li>Data comes from an FTP server</li>
</ul>
<p>Flat files (csv&rsquo;s) are served up as well as shp files. In this example, plot storm data for the year 1940</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(res3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">storm_shp</span>(year <span style="color:#f92672">=</span> <span style="color:#ae81ff">1940</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;NOAA Storm Shp Files&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Path: ~/.rnoaa/storms/year/Year.1940.ibtracs_all_points.v03r06.shp</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Basin: &lt;NA&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Storm: &lt;NA&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Year: 1940</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Type: points</span>
</span></span><span style="display:flex;"><span>res3shp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">storm_shp_read</span>(res3)
</span></span><span style="display:flex;"><span>sp<span style="color:#f92672">::</span><span style="color:#a6e22e">plot</span>(res3shp)
</span></span></code></pre></div><p><img alt="plot of chunk unnamed-chunk-19" loading="lazy" src="/2015-07-07-weather-data-with-rnoaa/unnamed-chunk-19-1.png"></p>
]]></content:encoded>
    </item>
    <item>
      <title>rerddap - General purpose R client for ERDDAP servers</title>
      <link>http://localhost:1313/2015/06/rerddap/</link>
      <pubDate>Wed, 24 Jun 2015 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/2015/06/rerddap/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://upwell.pfeg.noaa.gov/erddap/information.html&#34;&gt;ERDDAP&lt;/a&gt; is a data server that gives you a simple, consistent way to download subsets of gridded and tabular scientific datasets in common file formats and make graphs and maps.  Besides it’s own &lt;a href=&#34;https://upwell.pfeg.noaa.gov/erddap/rest.html&#34;&gt;RESTful interface&lt;/a&gt;, much of which is designed based on &lt;a href=&#34;https://en.wikipedia.org/wiki/OPeNDAP&#34;&gt;OPeNDAP&lt;/a&gt;, ERDDAP can act as an OPeNDAP server and as a &lt;a href=&#34;https://en.wikipedia.org/wiki/Web_Map_Service&#34;&gt;WMS&lt;/a&gt; server for gridded data.&lt;/p&gt;
&lt;p&gt;ERDDAP is a powerful tool - in a world of heterogeneous data, it&amp;rsquo;s often hard to combine data and serve it through the same interface, with tools for querying/filtering/subsetting the data. That is exactly what ERDDAP does. Heterogeneous data sets often have some similarities, such as latitude/longitude data and usually a time component, but other variables vary widely.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p><a href="https://upwell.pfeg.noaa.gov/erddap/information.html">ERDDAP</a> is a data server that gives you a simple, consistent way to download subsets of gridded and tabular scientific datasets in common file formats and make graphs and maps.  Besides it’s own <a href="https://upwell.pfeg.noaa.gov/erddap/rest.html">RESTful interface</a>, much of which is designed based on <a href="https://en.wikipedia.org/wiki/OPeNDAP">OPeNDAP</a>, ERDDAP can act as an OPeNDAP server and as a <a href="https://en.wikipedia.org/wiki/Web_Map_Service">WMS</a> server for gridded data.</p>
<p>ERDDAP is a powerful tool - in a world of heterogeneous data, it&rsquo;s often hard to combine data and serve it through the same interface, with tools for querying/filtering/subsetting the data. That is exactly what ERDDAP does. Heterogeneous data sets often have some similarities, such as latitude/longitude data and usually a time component, but other variables vary widely.</p>
<h2 id="netcdf">NetCDF</h2>
<p><code>rerddap</code> supports <a href="https://en.wikipedia.org/wiki/NetCDF">NetCDF format</a>, and is the default when using the <code>griddap()</code> function. We use <code>ncdf</code> by default, but you can choose to use <code>ncdf4</code> instead.</p>
<h2 id="caching">Caching</h2>
<p>Data files downloaded are cached in a single hidden directory <code>~/.rerddap</code> on your machine. It&rsquo;s hidden so that you don&rsquo;t accidentally delete the data, but you can still easily delete the data if you like, open files, move them around, etc.</p>
<p>When you use <code>griddap()</code> or <code>tabledap()</code> functions, we construct a <a href="https://en.wikipedia.org/wiki/MD5#MD5_hashes">MD5 hash</a> from the base URL, and any query parameters - this way each query is separately cached. Once we have the hash, we look in <code>~/.rerddap</code> for a matching hash. If there&rsquo;s a match we use that file on disk - if no match, we make a http request for the data to the ERDDAP server you specify.</p>
<h2 id="erddap-servers">ERDDAP servers</h2>
<p>You can get a data.frame of ERDDAP servers using the function <code>servers()</code>. Most I think serve some kind of NOAA data, but there are a few that aren&rsquo;t NOAA data. Here are a few:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">servers</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                            name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                                                         Marine Domain Awareness (MDA) - Italy</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2                                                                    Marine Institute - Ireland</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3                                                      CoastWatch Caribbean/Gulf of Mexico Node</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4                                                                    CoastWatch West Coast Node</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5                    NOAA IOOS CeNCOOS (Central and Northern California Ocean Observing System)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 NOAA IOOS NERACOOS (Northeastern Regional Association of Coastal and Ocean Observing Systems)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                        url</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 https://bluehub.jrc.ec.europa.eu/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          https://erddap.marine.ie/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3      https://cwcgom.aoml.noaa.gov/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  https://coastwatch.pfeg.noaa.gov/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    https://erddap.axiomalaska.com/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6          https://www.neracoos.org/erddap/</span>
</span></span></code></pre></div><h2 id="install">Install</h2>
<p>From CRAN</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;rerddap&#34;</span>)
</span></span></code></pre></div><p>Or development version from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/rerddap&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;rerddap&#39;</span>)
</span></span></code></pre></div><h2 id="search">Search</h2>
<p>First, you likely want to search for data, specifying whether to search for either <code>griddadp</code> or <code>tabledap</code> datasets. The default is <code>griddap</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ed_search</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;size&#39;</span>, which <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;table&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 results, showing first 20 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                         title</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                                                                          CalCOFI Fish Sizes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2                                                                        CalCOFI Larvae Sizes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3                Channel Islands, Kelp Forest Monitoring, Size and Frequency, Natural Habitat</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4                                                         CalCOFI Larvae Counts Positive Tows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5                                                                                CalCOFI Tows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7                                                  OBIS - ARGOS Satellite Tracking of Animals</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8                                                     GLOBEC NEP MOCNESS Plankton (MOC1) Data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9                                                 GLOBEC NEP Vertical Plankton Tow (VPT) Data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10                            NWFSC Observer Fixed Gear Data, off West Coast of US, 2002-2006</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11                                 NWFSC Observer Trawl Data, off West Coast of US, 2002-2006</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12 AN EXPERIMENTAL DATASET: Underway Sea Surface Temperature and Salinity Aboard the Oleander</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;             dataset_id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     erdCalCOFIfshsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     erdCalCOFIlrvsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3       erdCinpKfmSFNH</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  erdCalCOFIlrvcntpos</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5       erdCalCOFItows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7            aadcArgos</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8        erdGlobecMoc1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9         erdGlobecVpt</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10  nwioosObsFixed2002</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11  nwioosObsTrawl2002</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12            nodcPJJU</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ed_search</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;size&#39;</span>, which <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grid&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 results, showing first 20 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                                   title</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6                                                       NOAA Global Coral Bleaching Monitoring Products</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13        USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14            USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_u][xi_u]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15            USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_v][xi_v]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][s_rho][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17  USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][Nbed][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;             dataset_id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6             NOAA_DHW</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13 whoi_ed12_89ce_9592</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14 whoi_61c3_0b5d_cd61</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15 whoi_62d0_9d64_c8ff</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 whoi_7dd7_db97_4bbe</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 whoi_a4fb_2c9c_16a7</span>
</span></span></code></pre></div><p>This gives back dataset titles and identifiers - with which you should be able to get a sense for which dataset you may want to fetch.</p>
<h2 id="information">Information</h2>
<p>After searching you can get more information on a single dataset</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;whoi_62d0_9d64_c8ff&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; whoi_62d0_9d64_c8ff </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Dimensions (range):  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      time: (2012-06-25T01:00:00Z, 2015-06-24T00:00:00Z) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      eta_v: (0, 334) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      xi_v: (0, 895) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      bedload_Vsand_01: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: kilogram meter-1 s-1 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      bedload_Vsand_02: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: kilogram meter-1 s-1 </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>Which is a simple S3 list but prints out pretty, so it&rsquo;s easy to quickly scan the printed output and see what you need to see to proceed. That is, in the next step you want to get the dataset, and you&rsquo;ll want to specify your search using some combination of values for latitude, longitude, and time.</p>
<h2 id="griddap-gridded-data">griddap (gridded) data</h2>
<p>First, get information on a dataset to see time range, lat/long range, and variables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;noaa_esrl_027d_0fb5_5d38&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; noaa_esrl_027d_0fb5_5d38 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Dimensions (range):  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      time: (1850-01-01T00:00:00Z, 2014-05-01T00:00:00Z) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      latitude: (87.5, -87.5) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      longitude: (-177.5, 177.5) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      air: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Range: -20.9, 19.5 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: degC</span>
</span></span></code></pre></div><p>Then query for gridded data using the <code>griddap()</code> function</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">griddap</span>(out,
</span></span><span style="display:flex;"><span>  time <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;2012-01-01&#39;</span>, <span style="color:#e6db74">&#39;2012-01-30&#39;</span>),
</span></span><span style="display:flex;"><span>  latitude <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  longitude <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-80</span>, <span style="color:#ae81ff">-70</span>)
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP griddap&gt; noaa_esrl_027d_0fb5_5d38</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Path: [~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Last updated: [2015-05-09 08:31:10]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    File size:    [0 mb]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dimensions (dims/vars):   [3 X 1]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dim names: time, latitude, longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Variable names: CRUTEM3: Surface Air Temperature Monthly Anomaly</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    data.frame (rows/columns):   [18 X 4]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    time latitude longitude  air</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2012-01-01T00:00:00Z     22.5     -77.5 -0.1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2012-01-01T00:00:00Z     22.5     -77.5 -0.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2012-01-01T00:00:00Z     17.5     -72.5  0.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2012-01-01T00:00:00Z     17.5     -72.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2012-01-01T00:00:00Z     17.5     -72.5  0.3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2012-02-01T00:00:00Z     17.5     -72.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..                  ...      ...       ...  ...</span>
</span></span></code></pre></div><p>The output of <code>griddap()</code> is a list that you can explore further. Get the summary</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>summary
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;file ~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc has 3 dimensions:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time   Size: 2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;latitude   Size: 3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;longitude   Size: 3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;------------------------&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;file ~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc has 1 variables:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;float air[longitude,latitude,time]  Longname:CRUTEM3: Surface Air Temperature Monthly Anomaly Missval:-9.96920996838687e+36&#34;</span>
</span></span></code></pre></div><p>Or get the dimension variables (just the names of the variables for brevity here)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(res<span style="color:#f92672">$</span>summary<span style="color:#f92672">$</span>dim)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time&#34;      &#34;latitude&#34;  &#34;longitude&#34;</span>
</span></span></code></pre></div><p>Get the data.frame (beware: you may want to just look at the <code>head</code> of the data.frame if large)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>data
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    time latitude longitude   air</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2012-01-01T00:00:00Z     22.5     -77.5 -0.10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2012-01-01T00:00:00Z     22.5     -77.5 -0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2012-01-01T00:00:00Z     17.5     -72.5  0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2012-01-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2012-01-01T00:00:00Z     17.5     -72.5  0.30</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13 2012-02-01T00:00:00Z     12.5     -67.5  0.40</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14 2012-02-01T00:00:00Z     12.5     -67.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15 2012-02-01T00:00:00Z     12.5     -67.5  0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 2012-02-01T00:00:00Z     12.5     -67.5  0.00</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 2012-02-01T00:00:00Z     12.5     -67.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18 2012-02-01T00:00:00Z     12.5     -67.5  0.32</span>
</span></span></code></pre></div><p>You can actually still explore the original netcdf summary object, e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>summary<span style="color:#f92672">$</span>dim<span style="color:#f92672">$</span>time
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $len</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $unlim</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $dimvarid</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $units</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;seconds since 1970-01-01T00:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $vals</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1325376000 1328054400</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $create_dimvar</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;dim.ncdf&#34;</span>
</span></span></code></pre></div><h2 id="tabledap-tabular-data">tabledap (tabular) data</h2>
<p><code>tabledap</code> is data that is not gridded by lat/lon/time. In addition, the query interface is a bit different. Notice that you can do less than, more than, equal to type queries, but they are specified as character strings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;erdCalCOFIfshsiz&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; erdCalCOFIfshsiz </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      calcofi_species_code: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Range: 19, 1550 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      common_name: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      cruise: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_1000m3: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: Fish per 1,000 cubic meters of water sampled </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_count: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_size: </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tabledap</span>(out, <span style="color:#e6db74">&#39;time&gt;=2001-07-07&#39;</span>, <span style="color:#e6db74">&#39;time&lt;=2001-07-10&#39;</span>, 
</span></span><span style="display:flex;"><span>                 fields <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;longitude&#39;</span>, <span style="color:#e6db74">&#39;latitude&#39;</span>, <span style="color:#e6db74">&#39;fish_size&#39;</span>, <span style="color:#e6db74">&#39;itis_tsn&#39;</span>, <span style="color:#e6db74">&#39;scientific_name&#39;</span>)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP tabledap&gt; erdCalCOFIfshsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Path: [~/.rerddap/f013f9ee09bdb4184928d533e575e948.csv]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Last updated: [2015-05-09 08:31:21]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    File size:    [0.03 mb]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dimensions:   [558 X 5]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     longitude  latitude fish_size itis_tsn       scientific_name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     -118.26    33.255      22.9   623745 Nannobrachium ritteri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3     -118.26    33.255      22.9   623745 Nannobrachium ritteri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  -118.10667 32.738335      31.5   623625  Lipolagus ochotensis</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  -118.10667 32.738335      48.3   623625  Lipolagus ochotensis</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  -118.10667 32.738335      15.5   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  -118.10667 32.738335      16.3   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  -118.10667 32.738335      17.8   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  -118.10667 32.738335      18.2   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 -118.10667 32.738335      19.2   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 -118.10667 32.738335      20.0   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..        ...       ...       ...      ...                   ...</span>
</span></span></code></pre></div><p>Since both <code>griddap()</code> and <code>tabledap()</code> give back data.frame&rsquo;s, it&rsquo;s easy to do downstream manipulation. For example, we can use <code>dplyr</code> to filter, summarize, group, and sort:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;dplyr&#34;</span>)
</span></span><span style="display:flex;"><span>dat<span style="color:#f92672">$</span>fish_size <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(dat<span style="color:#f92672">$</span>fish_size)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tbl_df</span>(dat) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fish_size <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">30</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(scientific_name) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(mean_size <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(fish_size)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(<span style="color:#a6e22e">desc</span>(mean_size))
</span></span><span style="display:flex;"><span>df
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [20 x 2]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                 scientific_name mean_size</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1       Idiacanthus antrostomus 253.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2            Stomias atriventer 189.25000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3            Lestidiops ringens  98.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     Tarletonbeania crenularis  56.50000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5      Ceratoscopelus townsendi  53.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Stenobrachius leucopsarus  47.74538</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7               Sardinops sagax  47.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8         Nannobrachium ritteri  43.30250</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9         Bathylagoides wesethi  43.09167</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10         Vinciguerria lucetia  42.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11       Cyclothone acclinidens  40.80000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12         Lipolagus ochotensis  39.72500</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13        Leuroglossus stilbius  38.35385</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14        Triphoturus mexicanus  38.21342</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15                Diaphus theta  37.88571</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16       Trachipterus altivelis  37.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 Symbolophorus californiensis  37.66000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18         Nannobrachium regale  37.50000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 19         Merluccius productus  36.61333</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 20        Argyropelecus sladeni  32.43333</span>
</span></span></code></pre></div><p>Then make a cute little plot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(df, <span style="color:#a6e22e">aes</span>(<span style="color:#a6e22e">reorder</span>(scientific_name, mean_size), mean_size)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme_grey</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Mean Size&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Species&#34;</span>)
</span></span></code></pre></div><p><img alt="plot of chunk unnamed-chunk-19" loading="lazy" src="/2015-06-24-rerddap/unnamed-chunk-19-1.png"></p>
]]></content:encoded>
    </item>
  </channel>
</rss>
