<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>stories behind archived packages | Recology</title>
<meta name="keywords" content="R, taxonomy, database">
<meta name="description" content="
Update on 2021-02-09: I&rsquo;ve archived 8 more packages. Post below updated


Code is often arranged in packages for any given language. Packages
are often cataloged in a package registry of some kind: NPM for
node, crates.io for Rust, etc. For R, that registry is either
CRAN or Bioconductor
(for the most part).
CRAN has the concept of an archived package. That is, the namespace
for a package (foo) is still in the registry (and can not be used again),
but the package is archived - no longer gets updated and checks
I think are no longer performed.">
<meta name="author" content="Scott Chamberlain">
<link rel="canonical" href="http://localhost:1313/2020/09/archived-pkgs/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a4ec0cdfac731fabf363c0b5d5ab206254bbf9b6aaf985d695c6bb534196df16.css" integrity="sha256-pOwM36xzH6vzY8C11asgYlS7&#43;baq&#43;YXWlca7U0GW3xY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2020/09/archived-pkgs/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      stories behind archived packages
    </h1>
    <div class="post-meta"><span title='2020-09-10 00:00:00 +0000 UTC'>September 10, 2020</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Scott Chamberlain

</div>
  </header> 
  <div class="post-content"><blockquote>
<p>Update on 2021-02-09: I&rsquo;ve archived 8 more packages. Post below updated</p>
</blockquote>
<!-- raw HTML omitted -->
<p>Code is often arranged in packages for any given language. Packages
are often cataloged in a package registry of some kind: NPM for
node, crates.io for Rust, etc. For R, that registry is either
<a href="https://cran.r-project.org/">CRAN</a> or <a href="https://bioconductor.org/">Bioconductor</a>
(for the most part).</p>
<p>CRAN has the concept of an archived package. That is, the namespace
for a package (<code>foo</code>) is still in the registry (and can not be used again),
but the package is archived - no longer gets updated and checks
I think are no longer performed.</p>
<p>We rarely hear the stories behind how software gets laid to rest. What are
the most common reasons for software to be abandoned?</p>
<h2 id="my-cran-archived-packages">My CRAN archived packages<a hidden class="anchor" aria-hidden="true" href="#my-cran-archived-packages">#</a></h2>
<p>First, my archived CRAN packages:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(pkgsearch)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(dplyr)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(data.table)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tibble)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> <span style="color:#a6e22e">cran_events</span>(releases <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>, archivals <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">4000L</span>)
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">=</span> <span style="color:#a6e22e">lapply</span>(x, <span style="color:#66d9ef">function</span>(w)
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tibble</span>(pkg<span style="color:#f92672">=</span>w<span style="color:#f92672">$</span>name, maintainer<span style="color:#f92672">=</span>w<span style="color:#f92672">$</span>package<span style="color:#f92672">$</span>Maintainer))
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> <span style="color:#a6e22e">rbindlist</span>(res, use.names <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>, fill <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> <span style="color:#a6e22e">as_tibble</span>(df)
</span></span><span style="display:flex;"><span>scott <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">filter</span>(df, <span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;chamberlain&#34;</span>, maintainer, ignore.case <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">select</span>(pkg) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data.frame</span>()
</span></span><span style="display:flex;"><span>scott
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;            pkg</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1      originr</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2       geoaxe</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3         lawn</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     pleiades</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5       geoops</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6          rif</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7     rbraries</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8        ccafs</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9     rjsonapi</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10       rdpla</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 seaaroundus</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12    crevents</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13      etseed</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14      rtimes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15   rsunlight</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16        nneo</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17     binomen</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18        solr</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 19      enigma</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 20         alm</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 21    ropensnp</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 22      govdat</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 23  spoccutils</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 24     rgauges</span>
</span></span></code></pre></div><p>I have 24 archived packages on CRAN.</p>
<h2 id="stories">Stories<a hidden class="anchor" aria-hidden="true" href="#stories">#</a></h2>
<p>The following are brief stories of why each package was archived on CRAN.</p>
<ul>
<li><strong>spoccutils</strong>: was a package of utility functions that didn&rsquo;t quite fit within the scope of another package <a href="https://github.com/ropensci/spocc">spocc</a>. It was renamed to <a href="https://github.com/ropensci/mapr">mapr</a>. I suppose I could have asked CRAN to change the name, hmmm</li>
<li><strong><a href="https://github.com/ropensci-archive/rgauges">rgauges</a></strong>: was a client for the <a href="https://get.gaug.es/">Gaug.es</a> website analytics API - we started the package to gather data on visitors to the rOpenSci website. Eventually we stopped using Gaug.es and then it didn&rsquo;t make sense to maintain the package, so it was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/alm">alm</a></strong>: was a client for a generic article-level metrics web service framework called Lagotto. In the early days of rOpenSci we were quite engaged with the community of folks working on article-level metrics. If I remember correctly, Lagotto usage slowed down and wasn&rsquo;t used much so I gave up on maintaining <code>alm</code></li>
<li><strong>ropensnp</strong>: was a client for the service <a href="https://opensnp.org/">OpenSNP</a>. There were other sources of SNP data that I thought would be nice to access all from one package; so a new package (<a href="https://github.com/ropensci/rsnps">rsnps</a>) was created and incorporated functions for OpenSNP and <code>ropensnp</code> was archived.</li>
<li><strong>solr</strong>: was a package client for the <a href="https://lucene.apache.org/solr/">Apache Solr</a> database. At some point it got a major overhual and I decided to change the package name to <a href="https://github.com/ropensci/solrium">solrium</a>.</li>
<li><strong><a href="https://github.com/ropensci/binomen">binomen</a></strong>: aim of the package was functions for creating taxonomic classes/objects and functions for manipulating taxonomic data, sort of like dplyr. Evolution of ideas in <code>binomen</code> gave way to a new package <a href="https://github.com/ropensci/taxa">taxa</a>, now maintained by <a href="https://github.com/zachary-foster">Zach Foster</a>.</li>
<li><strong><a href="https://github.com/ropensci-archive/nneo">nneo</a></strong>: was a client for APIs for <a href="https://data.neonscience.org/data-api/">NEON</a> data. At some point I stumbled upon someone else from NEON making essentially the same package, so I archived mine.</li>
<li><strong><a href="https://github.com/ropensci-archive/etseed">etseed</a></strong>: was a package for interacting with the distributed key-value store <a href="https://etcd.io/">etcd</a>. I was on a kick at the time of making R packages for databases, and saw a missing package I thought. After getting familiar with etcd, I realized I would probably never use it myself, and further, it probably didn&rsquo;t make sense to interact with etcd from R anyway.</li>
<li><strong><a href="https://github.com/ropensci-archive/crevents">crevents</a></strong>: <a href="https://www.crossref.org/">Crossref</a> mints DOIs for scholarly articles (among other works). A neat service they started was collecting and making searchable the &ldquo;events&rdquo; on DOIs - that is, the links pointing to DOIs, e.g., from Twitter, etc. The service at some point became very unreliable (was often down), so the package was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/seaaroundus">seaaroundus</a></strong>: <a href="https://www.seaaroundus.org/">Seaaroundus</a> maintains fisheries and fisheries-related data. I was helping maintain an R package for the API, but it was a difficult one to maintain, and most users simply sent emails requesting dumps of data anyway - so the package was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rdpla">rdpla</a></strong>: The <a href="https://dp.la/">Digital Public Library of America</a> is a very cool organization that is similar to Crossref in a way, in that they centralize metadata about &ldquo;things&rdquo;; metadata on museum collections for DPLA and scholarly works for Crossref. I figured many researchers would enjoy being able to easily get metadata from DPLA for research on museum collections. In the end not many people used the package.</li>
<li><strong><a href="https://github.com/ropensci-archive/rjsonapi">rjsonapi</a></strong>: <a href="https://jsonapi.org/">JSON:API</a> is a cool idea - a sort of specification for building APIs in JSON. REST APIs are incredibly variable - this is an attempto standardize it a bit. I thought perhaps JSON:API would be adopted widely and that an R client would be useful for consuming JSON:API services - however, I&rsquo;ve seen only very few APIs using JSON:API.</li>
<li><strong><a href="https://github.com/ropensci-archive/originr">originr</a></strong>: The idea with <code>originr</code> originally was to centralize in one package tools for biologists to get data on &ldquo;nativity&rdquo; of species in their studies: are species X and Y native to A, B, and C countries. I was lucky to get a collaborator (<a href="https://github.com/ibartomeus">Ignasi Bartomeus</a>) to help on that package. The package simply was not used much at all, and the data sources used were very flaky, making for a buggy user experience.</li>
<li><strong><a href="https://github.com/ropensci-archive/geoaxe">geoaxe</a></strong>: This package always had a very narrow scope. It was created to solve a problem in two widely used packages: <a href="https://github.com/ropensci/rgbif">rgbif</a> and <a href="https://github.com/ropensci/spocc">spocc</a>. In both of those packages we needed to take user input of a Well-known text (WKT) string representing a polygon in which the user wanted to search for something in a remote data source. And with that WKT we would chop up the polygon into smaller polygons to be submitted in multiple (spatial) requests instead of one very large (spatial) request. I didn&rsquo;t want to depend on the heavy <code>rgdal</code> depenency, so I cooked up <code>geoaxe</code> that only used <code>sp</code> and <code>rgeos</code>. <code>geoaxe</code> lasted for many years, but there&rsquo;s better tools out there now, so it was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/lawn">lawn</a></strong>: This package started out when I was trying to see what we could do in spatial R packages, specifically around GeoJSON. Jeroen had recently created the <a href="https://github.com/jeroen/v8">V8</a> package so you could leverage bundled Javascript libraries in R. <a href="https://turfjs.org/">turf.js</a> was a neat project for Javascript for spatial analysis and built in a modular, approachable manner - I thought. So collaborator <a href="https://github.com/jhollist">Jeff Hollister</a> and I wrapped turf.js in R. It was not used that much - and especially not used much after the rise of sf and related &ldquo;tidy&rdquo; spatial packages, leading to archival.</li>
<li><strong><a href="https://github.com/sckott/geoops">geoops</a></strong>: This package was a follow on from <code>lawn</code>, in exploring more GeoJSON focused work. I wanted to learn how to make an R package mostly out of C++, with just a thin layer of R on top. Like <code>lawn</code>, <code>geoops</code> was not used much at all as far as I could tell, maybe partly because it focused only on GeoJSON - but this was also during the rise of <code>sf</code> and friends. I moved it to my own personal account just as a little C++ in R playground in case I want to brush up on that.</li>
<li><strong><a href="https://github.com/ropensci-archive/pleiades">pleiades</a></strong>: I don&rsquo;t remember how or why this package started. It was a client for Pleiades (<a href="https://pleiades.stoa.org/home">https://pleiades.stoa.org/home</a>), a database of historical geographic information about the ancient world. It was used very, very little as far as I could tell - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rif">rif</a></strong>: This package was started after a some exploration of what R work we (rOpenSci) could do in the neuroscience field. It was a client for the Neuroscience Information Framework (<a href="https://neuinfo.org/">https://neuinfo.org/</a>), a database of neuroscience information. Another package not used - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/rbraries">rbraries</a></strong>: This package started because I thought rOpenSci would make use of the metadata around R package downloads/etc. that <a href="https://libraries.io/">https://libraries.io/</a> collected. We never ended up using the data - and no one seemed to use the package - so was archived.</li>
<li><strong><a href="https://github.com/ropensci-archive/ccafs">ccafs</a></strong>: A client for Climate Change, Agriculture, and Food Security (CCAFS) General Circulation Models (GCM) data (<a href="https://www.ccafs-climate.org/">https://www.ccafs-climate.org/</a>). All I could find for motivation for this package was an email with someone where they shared a few links to different sources of climate data - then apparently this package was born shortly thereafter. It wasn&rsquo;t used much at all - so was archived.</li>
</ul>
<p>The following four packages were all R clients for sources of government open data - see the organization <a href="https://github.com/ropengov">rOpenGov</a> for R packages on government data.</p>
<ul>
<li><strong>govdat</strong>: was split into two packages (<code>rsunlight</code> and <code>rtimes</code>) and <code>govdat</code> was archived</li>
<li><strong><a href="https://github.com/rOpenGov/rsunlight">rsunlight</a></strong>: was a client for many APIs of the organization <a href="https://sunlightfoundation.com/api/">Sunlight Labs</a> - part of the reason for archiving this package was the disintegration of Sunlight Labs, which made the previously sensible organization of many APIs into one R package not sensible anymore. Also, government data was considered out of scope for our work at rOpenSci.</li>
<li><strong><a href="https://github.com/rOpenGov/rtimes">rtimes</a></strong>: was a client for a number of the government data APIs from the New York Times. One reason for abandoning this package was that NYT almost never responded to questions/feedback on their APIs. Another reason was the aforementioned focus of rOpenSci.</li>
<li><strong><a href="https://github.com/rOpenGov/enigma">enigma</a></strong>: was a client for the Enigma API - the company I think was first focused on making open government data easier to access - as well as data on companies. I didn&rsquo;t really use the package at all though, and there wasn&rsquo;t much usage of the package, so archived it.</li>
</ul>
<p>As a summary of the lists above, a list of the major reasons each package was archived:</p>
<ul>
<li>Not used
<ul>
<li>rjsonapi</li>
<li>rdpla</li>
<li>etseed</li>
<li>enigma</li>
<li>rgauges</li>
<li>rtimes</li>
<li>originr</li>
<li>geaoxe</li>
<li>pleiades</li>
<li>rif</li>
<li>rbraries</li>
<li>ccafs</li>
</ul>
</li>
<li>The fall of the GeoJSON-verse <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>
<ul>
<li>lawn</li>
<li>geoops</li>
</ul>
</li>
<li>Bad/retired service
<ul>
<li>rtimes</li>
<li>seaaroundus</li>
<li>crevents</li>
<li>alm</li>
</ul>
</li>
<li>Name change
<ul>
<li>solr</li>
<li>ropensnp</li>
<li>spoccutils</li>
</ul>
</li>
<li>Evolution to new package
<ul>
<li>binomen</li>
<li>govdat</li>
</ul>
</li>
<li>Duplicated work
<ul>
<li>nneo</li>
</ul>
</li>
<li>Out of scope
<ul>
<li>rsunlight</li>
</ul>
</li>
</ul>
<p>Footnotes:</p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>although, <code>geojsonsf</code> is very successful so I think my projects were just crap I guess :)&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/r/">R</a></li>
      <li><a href="http://localhost:1313/tags/taxonomy/">Taxonomy</a></li>
      <li><a href="http://localhost:1313/tags/database/">Database</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Recology</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
