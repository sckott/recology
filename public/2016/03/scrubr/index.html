<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>scrubr - clean species occurrence records | Recology</title>
<meta name="keywords" content="R, occurrences, occurrence records, species, ecology">
<meta name="description" content="scrubr is an R library for cleaning species occurrence records. It&rsquo;s general purpose, and has the following approach:

We think using a piping workflow (%&gt;%) makes code easier to build up, and easier to understand. However, you don&rsquo;t have to use pipes in this package.
All inputs and outputs are data.frame&rsquo;s - which makes the above point easier
Records trimmed off due to various filters are retained as attributes, so can still be accessed for later inspection, but don&rsquo;t get in the way of the data.frame that gets modified for downstream use
User interface vs. speed: This is the kind of package that surely can get faster. However, we&rsquo;re focusing on the UI first, then make speed improvements down the road.
Since occurrence record datasets should all have columns with lat/long information, we automatically look for those columns for you. If identified, we use them, but you can supply lat/long column names manually as well.

We have many packages that fetch species occurrence records from GBIF, iNaturalist, VertNet, iDigBio, Ecoengine, and more. scrubr fills a crucial missing niche as likely all uses of occurrence data requires cleaning of some kind. When using GBIF data via rgbif, that package has some utilities for cleaning data based on the issues returned with GBIF data - scrubr is a companion to do the rest of the cleaning.">
<meta name="author" content="Scott Chamberlain">
<link rel="canonical" href="http://localhost:1313/2016/03/scrubr/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a4ec0cdfac731fabf363c0b5d5ab206254bbf9b6aaf985d695c6bb534196df16.css" integrity="sha256-pOwM36xzH6vzY8C11asgYlS7&#43;baq&#43;YXWlca7U0GW3xY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2016/03/scrubr/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      scrubr - clean species occurrence records
    </h1>
    <div class="post-meta"><span title='2016-03-04 00:00:00 +0000 UTC'>March 4, 2016</span>&nbsp;·&nbsp;11 min&nbsp;·&nbsp;Scott Chamberlain

</div>
  </header> 
  <div class="post-content"><p><code>scrubr</code> is an R library for cleaning species occurrence records. It&rsquo;s general purpose, and has the following approach:</p>
<ul>
<li>We think using a piping workflow (<code>%&gt;%</code>) makes code easier to build up, and easier to understand. However, you don&rsquo;t have to use pipes in this package.</li>
<li>All inputs and outputs are data.frame&rsquo;s - which makes the above point easier</li>
<li>Records trimmed off due to various filters are retained as attributes, so can still be accessed for later inspection, but don&rsquo;t get in the way of the data.frame that gets modified for downstream use</li>
<li>User interface vs. speed: This is the kind of package that surely can get faster. However, we&rsquo;re focusing on the UI first, then make speed improvements down the road.</li>
<li>Since occurrence record datasets should all have columns with lat/long information, we automatically look for those columns for you. If identified, we use them, but you can supply lat/long column names manually as well.</li>
</ul>
<p>We have many packages that fetch species occurrence records from GBIF, iNaturalist, VertNet, iDigBio, Ecoengine, and more. <code>scrubr</code> fills a crucial missing niche as likely all uses of occurrence data requires cleaning of some kind. When using GBIF data via <code>rgbif</code>, that package has some utilities for cleaning data based on the issues returned with GBIF data - <code>scrubr</code> is a companion to do the rest of the cleaning.</p>
<h2 id="scrubr-use-cases">scrubr use cases<a hidden class="anchor" aria-hidden="true" href="#scrubr-use-cases">#</a></h2>
<h3 id="those-covered">Those covered<a hidden class="anchor" aria-hidden="true" href="#those-covered">#</a></h3>
<ul>
<li>Impossible lat/long values: e.g., latitude 75</li>
<li>Incomplete cases: one or the other of lat/long missing</li>
<li>Unlikely lat/long values: e.g., points at 0,0</li>
<li>Deduplication: try to identify duplicates, esp. when pulling data from multiple sources, e.g., can try to use occurrence IDs, if provided</li>
<li>Date based cleaning</li>
<li>Outside political boundary: User input to check for points in the wrong country, or points outside of a known country</li>
<li>Taxonomic name based cleaning: via <code>taxize</code> (one method so far)</li>
</ul>
<h3 id="to-be-covered">To be covered<a hidden class="anchor" aria-hidden="true" href="#to-be-covered">#</a></h3>
<ul>
<li>Political centroids: unlikely that occurrences fall exactly on these points, more likely a
default position (Draft function started, but not exported, and commented out)</li>
<li>Herbaria/Museums: many specimens may have location of the collection they are housed in</li>
<li>Habitat type filtering: e.g., fish should not be on land; marine fish should not be in fresh water</li>
<li>Check for contextually wrong values: That is, if 99 out of 100 lat/long coordinates are within the continental US, but 1 is in China, then perhaps something is wrong with that one point</li>
<li>and many more&hellip;</li>
</ul>
<p>What else do you want included? <a href="https://github.com/ropenscilabs/scrubr/issues">Open an issue in the repo</a> to chat about use cases.</p>
<h2 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h2>
<p>From CRAN (binaries may not be up yet, but source is)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;scrubr&#34;</span>)
</span></span></code></pre></div><p>Or from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropenscilabs/scrubr&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;scrubr&#34;</span>)
</span></span></code></pre></div><h2 id="dframe">dframe<a hidden class="anchor" aria-hidden="true" href="#dframe">#</a></h2>
<p><code>dframe()</code> is a tool to convert your data.frame to a compact <code>dplyr</code> like data.frame so that you can get a quick peek at your data each time you call a function - BUT, you don&rsquo;t have to use it.</p>
<p>Compare <code>mtcars</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>mtcars
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</span>
</span></span></code></pre></div><p>To</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(mtcars)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 32 X 11</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1   21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2   21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3   22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4   21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5   18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6   18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7   14.3     8 360.0   245  3.21 3.570 15.84     0     0     3     4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8   24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9   22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..   ...   ...   ...   ...   ...   ...   ...   ...   ...   ...   ...</span>
</span></span></code></pre></div><h2 id="coordinate-based-cleaning">Coordinate based cleaning<a hidden class="anchor" aria-hidden="true" href="#coordinate-based-cleaning">#</a></h2>
<p>Load some sample data that comes with the package</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(<span style="color:#e6db74">&#34;sampledata1&#34;</span>)
</span></span></code></pre></div><p>Remove impossible coordinates (using sample data included in the pkg)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">coord_impossible</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1500 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lat/Lon vars: latitude/longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)              (time)      (int)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...                 ...        ...</span>
</span></span></code></pre></div><p>Remove incomplete coordinates</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">coord_incomplete</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1306 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lat/Lon vars: latitude/longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)              (time)      (int)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...                 ...        ...</span>
</span></span></code></pre></div><p>Remove unlikely coordinates (e.g., those at 0,0)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">coord_unlikely</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1488 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lat/Lon vars: latitude/longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)              (time)      (int)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...                 ...        ...</span>
</span></span></code></pre></div><p>Do all three</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_impossible</span>() <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_incomplete</span>() <span style="color:#f92672">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_unlikely</span>()
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1294 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Lat/Lon vars: latitude/longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)              (time)      (int)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 2015-04-05 23:00:00 1088954559</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...                 ...        ...</span>
</span></span></code></pre></div><p>Do vs. don&rsquo;t drop bad data</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># do</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">coord_incomplete</span>(drop <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> NROW
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1306</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># don&#39;t</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_1) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">coord_incomplete</span>(drop <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">%&gt;%</span> NROW
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1500</span>
</span></span></code></pre></div><h2 id="deduplicate">Deduplicate<a hidden class="anchor" aria-hidden="true" href="#deduplicate">#</a></h2>
<p>Get a smaller subset of a data.frame</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>smalldf <span style="color:#f92672">&lt;-</span> sample_data_1[1<span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, ]
</span></span></code></pre></div><p>create a duplicate record</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>smalldf <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">rbind</span>(smalldf, smalldf[10,])
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">row.names</span>(smalldf) <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">NULL</span>
</span></span></code></pre></div><p>make it slightly different</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>smalldf[21, <span style="color:#e6db74">&#34;key&#34;</span>] <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">1088954555</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">NROW</span>(smalldf)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 21</span>
</span></span></code></pre></div><p>It&rsquo;s 21 rows, including 1 duplicate. Do the deduplication</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(dp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dframe</span>(smalldf) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">dedup</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 20 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)              (time)      (dbl)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 2015-01-14 16:36:45 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 2015-01-13 00:25:39 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 2015-02-20 23:00:00 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 2015-02-13 16:16:41 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 2015-03-01 20:20:45 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 2015-03-29 17:06:54 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 2015-03-29 17:12:50 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 2015-03-28 23:00:00 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 2015-03-20 21:11:24 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus -103.30058 29.27042 2015-04-29 22:00:00 1088964797</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...                 ...        ...</span>
</span></span></code></pre></div><p>Now its 20 rows, duplicate removed</p>
<p>Here&rsquo;s the duplicates</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">attr</span>(dp, <span style="color:#e6db74">&#34;dups&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               name longitude latitude                date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;              (chr)     (dbl)    (dbl)              (time)      (dbl)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 Ursus americanus -76.78671 35.53079 2015-04-05 23:00:00 1088954555</span>
</span></span></code></pre></div><h2 id="dates">Dates<a hidden class="anchor" aria-hidden="true" href="#dates">#</a></h2>
<p>Standardize/convert dates</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> sample_data_1
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(df) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">date_standardize</span>(<span style="color:#e6db74">&#34;%d%b%Y&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1500 X 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude      date        key</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)     (chr)      (int)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 14Jan2015 1065590124</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 13Jan2015 1065588899</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 20Feb2015 1098894889</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 13Feb2015 1065611122</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 01Mar2015 1088908315</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 29Mar2015 1088932238</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 29Mar2015 1088932273</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 28Mar2015 1132403409</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 20Mar2015 1088923534</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 05Apr2015 1088954559</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...       ...        ...</span>
</span></span></code></pre></div><p>Drop records without dates</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">NROW</span>(df)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1500</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">NROW</span>(<span style="color:#a6e22e">dframe</span>(df) <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">date_missing</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1498</span>
</span></span></code></pre></div><p>Create date field from other fields</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">dframe</span>(sample_data_2) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">date_create</span>(year, month, day)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;scrubr dframe&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Size: 1500 X 8</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                name  longitude latitude        key  year month   day</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;               (chr)      (dbl)    (dbl)      (int) (chr) (chr) (chr)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  Ursus americanus  -79.68283 38.36662 1065590124  2015    01    14</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  Ursus americanus  -82.42028 35.73304 1065588899  2015    01    13</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  Ursus americanus  -99.09625 23.66893 1098894889  2015    02    20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  Ursus americanus  -72.77432 43.94883 1065611122  2015    02    13</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  Ursus americanus  -72.34617 43.86464 1088908315  2015    03    01</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  Ursus americanus -108.53674 32.65219 1088932238  2015    03    29</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  Ursus americanus -108.53691 32.65237 1088932273  2015    03    29</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  Ursus americanus -123.82900 40.13240 1132403409  2015    03    28</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  Ursus americanus  -78.25027 36.93018 1088923534  2015    03    20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 Ursus americanus  -76.78671 35.53079 1088954559  2015    04    05</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..              ...        ...      ...        ...   ...   ...   ...</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Variables not shown: date (chr).</span>
</span></span></code></pre></div><h2 id="bugs-and-such">bugs and such<a hidden class="anchor" aria-hidden="true" href="#bugs-and-such">#</a></h2>
<p>Report them in the <a href="https://github.com/ropenscilabs/scrubr/issues">scrubr issue tracker</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/r/">R</a></li>
      <li><a href="http://localhost:1313/tags/occurrences/">Occurrences</a></li>
      <li><a href="http://localhost:1313/tags/occurrence-records/">Occurrence Records</a></li>
      <li><a href="http://localhost:1313/tags/species/">Species</a></li>
      <li><a href="http://localhost:1313/tags/ecology/">Ecology</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Recology</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
