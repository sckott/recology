<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>geojsonio - a new package to do geojson things | Recology</title>
<meta name="keywords" content="R, geojson, topojson, geospatial">
<meta name="description" content="geojsonio converts geographic data to GeoJSON and TopoJSON formats - though the focus is mostly on GeoJSON
For those not familiar GeoJSON it is a format for encoding a variety of geographic data structures. GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection. These geometry types are also found in well known text (WKT), and have equivalents in R&rsquo;s spatial classes. Read the spec for more detailed information.">
<meta name="author" content="Scott Chamberlain">
<link rel="canonical" href="http://localhost:1313/2015/04/geojson-io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a4ec0cdfac731fabf363c0b5d5ab206254bbf9b6aaf985d695c6bb534196df16.css" integrity="sha256-pOwM36xzH6vzY8C11asgYlS7&#43;baq&#43;YXWlca7U0GW3xY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2015/04/geojson-io/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/links" title="Links">
                    <span>Links</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      geojsonio - a new package to do geojson things
    </h1>
    <div class="post-meta"><span title='2015-04-30 00:00:00 +0000 UTC'>April 30, 2015</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Scott Chamberlain

</div>
  </header> 
  <div class="post-content"><p><code>geojsonio</code> converts geographic data to GeoJSON and TopoJSON formats - though the focus is mostly on GeoJSON</p>
<p>For those not familiar GeoJSON it is a format for encoding a variety of geographic data structures. GeoJSON supports the following geometry types: Point, LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon, and GeometryCollection. These geometry types are also found in <a href="https://en.wikipedia.org/wiki/Well-known_text">well known text (WKT)</a>, and have equivalents in R&rsquo;s spatial classes. Read the <a href="https://geojson.org/geojson-spec.html">spec</a> for more detailed information.</p>
<p>Other great geojson resources:</p>
<ul>
<li>GeoJSON lint - lint your geojson - <a href="https://geojsonlint.com/">https://geojsonlint.com/</a></li>
<li>GeoJSON.io - make maps with geojson input or draw maps and get geojson - <a href="https://geojson.io/">https://geojson.io/</a></li>
</ul>
<p>Functions in this package are organized first around what you&rsquo;re working with or want to get, geojson or topojson, then convert to or read from various formats:</p>
<ul>
<li><code>geojson_list()</code> - convert to GeoJSON as R list format</li>
<li><code>geojson_json()</code> - convert to GeoJSON as json</li>
<li><code>geojson_read()</code>/<code>topojson_read()</code> - read a GeoJSON/TopoJSON file from file path or URL</li>
<li><code>geojson_write()</code> - write a GeoJSON file locally (no write TopoJSON yet)</li>
</ul>
<p>Each of the above functions have methods for various objects/classes, including <code>numeric</code>, <code>data.frame</code>, <code>list</code>, <code>SpatialPolygons</code>, <code>SpatialLines</code>, <code>SpatialPoints</code>, etc. (including the classes in <code>rgeos</code>)</p>
<p>Use cases for this package include (but not limited to, obs.) the following:</p>
<ul>
<li>Get data in GeoJSON json format, and you want to get it into a list in R.</li>
<li>Get data into GeoJSON format to use downstream to make a interactive map
<ul>
<li>in R (e.g., with <a href="https://github.com/rstudio/leaflet">leaflet</a>)</li>
<li>or in another context (e.g., using javascript with mapbox/leaflet)</li>
</ul>
</li>
<li>Data is in a data.frame/matrix/list and you want to make GeoJSON format data.</li>
<li>Data is in one of the many spatial classes (e.g., <code>SpatialPoints</code>) and you want GeoJSON</li>
<li>You need to add styling to your data - can do with this package for certain data types.</li>
<li>You want to check that your GeoJSON data is valid - two ways to do it in geojsonio.</li>
<li>Combine objects together (e.g., a point and a line), either from two <code>geo_list</code> objects, or two <code>json</code> objects. See <code>?geojson-add</code></li>
</ul>
<h2 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h2>
<p>See the github repo for notes about dependencies <a href="https://github.com/ropensci/geojsonio#install">https://github.com/ropensci/geojsonio#install</a></p>
<p>CRAN version or the dev version from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;sckott/geojsonio&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span></code></pre></div><h2 id="geojson">GeoJSON<a hidden class="anchor" aria-hidden="true" href="#geojson">#</a></h2>
<h3 id="convert-various-formats-to-geojson">Convert various formats to geojson<a hidden class="anchor" aria-hidden="true" href="#convert-various-formats-to-geojson">#</a></h3>
<p>From a <code>numeric</code> vector of length 2</p>
<p>as <em>json</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>, <span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[32.45,-99.74]},&#34;properties&#34;:{}}]}</span>
</span></span></code></pre></div><p>as a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>, <span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From a <code>data.frame</code></p>
<p>as <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{&#34;name&#34;:&#34;Abilene TX&#34;,&#34;country.etc&#34;:&#34;TX&#34;,&#34;pop&#34;:&#34;113888&#34;,&#34;capital&#34;:&#34;0&#34;}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-81.52,41.08]},&#34;properties&#34;:{&#34;name&#34;:&#34;Akron OH&#34;,&#34;country.etc&#34;:&#34;OH&#34;,&#34;pop&#34;:&#34;206634&#34;,&#34;capital&#34;:&#34;0&#34;}}]}</span>
</span></span></code></pre></div><p>as a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From <code>SpatialPolygons</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;sp&#39;</span>)
</span></span><span style="display:flex;"><span>poly1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>, <span style="color:#ae81ff">-90</span>, <span style="color:#ae81ff">-85</span>, <span style="color:#ae81ff">-100</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">50</span>, <span style="color:#ae81ff">45</span>, <span style="color:#ae81ff">40</span>)))), <span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>poly2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-90</span>, <span style="color:#ae81ff">-80</span>, <span style="color:#ae81ff">-75</span>, <span style="color:#ae81ff">-90</span>),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">30</span>, <span style="color:#ae81ff">40</span>, <span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">30</span>)))), <span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>(sp_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(poly1, poly2), <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;SpatialPolygons&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;polygons&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;Polygons&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;Polygons&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; An object of class &#34;Polygon&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Slot &#34;labpt&#34;:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -91.66667  45.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>to <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:1,&#34;properties&#34;:{&#34;dummy&#34;:0},&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[-100,40],[-90,50],[-85,45],[-100,40]]]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:2,&#34;properties&#34;:{&#34;dummy&#34;:0},&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[-90,30],[-80,40],[-75,35],[-90,30]]]}}]}</span>
</span></span></code></pre></div><p>to a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>From <code>SpatialPoints</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>(s <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPoints</span>(<span style="color:#a6e22e">cbind</span>(x, y)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; SpatialPoints:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      x y</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1,] 1 3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [2,] 2 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [3,] 3 5</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [4,] 4 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [5,] 5 4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Coordinate Reference System (CRS) arguments: NA</span>
</span></span></code></pre></div><p>to <strong>json</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(s)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:1,&#34;properties&#34;:{&#34;dat&#34;:1},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[1,3]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:2,&#34;properties&#34;:{&#34;dat&#34;:2},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[2,2]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:3,&#34;properties&#34;:{&#34;dat&#34;:3},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[3,5]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:4,&#34;properties&#34;:{&#34;dat&#34;:4},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[4,1]}},{&#34;type&#34;:&#34;Feature&#34;,&#34;id&#34;:5,&#34;properties&#34;:{&#34;dat&#34;:5},&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[5,4]}}]}</span>
</span></span></code></pre></div><p>to a <strong>list</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(s)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><h3 id="combine-objects">Combine objects<a hidden class="anchor" aria-hidden="true" href="#combine-objects">#</a></h3>
<p><code>geo_list</code> + <code>geo_list</code></p>
<blockquote>
<p>Note: <code>geo_list</code> is the output type from <code>geojson_list()</code>, it&rsquo;s just a list with a class attached so we know it&rsquo;s geojson :)</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>vec <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-99.74</span>, <span style="color:#ae81ff">32.45</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(vec)
</span></span><span style="display:flex;"><span>vecs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>))
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(vecs, geometry <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;polygon&#34;</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">+</span> b
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p><code>json</code> + <code>json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-99.74</span>, <span style="color:#ae81ff">32.45</span>))
</span></span><span style="display:flex;"><span>vecs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">0.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">101.0</span>, <span style="color:#ae81ff">1.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">1.0</span>), <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">100.0</span>, <span style="color:#ae81ff">0.0</span>))
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_json</span>(vecs, geometry <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;polygon&#34;</span>)
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">+</span> d
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[100,0],[101,0],[101,1],[100,1],[100,0]]]},&#34;properties&#34;:[]}]}</span>
</span></span></code></pre></div><h3 id="write-geojson">Write geojson<a hidden class="anchor" aria-hidden="true" href="#write-geojson">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_write</span>(us_cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, ], lat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;lat&#39;</span>, lon <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;geojson&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   Path:       myfile.geojson</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   From class: data.frame</span>
</span></span></code></pre></div><h2 id="topojson">Topojson<a hidden class="anchor" aria-hidden="true" href="#topojson">#</a></h2>
<p>In the current version of this package you can read topojson. Writing topojson was in this package, but is gone for now - will come back later as in interface to <a href="https://github.com/mbostock/topojson">topojson</a> via <a href="https://github.com/jeroenooms/V8">V8</a>.</p>
<p>Read from a file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;us_states.topojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(file)
</span></span></code></pre></div><p>Read from a URL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(url)
</span></span></code></pre></div><h2 id="lint-geojson">Lint geojson<a hidden class="anchor" aria-hidden="true" href="#lint-geojson">#</a></h2>
<p>There are two ways to do this in this package.</p>
<h3 id="lint-locally">lint, locally<a hidden class="anchor" aria-hidden="true" href="#lint-locally">#</a></h3>
<p>Uses the javascript library <a href="https://github.com/mapbox/geojsonhint">geojsonhint</a> from Mapbox. We&rsquo;re running this locally via the <a href="https://cran.rstudio.com/web/packages/V8/">V8</a> package.</p>
<p>Good</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">lint</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;valid&#34;</span>
</span></span></code></pre></div><p>Bad</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">lint</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;The type Rhombus is unknown&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $line</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span></code></pre></div><h3 id="validate-with-a-web-service">validate, with a web service<a hidden class="anchor" aria-hidden="true" href="#validate-with-a-web-service">#</a></h3>
<p>Uses the web service at <a href="https://geojsonlint.com/">https://geojsonlint.com/</a></p>
<p>Good</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>Bad</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;\&#34;Rhombus\&#34; is not a valid GeoJSON type.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;error&#34;</span>
</span></span></code></pre></div><h2 id="to-do">To do<a hidden class="anchor" aria-hidden="true" href="#to-do">#</a></h2>
<ul>
<li>I&rsquo;d like to replace <code>rgdal</code> with javascript libraries to read from various file types (kml, shp, etc.) and convert to geojson. This is <a href="https://github.com/ropensci/geojsonio/tree/js">in development</a>, and will come in the next version of this package most likely. This should make installation a bit easier as we won&rsquo;t have to depend on <code>rgdal</code> and <code>GDAL</code></li>
<li>Performance improvements. Some operations already use the gdal or geos C libraries, so are quite fast, though the round trip to disk and back does take significant time. I&rsquo;d like to speed this up.</li>
<li>More input types. We already have operations (json, list, etc.) for lots of input types (data.frame, list, sp classes), but likely there will be more added.</li>
<li>Most likely add functions <code>topojson_list()</code>, <code>topojson_json()</code></li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/r/">R</a></li>
      <li><a href="http://localhost:1313/tags/geojson/">Geojson</a></li>
      <li><a href="http://localhost:1313/tags/topojson/">Topojson</a></li>
      <li><a href="http://localhost:1313/tags/geospatial/">Geospatial</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Recology</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
