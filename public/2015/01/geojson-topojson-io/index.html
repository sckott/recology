<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>R I/O for geojson and topojson | Recology</title>
<meta name="keywords" content="R, geospatial, spatial, geojson, topojson">
<meta name="description" content="At rOpenSci we&rsquo;ve been working on an R package (geojsonio) to make converting R data in various formats to geoJSON and topoJSON, and vice versa. We hope to do this one job very well, and handle all reasonable use cases.
Functions in this package are organized first around what you&rsquo;re working with or want to get, geojson or topojson, then convert to or read from various formats:

geojson_list()/topojson_list() - convert to geojson/topojson as R list format
geojson_json()/topojson_json() - convert to geojson/topojson as json
geojson_read()``topojson_read() - read a geojson/topojson file from file path or URL
geojson_write()/topojson_write() - write a geojson/topojson file locally

Each of the above functions have methods for various objects/classes, including numeric, data.frame, list, SpatialPolygons, SpatialPolygonsDataFrame, SpatialLines, SpatialLinesDataFrame, SpatialPoints, SpatialPointsDataFrame.">
<meta name="author" content="Scott Chamberlain">
<link rel="canonical" href="http://localhost:1313/2015/01/geojson-topojson-io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f4cda22486791d430ef692108ba33a982c3c552eca57e99456bb55aa4bd22568.css" integrity="sha256-9M2iJIZ5HUMO9pIQi6M6mCw8VS7KV&#43;mUVrtVqkvSJWg=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2015/01/geojson-topojson-io/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      R I/O for geojson and topojson
    </h1>
    <div class="post-meta"><span title='2015-01-06 00:00:00 +0000 UTC'>January 6, 2015</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Scott Chamberlain

</div>
  </header> 
  <div class="post-content"><p>At rOpenSci we&rsquo;ve been working on an R package (<code>geojsonio</code>) to make converting R data in various formats to <a href="https://geojson.org/geojson-spec.html">geoJSON</a> and <a href="https://github.com/topojson/topojson-specification/blob/master/README.md">topoJSON</a>, and vice versa. We hope to do this one job very well, and handle all reasonable use cases.</p>
<p>Functions in this package are organized first around what you&rsquo;re working with or want to get, <code>geojson</code> or <code>topojson</code>, then convert to or read from various formats:</p>
<ul>
<li><code>geojson_list()</code>/<code>topojson_list()</code> - convert to geojson/topojson as R list format</li>
<li><code>geojson_json()</code>/<code>topojson_json()</code> - convert to geojson/topojson as json</li>
<li><code>geojson_read()``topojson_read()</code> - read a geojson/topojson file from file path or URL</li>
<li><code>geojson_write()</code>/<code>topojson_write()</code> - write a geojson/topojson file locally</li>
</ul>
<p>Each of the above functions have methods for various objects/classes, including <code>numeric</code>, <code>data.frame</code>, <code>list</code>, <code>SpatialPolygons</code>, <code>SpatialPolygonsDataFrame</code>, <code>SpatialLines</code>, <code>SpatialLinesDataFrame</code>, <code>SpatialPoints</code>, <code>SpatialPointsDataFrame</code>.</p>
<h2 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h2>
<p>Install rgdal - in case you can&rsquo;t get it installed from binary , here&rsquo;s what works on a Mac.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;https://cran.r-project.org/src/contrib/rgdal_0.9-1.tar.gz&#34;</span>, repos <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>, type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;source&#34;</span>, configure.args <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;--with-gdal-config=/Library/Frameworks/GDAL.framework/Versions/1.10/unix/bin/gdal-config --with-proj-include=/Library/Frameworks/PROJ.framework/unix/include --with-proj-lib=/Library/Frameworks/PROJ.framework/unix/lib&#34;</span>)
</span></span></code></pre></div><p>Install <code>geojsonio</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;devtools&#34;</span>)
</span></span><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/geojsonio&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span></code></pre></div><h2 id="geojson">GeoJSON<a hidden class="anchor" aria-hidden="true" href="#geojson">#</a></h2>
<h3 id="convert-various-formats-to-geojson">Convert various formats to geojson<a hidden class="anchor" aria-hidden="true" href="#convert-various-formats-to-geojson">#</a></h3>
<p>From a <code>numeric</code> vector of length 2, as json or list</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>,<span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;Point&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[32.45,-99.74]},&#34;properties&#34;:{}}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">32.45</span>,<span style="color:#ae81ff">-99.74</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1]  32.45 -99.74</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; NULL</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;geo_list&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;from&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;numeric&#34;</span>
</span></span></code></pre></div><p>From a <code>data.frame</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;maps&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;FeatureCollection&#34;,&#34;features&#34;:[{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-99.74,32.45]},&#34;properties&#34;:{&#34;name&#34;:&#34;Abilene TX&#34;,&#34;country.etc&#34;:&#34;TX&#34;,&#34;pop&#34;:&#34;113888&#34;,&#34;capital&#34;:&#34;0&#34;}},{&#34;type&#34;:&#34;Feature&#34;,&#34;geometry&#34;:{&#34;type&#34;:&#34;Point&#34;,&#34;coordinates&#34;:[-81.52,41.08]},&#34;properties&#34;:{&#34;name&#34;:&#34;Akron OH&#34;,&#34;country.etc&#34;:&#34;OH&#34;,&#34;pop&#34;:&#34;206634&#34;,&#34;capital&#34;:&#34;0&#34;}}]}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;FeatureCollection&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -99.74  32.45</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Abilene TX&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$country.etc</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;TX&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$pop</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;113888&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[1]]$properties$capital</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Feature&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry$type</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Point&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$geometry$coordinates</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -81.52  41.08</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;Akron OH&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$country.etc</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;OH&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$pop</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;206634&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $features[[2]]$properties$capital</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;geo_list&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;from&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;data.frame&#34;</span>
</span></span></code></pre></div><p>From <code>SpatialPolygons</code> class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;sp&#39;</span>)
</span></span><span style="display:flex;"><span>poly1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-100</span>,<span style="color:#ae81ff">-90</span>,<span style="color:#ae81ff">-85</span>,<span style="color:#ae81ff">-100</span>),
</span></span><span style="display:flex;"><span>                                     <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">50</span>,<span style="color:#ae81ff">45</span>,<span style="color:#ae81ff">40</span>)))), <span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span>poly2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Polygons</span>(<span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">Polygon</span>(<span style="color:#a6e22e">cbind</span>(<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-90</span>,<span style="color:#ae81ff">-80</span>,<span style="color:#ae81ff">-75</span>,<span style="color:#ae81ff">-90</span>),
</span></span><span style="display:flex;"><span>                                     <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">30</span>,<span style="color:#ae81ff">40</span>,<span style="color:#ae81ff">35</span>,<span style="color:#ae81ff">30</span>)))), <span style="color:#e6db74">&#34;2&#34;</span>)
</span></span><span style="display:flex;"><span>sp_poly <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPolygons</span>(<span style="color:#a6e22e">list</span>(poly1, poly2), <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>to json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_json</span>(sp_poly)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; {&#34;type&#34;:&#34;Polygon&#34;,&#34;bbox&#34;:[-100,-75,30,50],&#34;coordinates&#34;:[[[-100,40],[-90,50],[-85,45],[-100,40]],[[-90,30],[-80,40],[-75,35],[-90,30]]],&#34;properties&#34;:{}}</span>
</span></span></code></pre></div><p>to list</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">geojson_list</span>(sp_poly)<span style="color:#f92672">$</span>coordinates[[1]]
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -100</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[1]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 40</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -90</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[2]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 50</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -85</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[3]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 45</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]][[1]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] -100</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [[4]][[2]]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 40</span>
</span></span></code></pre></div><h3 id="write-geojson">Write geojson<a hidden class="anchor" aria-hidden="true" href="#write-geojson">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;maps&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">geojson_write</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;geojson&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   Path:       myfile.geojson</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;   From class: data.frame</span>
</span></span></code></pre></div><h3 id="read-geojson">Read geojson<a hidden class="anchor" aria-hidden="true" href="#read-geojson">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;california.geojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;geojsonio&#34;</span>)
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_read</span>(file)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: GeoJSON </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;/Users/sacmac/Library/R/3.1/library/geojsonio/examples/california.geojson&#34;, layer: &#34;OGRGeoJSON&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 1 features and 11 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbMultiPolygon with 2 dimensions</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11"  />
</p>
<h2 id="topojson">TopoJSON<a hidden class="anchor" aria-hidden="true" href="#topojson">#</a></h2>
<h3 id="convert-to-topojson-with-node-topojson-client">Convert to TopoJSON with Node topojson client<a hidden class="anchor" aria-hidden="true" href="#convert-to-topojson-with-node-topojson-client">#</a></h3>
<p>For topojson you will need Mike Bostock&rsquo;s command line client. Install it by doing</p>
<pre tabindex="0"><code>sudo npm install -g topojson
</code></pre><p>Download a zipped shape fileset, <a href="https://esp.cr.usgs.gov/data/little/querwisl.zip">this one</a> for distribution of <em>Quercus wislizeni</em>. Unzip the zip file to a folder. Then do (changing the path to your path)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">topojson_write</span>(shppath<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;~/Downloads/querwisl&#39;</span>, path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;~/Downloads&#34;</span>, projection<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;albers&#39;</span>, projargs<span style="color:#f92672">=</span><span style="color:#a6e22e">list</span>(rotate<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;[60, -35, 0]&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: ESRI Shapefile </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;/Users/sacmac/Downloads/querwisl&#34;, layer: &#34;querwisl&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 35 features and 5 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbPolygon with 2 dimensions</span>
</span></span></code></pre></div><p>Which prints progress on the conversion of the shape file. And prints the topojson CLI call, including the location of the output file, here <code>/Users/sacmac/querwisl.json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>OGR data source with driver<span style="color:#f92672">:</span> ESRI Shapefile
</span></span><span style="display:flex;"><span>Source<span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;/Users/sacmac/Downloads/querwisl&#34;</span>, layer<span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;querwisl&#34;</span>
</span></span><span style="display:flex;"><span>with <span style="color:#ae81ff">35</span> features and <span style="color:#ae81ff">5</span> fields
</span></span><span style="display:flex;"><span>Feature type<span style="color:#f92672">:</span> wkbPolygon with <span style="color:#ae81ff">2</span> dimensions
</span></span><span style="display:flex;"><span>topojson <span style="color:#f92672">-</span>o <span style="color:#f92672">/</span>Users<span style="color:#f92672">/</span>sacmac<span style="color:#f92672">/</span>querwisl.json <span style="color:#f92672">-</span>q <span style="color:#ae81ff">1e4</span> <span style="color:#f92672">-</span>s <span style="color:#ae81ff">0</span> <span style="color:#f92672">--</span>shapefile<span style="color:#f92672">-</span>encoding utf8 <span style="color:#f92672">--</span>projection <span style="color:#e6db74">&#39;d3.geo.albers().rotate([60, -35, 0])&#39;</span> <span style="color:#f92672">--</span> <span style="color:#f92672">/</span>var<span style="color:#f92672">/</span>folders<span style="color:#f92672">/</span>gs<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>khph0xs0436gmd2gdnwsg080000gn<span style="color:#f92672">/</span>T<span style="color:#f92672">//</span>Rtmp49APW7<span style="color:#f92672">/</span>querwisl.shp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bounds<span style="color:#f92672">:</span> <span style="color:#ae81ff">-403.2554825867553</span> <span style="color:#ae81ff">401.27189387582916</span> <span style="color:#ae81ff">-295.798050380061</span> <span style="color:#ae81ff">585.4214768677039</span> (cartesian)
</span></span><span style="display:flex;"><span>pre<span style="color:#f92672">-</span>quantization<span style="color:#f92672">:</span> <span style="color:#ae81ff">0.010746817902459677</span> <span style="color:#ae81ff">0.018416799979185387</span>
</span></span><span style="display:flex;"><span>topology<span style="color:#f92672">:</span> <span style="color:#ae81ff">35</span> arcs, <span style="color:#ae81ff">2492</span> points
</span></span><span style="display:flex;"><span>prune<span style="color:#f92672">:</span> retained <span style="color:#ae81ff">35</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">35</span> <span style="color:#a6e22e">arcs </span>(<span style="color:#ae81ff">100</span>%)
</span></span></code></pre></div><p>You can then use this topojson file wherever. We&rsquo;ll add a function soon to automagically throw this file up as a Github gist to get an interactive map.</p>
<h3 id="read-topojson">Read topojson<a hidden class="anchor" aria-hidden="true" href="#read-topojson">#</a></h3>
<p>TopoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;</span>
</span></span><span style="display:flex;"><span>out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">topojson_read</span>(url)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; OGR data source with driver: GeoJSON </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: &#34;https://raw.githubusercontent.com/shawnbot/d3-cartogram/master/data/us-states.topojson&#34;, layer: &#34;states&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; with 51 features and 2 fields</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Feature type: wkbPolygon with 2 dimensions</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plot</span>(out)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14"  />
</p>
<h2 id="use-case-play-with-us-states">Use case: Play with US states<a hidden class="anchor" aria-hidden="true" href="#use-case-play-with-us-states">#</a></h2>
<p>Using data from <a href="https://github.com/glynnbird/usstatesgeojson">https://github.com/glynnbird/usstatesgeojson</a></p>
<p>Get some geojson</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;httr&#39;</span>)
</span></span><span style="display:flex;"><span>res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">GET</span>(<span style="color:#e6db74">&#39;https://api.github.com/repos/glynnbird/usstatesgeojson/contents&#39;</span>)
</span></span><span style="display:flex;"><span>st_names <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">Filter</span>(<span style="color:#66d9ef">function</span>(x) <span style="color:#a6e22e">grepl</span>(<span style="color:#e6db74">&#34;\\.geojson&#34;</span>, x), <span style="color:#a6e22e">sapply</span>(<span style="color:#a6e22e">content</span>(res), <span style="color:#e6db74">&#34;[[&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span>))
</span></span><span style="display:flex;"><span>base <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#39;https://raw.githubusercontent.com/glynnbird/usstatesgeojson/master/&#39;</span>
</span></span><span style="display:flex;"><span>st_files <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(base, st_names)
</span></span></code></pre></div><p>Make a faceted plot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;ggplot2&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;plyr&#39;</span>)
</span></span><span style="display:flex;"><span>st_use <span style="color:#f92672">&lt;-</span> st_files[7<span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>]
</span></span><span style="display:flex;"><span>geo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">lapply</span>(st_use, geojson_read, verbose <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ldply</span>(<span style="color:#a6e22e">setNames</span>(<span style="color:#a6e22e">lapply</span>(geo, fortify), <span style="color:#a6e22e">gsub</span>(<span style="color:#e6db74">&#34;\\.geojson&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>, st_names[7<span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>])))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(df, <span style="color:#a6e22e">aes</span>(long, lat, group <span style="color:#f92672">=</span> group)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_polygon</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facet_wrap</span>(<span style="color:#f92672">~</span> .id, scales <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;free&#34;</span>)
</span></span></code></pre></div><p><img loading="lazy" src="/public/img/2015-01-06-geojson-topojson-io/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16"  />
</p>
<h2 id="maps">Maps<a hidden class="anchor" aria-hidden="true" href="#maps">#</a></h2>
<p>We&rsquo;re also working on <code>map_gist()</code> - to push up a geojson or topojson file as a GitHub gist (renders as an interactive map). It still needs some work&hellip;</p>
<h2 id="validate-geojson">Validate geojson<a hidden class="anchor" aria-hidden="true" href="#validate-geojson">#</a></h2>
<p><a href="https://geojsonlint.com/">geojsonlint.com</a> has a nice web interface you can use to make sure you&rsquo;re geoJSON is in the right format. In addition, it provides a RESTful endpoint at <code>geojsonlint.com/validate</code> to validate geoJSON.
This was just added today in this package, and can be used from many data types.</p>
<p>Good geoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Point&#34;, &#34;coordinates&#34;: [-100, 80]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>Bad geoJSON</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#e6db74">&#39;{&#34;type&#34;: &#34;Rhombus&#34;, &#34;coordinates&#34;: [[1, 2], [3, 4], [5, 6]]}&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $message</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;\&#34;Rhombus\&#34; is not a valid GeoJSON type.&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;error&#34;</span>
</span></span></code></pre></div><p>A file</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>file <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">system.file</span>(<span style="color:#e6db74">&#34;examples&#34;</span>, <span style="color:#e6db74">&#34;zillow_or.geojson&#34;</span>, package <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;togeojson&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.location</span>(file))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>A URL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://raw.githubusercontent.com/glynnbird/usstatesgeojson/master/california.geojson&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(<span style="color:#a6e22e">as.location</span>(url))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>From the output of <code>geojson_list()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;maps&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span>(us.cities)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">geojson_list</span>(us.cities[1<span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>,], lat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lat&#39;</span>, lon<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;long&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div><p>From SpatialPoints class</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;sp&#34;</span>)
</span></span><span style="display:flex;"><span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>)
</span></span><span style="display:flex;"><span>b <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">SpatialPoints</span>(<span style="color:#a6e22e">cbind</span>(a,b))
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">validate</span>(x)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $status</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;ok&#34;</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/r/">R</a></li>
      <li><a href="http://localhost:1313/tags/geospatial/">Geospatial</a></li>
      <li><a href="http://localhost:1313/tags/spatial/">Spatial</a></li>
      <li><a href="http://localhost:1313/tags/geojson/">Geojson</a></li>
      <li><a href="http://localhost:1313/tags/topojson/">Topojson</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">Recology</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
