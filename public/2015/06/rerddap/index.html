<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>rerddap - General purpose R client for ERDDAP servers | Recology</title>
<meta name="keywords" content="R, API, NOAA, web services">
<meta name="description" content="ERDDAP is a data server that gives you a simple, consistent way to download subsets of gridded and tabular scientific datasets in common file formats and make graphs and maps.  Besides it’s own RESTful interface, much of which is designed based on OPeNDAP, ERDDAP can act as an OPeNDAP server and as a WMS server for gridded data.
ERDDAP is a powerful tool - in a world of heterogeneous data, it&rsquo;s often hard to combine data and serve it through the same interface, with tools for querying/filtering/subsetting the data. That is exactly what ERDDAP does. Heterogeneous data sets often have some similarities, such as latitude/longitude data and usually a time component, but other variables vary widely.">
<meta name="author" content="Scott Chamberlain">
<link rel="canonical" href="http://localhost:1313/2015/06/rerddap/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a4ec0cdfac731fabf363c0b5d5ab206254bbf9b6aaf985d695c6bb534196df16.css" integrity="sha256-pOwM36xzH6vzY8C11asgYlS7&#43;baq&#43;YXWlca7U0GW3xY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2015/06/rerddap/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Recology (Alt + H)">Recology</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/links" title="Links">
                    <span>Links</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/index.xml" title="RSS">
                    <span>RSS</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      rerddap - General purpose R client for ERDDAP servers
    </h1>
    <div class="post-meta"><span title='2015-06-24 00:00:00 +0000 UTC'>June 24, 2015</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Scott Chamberlain

</div>
  </header> 
  <div class="post-content"><p><a href="https://upwell.pfeg.noaa.gov/erddap/information.html">ERDDAP</a> is a data server that gives you a simple, consistent way to download subsets of gridded and tabular scientific datasets in common file formats and make graphs and maps.  Besides it’s own <a href="https://upwell.pfeg.noaa.gov/erddap/rest.html">RESTful interface</a>, much of which is designed based on <a href="https://en.wikipedia.org/wiki/OPeNDAP">OPeNDAP</a>, ERDDAP can act as an OPeNDAP server and as a <a href="https://en.wikipedia.org/wiki/Web_Map_Service">WMS</a> server for gridded data.</p>
<p>ERDDAP is a powerful tool - in a world of heterogeneous data, it&rsquo;s often hard to combine data and serve it through the same interface, with tools for querying/filtering/subsetting the data. That is exactly what ERDDAP does. Heterogeneous data sets often have some similarities, such as latitude/longitude data and usually a time component, but other variables vary widely.</p>
<h2 id="netcdf">NetCDF<a hidden class="anchor" aria-hidden="true" href="#netcdf">#</a></h2>
<p><code>rerddap</code> supports <a href="https://en.wikipedia.org/wiki/NetCDF">NetCDF format</a>, and is the default when using the <code>griddap()</code> function. We use <code>ncdf</code> by default, but you can choose to use <code>ncdf4</code> instead.</p>
<h2 id="caching">Caching<a hidden class="anchor" aria-hidden="true" href="#caching">#</a></h2>
<p>Data files downloaded are cached in a single hidden directory <code>~/.rerddap</code> on your machine. It&rsquo;s hidden so that you don&rsquo;t accidentally delete the data, but you can still easily delete the data if you like, open files, move them around, etc.</p>
<p>When you use <code>griddap()</code> or <code>tabledap()</code> functions, we construct a <a href="https://en.wikipedia.org/wiki/MD5#MD5_hashes">MD5 hash</a> from the base URL, and any query parameters - this way each query is separately cached. Once we have the hash, we look in <code>~/.rerddap</code> for a matching hash. If there&rsquo;s a match we use that file on disk - if no match, we make a http request for the data to the ERDDAP server you specify.</p>
<h2 id="erddap-servers">ERDDAP servers<a hidden class="anchor" aria-hidden="true" href="#erddap-servers">#</a></h2>
<p>You can get a data.frame of ERDDAP servers using the function <code>servers()</code>. Most I think serve some kind of NOAA data, but there are a few that aren&rsquo;t NOAA data. Here are a few:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">head</span>(<span style="color:#a6e22e">servers</span>())
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                            name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                                                         Marine Domain Awareness (MDA) - Italy</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2                                                                    Marine Institute - Ireland</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3                                                      CoastWatch Caribbean/Gulf of Mexico Node</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4                                                                    CoastWatch West Coast Node</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5                    NOAA IOOS CeNCOOS (Central and Northern California Ocean Observing System)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 NOAA IOOS NERACOOS (Northeastern Regional Association of Coastal and Ocean Observing Systems)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                        url</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1 https://bluehub.jrc.ec.europa.eu/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2          https://erddap.marine.ie/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3      https://cwcgom.aoml.noaa.gov/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  https://coastwatch.pfeg.noaa.gov/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5    https://erddap.axiomalaska.com/erddap/</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6          https://www.neracoos.org/erddap/</span>
</span></span></code></pre></div><h2 id="install">Install<a hidden class="anchor" aria-hidden="true" href="#install">#</a></h2>
<p>From CRAN</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;rerddap&#34;</span>)
</span></span></code></pre></div><p>Or development version from GitHub</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>devtools<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/rerddap&#34;</span>)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#39;rerddap&#39;</span>)
</span></span></code></pre></div><h2 id="search">Search<a hidden class="anchor" aria-hidden="true" href="#search">#</a></h2>
<p>First, you likely want to search for data, specifying whether to search for either <code>griddadp</code> or <code>tabledap</code> datasets. The default is <code>griddap</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ed_search</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;size&#39;</span>, which <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;table&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 results, showing first 20 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                         title</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1                                                                          CalCOFI Fish Sizes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2                                                                        CalCOFI Larvae Sizes</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3                Channel Islands, Kelp Forest Monitoring, Size and Frequency, Natural Habitat</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4                                                         CalCOFI Larvae Counts Positive Tows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5                                                                                CalCOFI Tows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7                                                  OBIS - ARGOS Satellite Tracking of Animals</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8                                                     GLOBEC NEP MOCNESS Plankton (MOC1) Data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9                                                 GLOBEC NEP Vertical Plankton Tow (VPT) Data</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10                            NWFSC Observer Fixed Gear Data, off West Coast of US, 2002-2006</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11                                 NWFSC Observer Trawl Data, off West Coast of US, 2002-2006</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12 AN EXPERIMENTAL DATASET: Underway Sea Surface Temperature and Salinity Aboard the Oleander</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;             dataset_id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1     erdCalCOFIfshsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     erdCalCOFIlrvsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3       erdCinpKfmSFNH</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  erdCalCOFIlrvcntpos</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5       erdCalCOFItows</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7            aadcArgos</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8        erdGlobecMoc1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9         erdGlobecVpt</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10  nwioosObsFixed2002</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11  nwioosObsTrawl2002</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12            nodcPJJU</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">ed_search</span>(query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;size&#39;</span>, which <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grid&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6 results, showing first 20 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                                                                                                   title</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6                                                       NOAA Global Coral Bleaching Monitoring Products</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13        USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14            USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_u][xi_u]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15            USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][eta_v][xi_v]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][s_rho][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17  USGS COAWST Forecast, US East Coast and Gulf of Mexico (Experimental) [time][Nbed][eta_rho][xi_rho]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;             dataset_id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6             NOAA_DHW</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13 whoi_ed12_89ce_9592</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14 whoi_61c3_0b5d_cd61</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15 whoi_62d0_9d64_c8ff</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 whoi_7dd7_db97_4bbe</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 whoi_a4fb_2c9c_16a7</span>
</span></span></code></pre></div><p>This gives back dataset titles and identifiers - with which you should be able to get a sense for which dataset you may want to fetch.</p>
<h2 id="information">Information<a hidden class="anchor" aria-hidden="true" href="#information">#</a></h2>
<p>After searching you can get more information on a single dataset</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;whoi_62d0_9d64_c8ff&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; whoi_62d0_9d64_c8ff </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Dimensions (range):  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      time: (2012-06-25T01:00:00Z, 2015-06-24T00:00:00Z) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      eta_v: (0, 334) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      xi_v: (0, 895) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      bedload_Vsand_01: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: kilogram meter-1 s-1 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      bedload_Vsand_02: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: kilogram meter-1 s-1 </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><p>Which is a simple S3 list but prints out pretty, so it&rsquo;s easy to quickly scan the printed output and see what you need to see to proceed. That is, in the next step you want to get the dataset, and you&rsquo;ll want to specify your search using some combination of values for latitude, longitude, and time.</p>
<h2 id="griddap-gridded-data">griddap (gridded) data<a hidden class="anchor" aria-hidden="true" href="#griddap-gridded-data">#</a></h2>
<p>First, get information on a dataset to see time range, lat/long range, and variables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;noaa_esrl_027d_0fb5_5d38&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; noaa_esrl_027d_0fb5_5d38 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Dimensions (range):  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      time: (1850-01-01T00:00:00Z, 2014-05-01T00:00:00Z) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      latitude: (87.5, -87.5) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      longitude: (-177.5, 177.5) </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      air: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Range: -20.9, 19.5 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: degC</span>
</span></span></code></pre></div><p>Then query for gridded data using the <code>griddap()</code> function</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">griddap</span>(out,
</span></span><span style="display:flex;"><span>  time <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;2012-01-01&#39;</span>, <span style="color:#e6db74">&#39;2012-01-30&#39;</span>),
</span></span><span style="display:flex;"><span>  latitude <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  longitude <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">-80</span>, <span style="color:#ae81ff">-70</span>)
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP griddap&gt; noaa_esrl_027d_0fb5_5d38</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Path: [~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Last updated: [2015-05-09 08:31:10]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    File size:    [0 mb]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dimensions (dims/vars):   [3 X 1]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dim names: time, latitude, longitude</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Variable names: CRUTEM3: Surface Air Temperature Monthly Anomaly</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    data.frame (rows/columns):   [18 X 4]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    time latitude longitude  air</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2012-01-01T00:00:00Z     22.5     -77.5 -0.1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2012-01-01T00:00:00Z     22.5     -77.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2012-01-01T00:00:00Z     22.5     -77.5 -0.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2012-01-01T00:00:00Z     17.5     -72.5  0.2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2012-01-01T00:00:00Z     17.5     -72.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2012-01-01T00:00:00Z     17.5     -72.5  0.3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2012-02-01T00:00:00Z     17.5     -72.5   NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..                  ...      ...       ...  ...</span>
</span></span></code></pre></div><p>The output of <code>griddap()</code> is a list that you can explore further. Get the summary</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>summary
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;file ~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc has 3 dimensions:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time   Size: 2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;latitude   Size: 3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;longitude   Size: 3&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;------------------------&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;file ~/.rerddap/648ed11e8b911b65e39eb63c8df339df.nc has 1 variables:&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;float air[longitude,latitude,time]  Longname:CRUTEM3: Surface Air Temperature Monthly Anomaly Missval:-9.96920996838687e+36&#34;</span>
</span></span></code></pre></div><p>Or get the dimension variables (just the names of the variables for brevity here)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">names</span>(res<span style="color:#f92672">$</span>summary<span style="color:#f92672">$</span>dim)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time&#34;      &#34;latitude&#34;  &#34;longitude&#34;</span>
</span></span></code></pre></div><p>Get the data.frame (beware: you may want to just look at the <code>head</code> of the data.frame if large)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>data
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                    time latitude longitude   air</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  2012-01-01T00:00:00Z     22.5     -77.5 -0.10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  2012-01-01T00:00:00Z     22.5     -77.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  2012-01-01T00:00:00Z     22.5     -77.5 -0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  2012-01-01T00:00:00Z     17.5     -72.5  0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  2012-01-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  2012-01-01T00:00:00Z     17.5     -72.5  0.30</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12 2012-02-01T00:00:00Z     17.5     -72.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13 2012-02-01T00:00:00Z     12.5     -67.5  0.40</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14 2012-02-01T00:00:00Z     12.5     -67.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15 2012-02-01T00:00:00Z     12.5     -67.5  0.20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16 2012-02-01T00:00:00Z     12.5     -67.5  0.00</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 2012-02-01T00:00:00Z     12.5     -67.5    NA</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18 2012-02-01T00:00:00Z     12.5     -67.5  0.32</span>
</span></span></code></pre></div><p>You can actually still explore the original netcdf summary object, e.g.,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>res<span style="color:#f92672">$</span>summary<span style="color:#f92672">$</span>dim<span style="color:#f92672">$</span>time
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;time&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $len</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 2</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $unlim</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] FALSE</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $id</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $dimvarid</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $units</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;seconds since 1970-01-01T00:00:00Z&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $vals</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] 1325376000 1328054400</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; $create_dimvar</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; attr(,&#34;class&#34;)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; [1] &#34;dim.ncdf&#34;</span>
</span></span></code></pre></div><h2 id="tabledap-tabular-data">tabledap (tabular) data<a hidden class="anchor" aria-hidden="true" href="#tabledap-tabular-data">#</a></h2>
<p><code>tabledap</code> is data that is not gridded by lat/lon/time. In addition, the query interface is a bit different. Notice that you can do less than, more than, equal to type queries, but they are specified as character strings.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(out <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#39;erdCalCOFIfshsiz&#39;</span>))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP info&gt; erdCalCOFIfshsiz </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;  Variables:  </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      calcofi_species_code: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Range: 19, 1550 </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      common_name: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      cruise: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_1000m3: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;          Units: Fish per 1,000 cubic meters of water sampled </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_count: </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;      fish_size: </span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">...</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>(dat <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tabledap</span>(out, <span style="color:#e6db74">&#39;time&gt;=2001-07-07&#39;</span>, <span style="color:#e6db74">&#39;time&lt;=2001-07-10&#39;</span>, 
</span></span><span style="display:flex;"><span>                 fields <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#39;longitude&#39;</span>, <span style="color:#e6db74">&#39;latitude&#39;</span>, <span style="color:#e6db74">&#39;fish_size&#39;</span>, <span style="color:#e6db74">&#39;itis_tsn&#39;</span>, <span style="color:#e6db74">&#39;scientific_name&#39;</span>)))
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; &lt;ERDDAP tabledap&gt; erdCalCOFIfshsiz</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Path: [~/.rerddap/f013f9ee09bdb4184928d533e575e948.csv]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Last updated: [2015-05-09 08:31:21]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    File size:    [0.03 mb]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;    Dimensions:   [558 X 5]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;     longitude  latitude fish_size itis_tsn       scientific_name</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2     -118.26    33.255      22.9   623745 Nannobrachium ritteri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3     -118.26    33.255      22.9   623745 Nannobrachium ritteri</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4  -118.10667 32.738335      31.5   623625  Lipolagus ochotensis</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5  -118.10667 32.738335      48.3   623625  Lipolagus ochotensis</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6  -118.10667 32.738335      15.5   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7  -118.10667 32.738335      16.3   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8  -118.10667 32.738335      17.8   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9  -118.10667 32.738335      18.2   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10 -118.10667 32.738335      19.2   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11 -118.10667 32.738335      20.0   162221 Argyropelecus sladeni</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; ..        ...       ...       ...      ...                   ...</span>
</span></span></code></pre></div><p>Since both <code>griddap()</code> and <code>tabledap()</code> give back data.frame&rsquo;s, it&rsquo;s easy to do downstream manipulation. For example, we can use <code>dplyr</code> to filter, summarize, group, and sort:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;dplyr&#34;</span>)
</span></span><span style="display:flex;"><span>dat<span style="color:#f92672">$</span>fish_size <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(dat<span style="color:#f92672">$</span>fish_size)
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tbl_df</span>(dat) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">filter</span>(fish_size <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">30</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(scientific_name) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(mean_size <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(fish_size)) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">arrange</span>(<span style="color:#a6e22e">desc</span>(mean_size))
</span></span><span style="display:flex;"><span>df
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; Source: local data frame [20 x 2]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt;                 scientific_name mean_size</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 1       Idiacanthus antrostomus 253.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 2            Stomias atriventer 189.25000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 3            Lestidiops ringens  98.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 4     Tarletonbeania crenularis  56.50000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 5      Ceratoscopelus townsendi  53.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 6     Stenobrachius leucopsarus  47.74538</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 7               Sardinops sagax  47.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 8         Nannobrachium ritteri  43.30250</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 9         Bathylagoides wesethi  43.09167</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 10         Vinciguerria lucetia  42.00000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 11       Cyclothone acclinidens  40.80000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 12         Lipolagus ochotensis  39.72500</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 13        Leuroglossus stilbius  38.35385</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 14        Triphoturus mexicanus  38.21342</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 15                Diaphus theta  37.88571</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 16       Trachipterus altivelis  37.70000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 17 Symbolophorus californiensis  37.66000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 18         Nannobrachium regale  37.50000</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 19         Merluccius productus  36.61333</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#&gt; 20        Argyropelecus sladeni  32.43333</span>
</span></span></code></pre></div><p>Then make a cute little plot</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;ggplot2&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(df, <span style="color:#a6e22e">aes</span>(<span style="color:#a6e22e">reorder</span>(scientific_name, mean_size), mean_size)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;identity&#34;</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">coord_flip</span>() <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme_grey</span>(base_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labs</span>(y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Mean Size&#34;</span>, x <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Species&#34;</span>)
</span></span></code></pre></div><p><img alt="plot of chunk unnamed-chunk-19" loading="lazy" src="/2015-06-24-rerddap/unnamed-chunk-19-1.png"></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/r/">R</a></li>
      <li><a href="http://localhost:1313/tags/api/">API</a></li>
      <li><a href="http://localhost:1313/tags/noaa/">NOAA</a></li>
      <li><a href="http://localhost:1313/tags/web-services/">Web Services</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Recology</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
