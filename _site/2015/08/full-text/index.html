<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>fulltext - a package to help you mine text</title>
  <meta name="description" content="Finally, we got fulltext up on CRAN - our first commit was May last year. fulltext is a package to facilitate text mining. It focuses on open access journals...">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic|Source+Sans+Pro:400,700,200,300|Josefin+Sans:400,600,700,300' rel='stylesheet' type='text/css'>
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link href="assets/fontawesome-5.15.4/css/all.min.css" rel="stylesheet">

  <script async defer data-domain="recology.info" src="https://plausible.io/js/plausible.js"></script>

  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://localhost:4000/2015/08/full-text/">
  <link rel="alternate" type="application/rss+xml" title="recology" href="http://localhost:4000/feed.xml">

  <!-- mastodon verification -->
  <a rel="me" href="https://fosstodon.org/@sckottie">&nbsp;</a>
</head>


  <body>

    
<div class="wrapper">
  <center> <a href="/index.html"><div class="site-title">   recology </div></a></center>
</div>
<div class="wrapper site-description">
<center>code and such</center>
<!-- <br> -->
<!-- <center><a href="#mc-embedded-subscribe" style="font-size:18px">Subscribe</a></center> -->
</div>
<div class="wrapper">
  <div class="trigger site-navigation">
    <a class="page-link" href="/">HOME</a>

    
    
    
    
    
    

    <span class="exclamationMark">/</span><a class="page-link" href="/archives/">Archives</a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </div>
</div>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline"><a class="post-title-link"  href="/2015/08/full-text/">fulltext - a package to help you mine text</a></h1>
  <center>  <p class="post-meta"><time datetime="2015-08-07T00:00:00-07:00" itemprop="datePublished">Aug 7, 2015</time></p>
   </center>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Finally, we got <code class="language-plaintext highlighter-rouge">fulltext</code> up on CRAN - our first commit was <a href="https://github.com/ropensci/fulltext/commit/2d4f7e270040b2c8914853113073fc4d3134445e">May last year</a>. <code class="language-plaintext highlighter-rouge">fulltext</code> is a package to facilitate text mining. It focuses on open access journals. This package makes it easier to search for articles, download those articles in full text if available, convert pdf format to plain text, and extract text chunks for vizualization/analysis. We are planning to add bits for analysis in future versions. We’ve been working on this package for a while now. It has a lot of moving parts and package dependencies, so it took a while to get a first useable version.</p>

<p>The tasks facilitated by <code class="language-plaintext highlighter-rouge">fulltext</code> in bullet form:</p>

<ul>
  <li>Search - search for articles</li>
  <li>Retrieve - get full text</li>
  <li>Convert - convert from format X to Y</li>
  <li>Text - if needed, get text from pdfs/etc.</li>
  <li>Extract - pull out the bits of articles that you want</li>
</ul>

<p>I won’t be surprised if users uncover a lot of bugs in this package given the huge number of publishers/journals users want to get literature data from, and the surely wide diversity of use cases. But I thought it was important to get out a first version to get feedback on the user interface, and gather use cases.</p>

<p>We hope that this package can help bring text-mining to the masses - making it easy for anyone to do do, not just text-mining experts.</p>

<p>If you have any feedback, please do get in touch in the issue tracker for <code class="language-plaintext highlighter-rouge">fulltext</code> at https://github.com/ropensci/fulltext/issues - If you have use case thoughts, the <a href="https://discuss.ropensci.org/">rOpenSci discussion forum</a> might be a good place to go.</p>

<p>Let’s kick the tires, shall we?</p>

<h2 id="install">Install</h2>

<p>Will be on CRAN soon, not as of AM PDT on 2015-08-07.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"fulltext"</span><span class="p">)</span><span class="w">
</span><span class="c1"># if binaries not avail. yet on your favorite CRAN mirror</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"https://cran.rstudio.com/src/contrib/fulltext_0.1.0.tar.gz"</span><span class="p">,</span><span class="w"> </span><span class="n">repos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Or install development version from GitHub</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"ropensci/fulltext"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Load <code class="language-plaintext highlighter-rouge">fulltext</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"fulltext"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="search-for-articles">Search for articles</h2>

<p>Currently, there are hooks for searching for articles from PLOS, BMC, Crossref, Entrez, arXiv, and BioRxiv. We’ll add more in the future, but that does cover a lot of articles, especially given inclusion of Crossref (which mints most DOIs) and Entrez (which houses PMC and Pubmed).</p>

<p>An example: Search for the term <em>ecology</em> in PLOS journals.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">res1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_search</span><span class="p">(</span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ecology'</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'plos'</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; Query:</span><span class="w">
</span><span class="c1">#&gt;   [ecology] </span><span class="w">
</span><span class="c1">#&gt; Found:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 28589; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0] </span><span class="w">
</span><span class="c1">#&gt; Returned:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 10; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0]</span><span class="w">
</span></code></pre></div></div>

<p>Each publisher/search-engine has a slot with metadata and data, saying how many articles were found and how many were returned. We can dig into what PLOS gave us:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res1</span><span class="o">$</span><span class="n">plos</span><span class="w">
</span><span class="c1">#&gt; Query: [ecology] </span><span class="w">
</span><span class="c1">#&gt; Records found, returned: [28589, 10] </span><span class="w">
</span><span class="c1">#&gt; License: [CC-BY] </span><span class="w">
</span><span class="c1">#&gt;                                                         id</span><span class="w">
</span><span class="c1">#&gt; 1                             10.1371/journal.pone.0059813</span><span class="w">
</span><span class="c1">#&gt; 2                             10.1371/journal.pone.0001248</span><span class="w">
</span><span class="c1">#&gt; 3  10.1371/annotation/69333ae7-757a-4651-831c-f28c5eb02120</span><span class="w">
</span><span class="c1">#&gt; 4                             10.1371/journal.pone.0080763</span><span class="w">
</span><span class="c1">#&gt; 5                             10.1371/journal.pone.0102437</span><span class="w">
</span><span class="c1">#&gt; 6                             10.1371/journal.pone.0017342</span><span class="w">
</span><span class="c1">#&gt; 7                             10.1371/journal.pone.0091497</span><span class="w">
</span><span class="c1">#&gt; 8                             10.1371/journal.pone.0092931</span><span class="w">
</span><span class="c1">#&gt; 9  10.1371/annotation/28ac6052-4f87-4b88-a817-0cd5743e83d6</span><span class="w">
</span><span class="c1">#&gt; 10                            10.1371/journal.pcbi.1003594</span><span class="w">
</span></code></pre></div></div>

<p>For each of the data sources to search on you can pass in additional options (basically, you can use the query parameters in the functions that hit each service). Here, we can modify our search to PLOS by requesting a particular set of fields with the <code class="language-plaintext highlighter-rouge">fl</code> parameter (PLOS uses a Solr backed search engine, and <code class="language-plaintext highlighter-rouge">fl</code> is short for <code class="language-plaintext highlighter-rouge">fields</code> in Solr land):</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ft_search</span><span class="p">(</span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'ecology'</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'plos'</span><span class="p">,</span><span class="w"> </span><span class="n">plosopts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
   </span><span class="n">fl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'id'</span><span class="p">,</span><span class="s1">'author'</span><span class="p">,</span><span class="s1">'eissn'</span><span class="p">,</span><span class="s1">'journal'</span><span class="p">,</span><span class="s1">'counter_total_all'</span><span class="p">,</span><span class="s1">'alm_twitterCount'</span><span class="p">)))</span><span class="w">
</span><span class="c1">#&gt; Query:</span><span class="w">
</span><span class="c1">#&gt;   [ecology] </span><span class="w">
</span><span class="c1">#&gt; Found:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 28589; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0] </span><span class="w">
</span><span class="c1">#&gt; Returned:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 10; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0]</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p>Note that PLOS is a bit unique in allowing you to request specific parts of articles. Other sources in ft_search() don’t let you do that.</p>
</blockquote>

<h2 id="get-full-text">Get full text</h2>

<p>After you’ve found the set of articles you want to get full text for, we can use the results from <code class="language-plaintext highlighter-rouge">ft_search()</code> to grab full text. <code class="language-plaintext highlighter-rouge">ft_get()</code> accepts a character vector of list of DOIs (or PMC IDs if fetching from Entrez), or the output of <code class="language-plaintext highlighter-rouge">ft_search()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_get</span><span class="p">(</span><span class="n">res1</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; [Docs] 8 </span><span class="w">
</span><span class="c1">#&gt; [Source] R session  </span><span class="w">
</span><span class="c1">#&gt; [IDs] 10.1371/journal.pone.0059813 10.1371/journal.pone.0001248</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0080763 10.1371/journal.pone.0102437</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0017342 10.1371/journal.pone.0091497</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0092931 10.1371/journal.pcbi.1003594 ...</span><span class="w">
</span></code></pre></div></div>

<p>We got eight articles in full text in the result. We didn’t get 10, even though 10 were returned from <code class="language-plaintext highlighter-rouge">ft_search()</code> because PLOS often returns records for annotations, that is, comments on articles, which we auto-seive out within <code class="language-plaintext highlighter-rouge">ft_get()</code>.</p>

<p>Dig in to the PLOS data</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">out</span><span class="o">$</span><span class="n">plos</span><span class="w">
</span><span class="c1">#&gt; $found</span><span class="w">
</span><span class="c1">#&gt; [1] 8</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $dois</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0059813" "10.1371/journal.pone.0001248"</span><span class="w">
</span><span class="c1">#&gt; [3] "10.1371/journal.pone.0080763" "10.1371/journal.pone.0102437"</span><span class="w">
</span><span class="c1">#&gt; [5] "10.1371/journal.pone.0017342" "10.1371/journal.pone.0091497"</span><span class="w">
</span><span class="c1">#&gt; [7] "10.1371/journal.pone.0092931" "10.1371/journal.pcbi.1003594"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data</span><span class="w">
</span><span class="c1">#&gt; $data$backend</span><span class="w">
</span><span class="c1">#&gt; NULL</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data$path</span><span class="w">
</span><span class="c1">#&gt; [1] "session"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data$data</span><span class="w">
</span><span class="c1">#&gt; 8 full-text articles retrieved </span><span class="w">
</span><span class="c1">#&gt; Min. Length: 3828 - Max. Length: 104702 </span><span class="w">
</span><span class="c1">#&gt; DOIs: 10.1371/journal.pone.0059813 10.1371/journal.pone.0001248</span><span class="w">
</span><span class="c1">#&gt;   10.1371/journal.pone.0080763 10.1371/journal.pone.0102437</span><span class="w">
</span><span class="c1">#&gt;   10.1371/journal.pone.0017342 10.1371/journal.pone.0091497</span><span class="w">
</span><span class="c1">#&gt;   10.1371/journal.pone.0092931 10.1371/journal.pcbi.1003594 ... </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; NOTE: extract xml strings like output['&lt;doi&gt;']</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $opts</span><span class="w">
</span><span class="c1">#&gt; $opts$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0059813" "10.1371/journal.pone.0001248"</span><span class="w">
</span><span class="c1">#&gt; [3] "10.1371/journal.pone.0080763" "10.1371/journal.pone.0102437"</span><span class="w">
</span><span class="c1">#&gt; [5] "10.1371/journal.pone.0017342" "10.1371/journal.pone.0091497"</span><span class="w">
</span><span class="c1">#&gt; [7] "10.1371/journal.pone.0092931" "10.1371/journal.pcbi.1003594"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $opts$callopts</span><span class="w">
</span><span class="c1">#&gt; list()</span><span class="w">
</span></code></pre></div></div>

<p>Dig in further to get to one of the articles in XML format</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"xml2"</span><span class="p">)</span><span class="w">
</span><span class="n">xml2</span><span class="o">::</span><span class="n">read_xml</span><span class="p">(</span><span class="n">out</span><span class="o">$</span><span class="n">plos</span><span class="o">$</span><span class="n">data</span><span class="o">$</span><span class="n">data</span><span class="o">$</span><span class="n">`10.1371/journal.pone.0059813`</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; {xml_document}</span><span class="w">
</span><span class="c1">#&gt; &lt;article&gt;</span><span class="w">
</span><span class="c1">#&gt; [1] &lt;front&gt;\n&lt;journal-meta&gt;\n&lt;journal-id journal-id-type="nlm-ta"&gt;PLoS O ...</span><span class="w">
</span><span class="c1">#&gt; [2] &lt;body&gt;\n  &lt;sec id="s1"&gt;\n&lt;title&gt;Introduction&lt;/title&gt;\n&lt;p&gt;Ecologists  ...</span><span class="w">
</span><span class="c1">#&gt; [3] &lt;back&gt;\n&lt;ack&gt;\n&lt;p&gt;Curtis Flather, Mark Burgman, Leon Blaustein, Yaac ...</span><span class="w">
</span></code></pre></div></div>

<p>Now with the xml, you can dig into whatever you like, e.g., using <code class="language-plaintext highlighter-rouge">xml2</code> or <code class="language-plaintext highlighter-rouge">rvest</code>.</p>

<h2 id="extract-text-from-pdfs">Extract text from pdfs</h2>

<p>Ideally for text mining you have access to XML or other text based formats. However, sometimes you only have access to PDFs. In this case you want to extract text from PDFs. <code class="language-plaintext highlighter-rouge">fulltext</code> can help with that.</p>

<p>You can extract from any pdf from a file path, like:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">system.file</span><span class="p">(</span><span class="s2">"examples"</span><span class="p">,</span><span class="w"> </span><span class="s2">"example1.pdf"</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fulltext"</span><span class="p">)</span><span class="w">
</span><span class="n">ft_extract</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; &lt;document&gt;/Library/Frameworks/R.framework/Versions/3.2/Resources/library/fulltext/examples/example1.pdf</span><span class="w">
</span><span class="c1">#&gt;   Pages: 18</span><span class="w">
</span><span class="c1">#&gt;   Title: Suffering and mental health among older people living in nursing homes---a mixed-methods study</span><span class="w">
</span><span class="c1">#&gt;   Producer: pdfTeX-1.40.10</span><span class="w">
</span><span class="c1">#&gt;   Creation date: 2015-07-17</span><span class="w">
</span></code></pre></div></div>

<p>Let’s search for articles from arXiv, a preprint service. Here, get pdf from an article with ID <code class="language-plaintext highlighter-rouge">cond-mat/9309029</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_get</span><span class="p">(</span><span class="s1">'cond-mat/9309029'</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"arxiv"</span><span class="p">)</span><span class="w">
</span><span class="n">res2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_extract</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w">
</span><span class="n">res2</span><span class="o">$</span><span class="n">arxiv</span><span class="o">$</span><span class="n">data</span><span class="w">
</span><span class="c1">#&gt; $backend</span><span class="w">
</span><span class="c1">#&gt; NULL</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $path</span><span class="w">
</span><span class="c1">#&gt; $path$`cond-mat/9309029`</span><span class="w">
</span><span class="c1">#&gt; [1] "~/.fulltext/cond-mat_9309029.pdf"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data</span><span class="w">
</span><span class="c1">#&gt; $data[[1]]</span><span class="w">
</span><span class="c1">#&gt; &lt;document&gt;/Users/sacmac/.fulltext/cond-mat_9309029.pdf</span><span class="w">
</span><span class="c1">#&gt;   Pages: 14</span><span class="w">
</span><span class="c1">#&gt;   Title: arXiv:cond-mat/9309029v8  26 Jan 1994</span><span class="w">
</span><span class="c1">#&gt;   Producer: GPL Ghostscript SVN PRE-RELEASE 8.62</span><span class="w">
</span><span class="c1">#&gt;   Creation date: 2008-02-06</span><span class="w">
</span></code></pre></div></div>

<p>And a short snippet of the full text</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res2</span><span class="o">$</span><span class="n">arxiv</span><span class="o">$</span><span class="n">data</span><span class="o">$</span><span class="n">data</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">$</span><span class="n">data</span><span class="w">
</span><span class="c1">#&gt; "arXiv:cond-mat/9309029v8 26 Jan 1994, , FERMILAB-PUB-93/15-T March 1993, Revised:</span><span class="w">
</span><span class="c1">#&gt; January 1994, The Thermodynamics and Economics of Waste, Dallas C. Kennedy, Research</span><span class="w">
</span><span class="c1">#&gt; Associate, Fermi National Accelerator Laboratory, P.O. Box 500 MS106, Batavia, Illinois</span><span class="w">
</span><span class="c1">#&gt; 60510 USA, Abstract, The increasingly relevant problem of natural resource use and</span><span class="w">
</span><span class="c1">#&gt; waste production, disposal, and reuse is examined from several viewpoints: economic,</span><span class="w">
</span><span class="c1">#&gt; technical, and thermodynamic. Alternative economies are studied, with emphasis on</span><span class="w">
</span><span class="c1">#&gt; recycling of waste to close the natural resource cycle. The physical nature of human</span><span class="w">
</span><span class="c1">#&gt; economies and constraints on recycling and energy efficiency are stated in terms</span><span class="w">
</span><span class="c1">#&gt; ..."</span><span class="w">
</span></code></pre></div></div>

<h2 id="extract-text-chunks">Extract text chunks</h2>

<p>We have a few functions to help you pull out certain parts of an article. For example, perhaps you want to get just the authors from your articles, or just the abstracts.</p>

<p>Here, we’ll search for some PLOS articles, then get their full text, then extract various parts of each article with <code class="language-plaintext highlighter-rouge">chunks()</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_search</span><span class="p">(</span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"ecology"</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plos"</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_get</span><span class="p">(</span><span class="n">res</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; [Docs] 8 </span><span class="w">
</span><span class="c1">#&gt; [Source] R session  </span><span class="w">
</span><span class="c1">#&gt; [IDs] 10.1371/journal.pone.0059813 10.1371/journal.pone.0001248</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0080763 10.1371/journal.pone.0102437</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0017342 10.1371/journal.pone.0091497</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0092931 10.1371/journal.pcbi.1003594 ...</span><span class="w">
</span></code></pre></div></div>

<p>Extract DOIs</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">chunks</span><span class="p">(</span><span class="s2">"doi"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; $plos</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0059813`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0059813`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0059813"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0001248`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0001248`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0001248"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0080763`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0080763`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0080763"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0102437`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0102437`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0102437"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0017342`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0017342`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0017342"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0091497`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0091497`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0091497"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0092931`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0092931`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0092931"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pcbi.1003594`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pcbi.1003594`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pcbi.1003594"</span><span class="w">
</span></code></pre></div></div>

<p>Extract DOIs and categories</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">chunks</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"doi"</span><span class="p">,</span><span class="s2">"categories"</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; $plos</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0059813`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0059813`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0059813"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0059813`$categories</span><span class="w">
</span><span class="c1">#&gt;  [1] "Research Article"                 "Biology"                         </span><span class="w">
</span><span class="c1">#&gt;  [3] "Ecology"                          "Community ecology"               </span><span class="w">
</span><span class="c1">#&gt;  [5] "Species interactions"             "Science policy"                  </span><span class="w">
</span><span class="c1">#&gt;  [7] "Research assessment"              "Research monitoring"             </span><span class="w">
</span><span class="c1">#&gt;  [9] "Research funding"                 "Government funding of science"   </span><span class="w">
</span><span class="c1">#&gt; [11] "Research laboratories"            "Science policy and economics"    </span><span class="w">
</span><span class="c1">#&gt; [13] "Science and technology workforce" "Careers in research"             </span><span class="w">
</span><span class="c1">#&gt; [15] "Social and behavioral sciences"   "Sociology"                       </span><span class="w">
</span><span class="c1">#&gt; [17] "Sociology of knowledge"          </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0001248`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0001248`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0001248"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0001248`$categories</span><span class="w">
</span><span class="c1">#&gt; [1] "Research Article"             "Ecology"                     </span><span class="w">
</span><span class="c1">#&gt; [3] "Ecology/Ecosystem Ecology"    "Ecology/Evolutionary Ecology"</span><span class="w">
</span><span class="c1">#&gt; [5] "Ecology/Theoretical Ecology" </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0080763`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0080763`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0080763"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0080763`$categories</span><span class="w">
</span><span class="c1">#&gt;  [1] "Research Article"     "Biology"              "Ecology"             </span><span class="w">
</span><span class="c1">#&gt;  [4] "Autecology"           "Behavioral ecology"   "Community ecology"   </span><span class="w">
</span><span class="c1">#&gt;  [7] "Evolutionary ecology" "Population ecology"   "Evolutionary biology"</span><span class="w">
</span><span class="c1">#&gt; [10] "Behavioral ecology"   "Evolutionary ecology" "Population biology"  </span><span class="w">
</span><span class="c1">#&gt; [13] "Population ecology"  </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0102437`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0102437`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0102437"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0102437`$categories</span><span class="w">
</span><span class="c1">#&gt;  [1] "Research Article"                  </span><span class="w">
</span><span class="c1">#&gt;  [2] "Biology and life sciences"         </span><span class="w">
</span><span class="c1">#&gt;  [3] "Biogeography"                      </span><span class="w">
</span><span class="c1">#&gt;  [4] "Ecology"                           </span><span class="w">
</span><span class="c1">#&gt;  [5] "Ecosystems"                        </span><span class="w">
</span><span class="c1">#&gt;  [6] "Ecosystem engineering"             </span><span class="w">
</span><span class="c1">#&gt;  [7] "Ecosystem functioning"             </span><span class="w">
</span><span class="c1">#&gt;  [8] "Industrial ecology"                </span><span class="w">
</span><span class="c1">#&gt;  [9] "Spatial and landscape ecology"     </span><span class="w">
</span><span class="c1">#&gt; [10] "Urban ecology"                     </span><span class="w">
</span><span class="c1">#&gt; [11] "Computer and information sciences" </span><span class="w">
</span><span class="c1">#&gt; [12] "Geoinformatics"                    </span><span class="w">
</span><span class="c1">#&gt; [13] "Spatial analysis"                  </span><span class="w">
</span><span class="c1">#&gt; [14] "Earth sciences"                    </span><span class="w">
</span><span class="c1">#&gt; [15] "Geography"                         </span><span class="w">
</span><span class="c1">#&gt; [16] "Human geography"                   </span><span class="w">
</span><span class="c1">#&gt; [17] "Cultural geography"                </span><span class="w">
</span><span class="c1">#&gt; [18] "Social geography"                  </span><span class="w">
</span><span class="c1">#&gt; [19] "Ecology and environmental sciences"</span><span class="w">
</span><span class="c1">#&gt; [20] "Conservation science"              </span><span class="w">
</span><span class="c1">#&gt; [21] "Environmental protection"          </span><span class="w">
</span><span class="c1">#&gt; [22] "Nature-society interactions"       </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0017342`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0017342`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0017342"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0017342`$categories</span><span class="w">
</span><span class="c1">#&gt;  [1] "Research Article"     "Biology"              "Ecology"             </span><span class="w">
</span><span class="c1">#&gt;  [4] "Community ecology"    "Community assembly"   "Community structure" </span><span class="w">
</span><span class="c1">#&gt;  [7] "Niche construction"   "Ecological metrics"   "Species diversity"   </span><span class="w">
</span><span class="c1">#&gt; [10] "Species richness"     "Biodiversity"         "Biogeography"        </span><span class="w">
</span><span class="c1">#&gt; [13] "Population ecology"   "Mathematics"          "Statistics"          </span><span class="w">
</span><span class="c1">#&gt; [16] "Biostatistics"        "Statistical theories" "Ecology"             </span><span class="w">
</span><span class="c1">#&gt; [19] "Mathematics"         </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0091497`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0091497`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0091497"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0091497`$categories</span><span class="w">
</span><span class="c1">#&gt; [1] "Correction"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0092931`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0092931`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pone.0092931"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pone.0092931`$categories</span><span class="w">
</span><span class="c1">#&gt; [1] "Correction"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pcbi.1003594`</span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pcbi.1003594`$doi</span><span class="w">
</span><span class="c1">#&gt; [1] "10.1371/journal.pcbi.1003594"</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $plos$`10.1371/journal.pcbi.1003594`$categories</span><span class="w">
</span><span class="c1">#&gt; [1] "Research Article"          "Biology and life sciences"</span><span class="w">
</span><span class="c1">#&gt; [3] "Computational biology"     "Microbiology"             </span><span class="w">
</span><span class="c1">#&gt; [5] "Theoretical biology"</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">tabularize</code> attempts to help you put the data that comes out of <code class="language-plaintext highlighter-rouge">chunks()</code> in to a <code class="language-plaintext highlighter-rouge">data.frame</code>, that we all know and love.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">chunks</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"doi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"history"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">tabularize</span><span class="p">()</span><span class="w">
</span><span class="c1">#&gt; $plos</span><span class="w">
</span><span class="c1">#&gt;                            doi history.received history.accepted</span><span class="w">
</span><span class="c1">#&gt; 1 10.1371/journal.pone.0059813       2012-09-16       2013-02-19</span><span class="w">
</span><span class="c1">#&gt; 2 10.1371/journal.pone.0001248       2007-07-02       2007-11-06</span><span class="w">
</span><span class="c1">#&gt; 3 10.1371/journal.pone.0080763       2013-08-15       2013-10-16</span><span class="w">
</span><span class="c1">#&gt; 4 10.1371/journal.pone.0102437       2013-11-27       2014-06-19</span><span class="w">
</span><span class="c1">#&gt; 5 10.1371/journal.pone.0017342       2010-08-24       2011-01-31</span><span class="w">
</span><span class="c1">#&gt; 6 10.1371/journal.pone.0091497             &lt;NA&gt;             &lt;NA&gt;</span><span class="w">
</span><span class="c1">#&gt; 7 10.1371/journal.pone.0092931             &lt;NA&gt;             &lt;NA&gt;</span><span class="w">
</span><span class="c1">#&gt; 8 10.1371/journal.pcbi.1003594       2014-01-09       2014-03-14</span><span class="w">
</span></code></pre></div></div>

<h2 id="bring-it-all-together">Bring it all together</h2>

<p>With the pieces above, let’s see what it looks like all in one go. Here, we’ll search for articles on <em>climate change</em>, then visualize word usage in those articles.</p>

<h3 id="search">Search</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_search</span><span class="p">(</span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'climate change'</span><span class="p">,</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'plos'</span><span class="p">,</span><span class="w"> </span><span class="n">limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; Query:</span><span class="w">
</span><span class="c1">#&gt;   [climate change] </span><span class="w">
</span><span class="c1">#&gt; Found:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 11737; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0] </span><span class="w">
</span><span class="c1">#&gt; Returned:</span><span class="w">
</span><span class="c1">#&gt;   [PLoS: 100; BMC: 0; Crossref: 0; Entrez: 0; arxiv: 0; biorxiv: 0]</span><span class="w">
</span></code></pre></div></div>

<h3 id="get-full-text-1">Get full text</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">texts</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ft_get</span><span class="p">(</span><span class="n">out</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; [Docs] 99 </span><span class="w">
</span><span class="c1">#&gt; [Source] R session  </span><span class="w">
</span><span class="c1">#&gt; [IDs] 10.1371/journal.pone.0054839 10.1371/journal.pone.0045683</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0050182 10.1371/journal.pone.0118489</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0053646 10.1371/journal.pone.0015103</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pone.0008320 10.1371/journal.pmed.1001227</span><span class="w">
</span><span class="c1">#&gt;      10.1371/journal.pmed.1001374 10.1371/journal.pone.0097480 ...</span><span class="w">
</span></code></pre></div></div>

<p>Because PLOS returns XML, we don’t need to do a PDF extraction step. However, if we got full text from arXiv or bioRxiv, we’d need to extract from PDFs first.</p>

<h3 id="pull-out-chunks">Pull out chunks</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">abs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">texts</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">chunks</span><span class="p">(</span><span class="s2">"abstract"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Let’s pull out just the text</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">abs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">abs</span><span class="o">$</span><span class="n">plos</span><span class="p">,</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">paste0</span><span class="p">(</span><span class="n">z</span><span class="o">$</span><span class="n">abstract</span><span class="p">,</span><span class="w"> </span><span class="n">collapse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">" "</span><span class="p">)</span><span class="w">
</span><span class="p">})</span><span class="w">
</span></code></pre></div></div>

<h3 id="analyze">Analyze</h3>

<p>Using the <code class="language-plaintext highlighter-rouge">tm</code> package, we can analyze our articles</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"tm"</span><span class="p">)</span><span class="w">
</span><span class="n">corp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">VCorpus</span><span class="p">(</span><span class="n">VectorSource</span><span class="p">(</span><span class="n">abs</span><span class="p">))</span><span class="w">
</span><span class="c1"># remove stop words, strip whitespace, remove punctuation</span><span class="w">
</span><span class="n">corp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tm_map</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span><span class="w"> </span><span class="n">removeWords</span><span class="p">,</span><span class="w"> </span><span class="n">stopwords</span><span class="p">(</span><span class="s2">"english"</span><span class="p">))</span><span class="w">
</span><span class="n">corp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tm_map</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span><span class="w"> </span><span class="n">stripWhitespace</span><span class="p">)</span><span class="w">
</span><span class="n">corp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tm_map</span><span class="p">(</span><span class="n">corp</span><span class="p">,</span><span class="w"> </span><span class="n">removePunctuation</span><span class="p">)</span><span class="w">
</span><span class="c1"># Make a term document matrix</span><span class="w">
</span><span class="n">tdm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">TermDocumentMatrix</span><span class="p">(</span><span class="n">corp</span><span class="p">)</span><span class="w">
</span><span class="c1"># remove sparse terms</span><span class="w">
</span><span class="n">tdm</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">removeSparseTerms</span><span class="p">(</span><span class="n">tdm</span><span class="p">,</span><span class="w"> </span><span class="n">sparse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">)</span><span class="w">
</span><span class="c1"># get data</span><span class="w">
</span><span class="n">rs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rowSums</span><span class="p">(</span><span class="n">as.matrix</span><span class="p">(</span><span class="n">tdm</span><span class="p">))</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">word</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">rs</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">unname</span><span class="p">(</span><span class="n">rs</span><span class="p">),</span><span class="w"> </span><span class="n">stringsAsFactors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h3 id="visualize">Visualize</h3>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"ggplot2"</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">reorder</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">),</span><span class="w"> </span><span class="n">n</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Count"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Word"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/public/img/2015-08-07-full-text/unnamed-chunk-23-1.png" alt="plot of chunk unnamed-chunk-23" /></p>

  </div>

  <footer class="postNavigation">
  
    <a class="postPrev" href="/2015/07/weather-data-with-rnoaa/">
        &laquo; rnoaa - Weather data in R
    </a>
  
  
    <a class="postNext" href="/2015/09/oai-client/">
        oai - an OAI-PMH client &raquo;
    </a>
  
  </footer>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading small-site-title">Scott Chamberlain</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list footer-content">
          <li>Theme: <a href="http://github.com/hemangsk/Gravity">Gravity</a></li>
          <li>Made with <i class="fa fa-heart"></i> on <a href="https://jekyllrb.com"><span style="color:black">{ { Jekyll } }</a></span></li>


        </ul>
      </div>

      <div class="footer-col footer-col-3 footer-content">
        <ul class="social-media-list">
          <li>
            <i class="fab fa-mastodon"></i> @sckottie@fosstodon.org
          </li>
          <li>
            <i class="fab fa-github"></i> sckott
          </li>
          <!-- 
          <li>
            <a href="https://github.com/sckott"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">sckott</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username"></span></a>

          </li>
           -->
        </ul>
      </div>

      <div class="footer-col footer-col-2 site-description">
        <p style="display:inline">RSS</p>
        <a href="/feed.xml"><i class="fa fa-rss fa-lg"></i></a>&nbsp;
      </div>

      <!-- Begin Mailchimp Signup Form -->
      <!-- <link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
      <style type="text/css">
        #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
      </style>
      <div id="mc_embed_signup">
      <form action="https://recology.us7.list-manage.com/subscribe/post?u=8c97c072b016bf98033ec69cd&amp;id=3bc4378262" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          <div id="mc_embed_signup_scroll">
        
        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
          <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8c97c072b016bf98033ec69cd_3bc4378262" tabindex="-1" value=""></div>
          <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
          </div>
      </form>
      </div> -->

      <!--End mc_embed_signup-->
    </div>

  </div>

</footer>


    <!--[if !(lt IE 8)]><!-->
    <script type="text/javascript">
      (function(){
        var e = document.createElement('script'); e.type='text/javascript'; e.async = true;
        e.src = 'https://www.eff.org/doa/widget.min.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(e, s);
      })();
    </script>
    <!--<![endif]-->

  </body>

</html>
