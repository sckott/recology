<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>rnoaa - Weather data in R</title>
  <meta name="description" content="NOAA provides a lot of weather data, across many different websites under different project names. The R package rnoaa accesses many of these, including:">
  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic|Source+Sans+Pro:400,700,200,300|Josefin+Sans:400,600,700,300' rel='stylesheet' type='text/css'>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">

  <script async defer data-domain="recology.info" src="https://plausible.io/js/plausible.js"></script>

  <link rel="stylesheet" href="/css/style.css">
  <link rel="canonical" href="http://localhost:4000/2015/07/weather-data-with-rnoaa/">
  <link rel="alternate" type="application/rss+xml" title="recology" href="http://localhost:4000/feed.xml">
</head>


  <body>

    
<div class="wrapper">
  <center> <a href="/index.html"><div class="site-title">   recology </div></a></center>
</div>
<div class="wrapper site-description">
<center>  code and such </center>
</div>
<div class="wrapper">
  <div class="trigger site-navigation">
    <a class="page-link" href="/">HOME</a>

    
    
    
    
    
    

    <span class="exclamationMark">/</span><a class="page-link" href="/archives/">Archives</a>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </div>
</div>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline"><a class="post-title-link"  href="/2015/07/weather-data-with-rnoaa/">rnoaa - Weather data in R</a></h1>
  <center>  <p class="post-meta"><time datetime="2015-07-07T00:00:00-07:00" itemprop="datePublished">Jul 7, 2015</time></p>
   </center>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>NOAA provides a lot of weather data, across many different websites under different project names. The R package <code class="language-plaintext highlighter-rouge">rnoaa</code> accesses many of these, including:</p>

<ul>
  <li>NOAA NCDC climate data, using the <a href="http://www.ncdc.noaa.gov/cdo-web/webservices/v2">NCDC API version 2</a></li>
  <li><a href="ftp://ftp.ncdc.noaa.gov/pub/data/ghcn/daily/">GHCND FTP data</a></li>
  <li><a href="ftp://ftp.ncdc.noaa.gov/pub/data/noaa/">ISD FTP data</a></li>
  <li>Severe weather data docs are at <a href="http://www.ncdc.noaa.gov/swdiws/">http://www.ncdc.noaa.gov/swdiws/</a></li>
  <li><a href="ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/shapefiles">Sea ice data</a></li>
  <li><a href="http://www.ndbc.noaa.gov/">NOAA buoy data</a></li>
  <li>Tornadoes! Data from the <a href="http://www.spc.noaa.gov/gis/svrgis/">NOAA Storm Prediction Center</a></li>
  <li>HOMR - Historical Observing Metadata Repository - from <a href="http://www.ncdc.noaa.gov/homr/api">NOAA NCDC</a></li>
  <li>Storm data - from the <a href="http://www.ncdc.noaa.gov/ibtracs/index.php?name=wmo-data">International Best Track Archive for Climate Stewardship (IBTrACS)</a></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">rnoaa</code> used to provide access to <a href="http://upwell.pfeg.noaa.gov/erddap/index.html">ERDDAP servers</a>, but a separate package <a href="https://github.com/ropensci/rerddap">rerddap</a> focuses on just those data sources.</p>

<p>We focus on getting you the data, so there’s very little in <code class="language-plaintext highlighter-rouge">rnoaa</code> for visualizing, statistics, etc.</p>

<h2 id="installation">Installation</h2>

<p>The newest version should be on CRAN in the next few days. In the meantime, let’s install from GitHub</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">devtools</span><span class="o">::</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"ropensci/rnoaa"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"rnoaa"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>There’s an example using the <code class="language-plaintext highlighter-rouge">lawn</code>, <code class="language-plaintext highlighter-rouge">sp</code>, and <code class="language-plaintext highlighter-rouge">dplyr</code> packages. If you want to try those, install like</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"lawn"</span><span class="p">,</span><span class="w"> </span><span class="s2">"dplyr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"sp"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<h2 id="ncdc">NCDC</h2>

<ul>
  <li>NCDC = National Climatic Data Center</li>
  <li>Data comes from a RESTful API described at <a href="http://www.ncdc.noaa.gov/cdo-web/webservices/v2">http://www.ncdc.noaa.gov/cdo-web/webservices/v2</a></li>
</ul>

<p>This web service requires an API key - get one at <a href="http://www.ncdc.noaa.gov/cdo-web/token">http://www.ncdc.noaa.gov/cdo-web/token</a> if you don’t already have one. NCDC provides access to many different datasets:</p>

<table>
<thead>
<tr class="header">
<th align="left">Dataset</th>
<th align="left">Description</th>
<th align="left">Start date</th>
<th align="left">End date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ANNUAL</td>
<td align="left">Annual Summaries</td>
<td align="left">1831-02-01</td>
<td align="left">2013-11-01</td>
</tr>
<tr class="even">
<td align="left">GHCND</td>
<td align="left">Daily Summaries</td>
<td align="left">1763-01-01</td>
<td align="left">2014-03-15</td>
</tr>
<tr class="odd">
<td align="left">GHCNDMS</td>
<td align="left">Monthly Summaries</td>
<td align="left">1763-01-01</td>
<td align="left">2014-01-01</td>
</tr>
<tr class="even">
<td align="left">NORMAL_ANN</td>
<td align="left">Normals Annual/Seasonal</td>
<td align="left">2010-01-01</td>
<td align="left">2010-01-01</td>
</tr>
<tr class="odd">
<td align="left">NORMAL_DLY</td>
<td align="left">Normals Daily</td>
<td align="left">2010-01-01</td>
<td align="left">2010-12-31</td>
</tr>
<tr class="even">
<td align="left">NORMAL_HLY</td>
<td align="left">Normals Hourly</td>
<td align="left">2010-01-01</td>
<td align="left">2010-12-31</td>
</tr>
<tr class="odd">
<td align="left">NORMAL_MLY</td>
<td align="left">Normals Monthly</td>
<td align="left">2010-01-01</td>
<td align="left">2010-12-01</td>
</tr>
<tr class="even">
<td align="left">PRECIP_15</td>
<td align="left">Precipitation 15 Minute</td>
<td align="left">1970-05-12</td>
<td align="left">2013-03-01</td>
</tr>
<tr class="odd">
<td align="left">PRECIP_HLY</td>
<td align="left">Precipitation Hourly</td>
<td align="left">1900-01-01</td>
<td align="left">2013-03-01</td>
</tr>
<tr class="even">
<td align="left">NEXRAD2</td>
<td align="left">Nexrad Level II</td>
<td align="left">1991-06-05</td>
<td align="left">2014-03-14</td>
</tr>
<tr class="odd">
<td align="left">NEXRAD3</td>
<td align="left">Nexrad Level III</td>
<td align="left">1994-05-20</td>
<td align="left">2014-03-11</td>
</tr>
</tbody>
</table>

<p>The main function to get data from NCDC is <code class="language-plaintext highlighter-rouge">ncdc()</code>. <code class="language-plaintext highlighter-rouge">datasetid</code>, <code class="language-plaintext highlighter-rouge">startdate</code>, and <code class="language-plaintext highlighter-rouge">enddate</code> are required parameters. A quick example, here getting data from the GHCND dataset, from a particular station, and from Oct 1st 2013 to Dec 12th 2013:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ncdc</span><span class="p">(</span><span class="n">datasetid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'GHCND'</span><span class="p">,</span><span class="w"> </span><span class="n">stationid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'GHCND:USW00014895'</span><span class="p">,</span><span class="w"> </span><span class="n">startdate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'2013-10-01'</span><span class="p">,</span><span class="w">
   </span><span class="n">enddate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'2013-12-01'</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; $meta</span><span class="w">
</span><span class="c1">#&gt; $meta$totalCount</span><span class="w">
</span><span class="c1">#&gt; [1] 697</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $meta$pageCount</span><span class="w">
</span><span class="c1">#&gt; [1] 25</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $meta$offset</span><span class="w">
</span><span class="c1">#&gt; [1] 1</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data</span><span class="w">
</span><span class="c1">#&gt; Source: local data frame [25 x 8]</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;                   date datatype           station value fl_m fl_q fl_so</span><span class="w">
</span><span class="c1">#&gt; 1  2013-10-01T00:00:00     AWND GHCND:USW00014895    29               W</span><span class="w">
</span><span class="c1">#&gt; 2  2013-10-01T00:00:00     PRCP GHCND:USW00014895     0               W</span><span class="w">
</span><span class="c1">#&gt; 3  2013-10-01T00:00:00     SNOW GHCND:USW00014895     0               W</span><span class="w">
</span><span class="c1">#&gt; 4  2013-10-01T00:00:00     SNWD GHCND:USW00014895     0               W</span><span class="w">
</span><span class="c1">#&gt; 5  2013-10-01T00:00:00     TAVG GHCND:USW00014895   179    H          S</span><span class="w">
</span><span class="c1">#&gt; 6  2013-10-01T00:00:00     TMAX GHCND:USW00014895   250               W</span><span class="w">
</span><span class="c1">#&gt; 7  2013-10-01T00:00:00     TMIN GHCND:USW00014895   133               W</span><span class="w">
</span><span class="c1">#&gt; 8  2013-10-01T00:00:00     WDF2 GHCND:USW00014895   210               W</span><span class="w">
</span><span class="c1">#&gt; 9  2013-10-01T00:00:00     WDF5 GHCND:USW00014895   230               W</span><span class="w">
</span><span class="c1">#&gt; 10 2013-10-01T00:00:00     WSF2 GHCND:USW00014895    76               W</span><span class="w">
</span><span class="c1">#&gt; ..                 ...      ...               ...   ...  ...  ...   ...</span><span class="w">
</span><span class="c1">#&gt; Variables not shown: fl_t (chr)</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; attr(,"class")</span><span class="w">
</span><span class="c1">#&gt; [1] "ncdc_data"</span><span class="w">
</span></code></pre></div></div>

<p>You probably won’t know what station you want data from off hand though, so you can first search for  stations, in this example using a bounding box that defines a rectangular area near Seattle</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"lawn"</span><span class="p">)</span><span class="w">
</span><span class="n">lawn_bbox_polygon</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">-122.2047</span><span class="p">,</span><span class="w"> </span><span class="m">47.5204</span><span class="p">,</span><span class="w"> </span><span class="m">-122.1065</span><span class="p">,</span><span class="w"> </span><span class="m">47.6139</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">view</span><span class="w">
</span></code></pre></div></div>

<p><img src="/public/img/2015-07-07-weather-data-with-rnoaa/lawnplot.png" alt="lawnplot" /></p>

<p>We’ll search within that bounding box for weather stations.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ncdc_stations</span><span class="p">(</span><span class="n">extent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">47.5204</span><span class="p">,</span><span class="w"> </span><span class="m">-122.2047</span><span class="p">,</span><span class="w"> </span><span class="m">47.6139</span><span class="p">,</span><span class="w"> </span><span class="m">-122.1065</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; $meta</span><span class="w">
</span><span class="c1">#&gt; $meta$totalCount</span><span class="w">
</span><span class="c1">#&gt; [1] 9</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $meta$pageCount</span><span class="w">
</span><span class="c1">#&gt; [1] 25</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $meta$offset</span><span class="w">
</span><span class="c1">#&gt; [1] 1</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data</span><span class="w">
</span><span class="c1">#&gt; Source: local data frame [9 x 9]</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;   elevation    mindate    maxdate latitude                         name</span><span class="w">
</span><span class="c1">#&gt; 1     199.6 2008-06-01 2015-06-29  47.5503      EASTGATE 1.7 SSW, WA US</span><span class="w">
</span><span class="c1">#&gt; 2     240.8 2010-05-01 2015-07-05  47.5604       EASTGATE 1.1 SW, WA US</span><span class="w">
</span><span class="c1">#&gt; 3      85.6 2008-07-01 2015-07-05  47.5916        BELLEVUE 0.8 S, WA US</span><span class="w">
</span><span class="c1">#&gt; 4     104.2 2008-06-01 2015-07-05  47.5211 NEWPORT HILLS 1.9 SSE, WA US</span><span class="w">
</span><span class="c1">#&gt; 5      58.5 2008-08-01 2009-04-12  47.6138      BELLEVUE 2.3 ENE, WA US</span><span class="w">
</span><span class="c1">#&gt; 6     199.9 2008-06-01 2009-11-22  47.5465   NEWPORT HILLS 1.4 E, WA US</span><span class="w">
</span><span class="c1">#&gt; 7      27.1 2008-07-01 2015-07-05  47.6046        BELLEVUE 1.8 W, WA US</span><span class="w">
</span><span class="c1">#&gt; 8     159.4 2008-11-01 2015-07-05  47.5694      BELLEVUE 2.3 SSE, WA US</span><span class="w">
</span><span class="c1">#&gt; 9      82.3 2008-12-01 2010-09-17  47.6095       BELLEVUE 0.6 NE, WA US</span><span class="w">
</span><span class="c1">#&gt; Variables not shown: datacoverage (dbl), id (chr), elevationUnit (chr),</span><span class="w">
</span><span class="c1">#&gt;   longitude (dbl)</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; attr(,"class")</span><span class="w">
</span><span class="c1">#&gt; [1] "ncdc_stations"</span><span class="w">
</span></code></pre></div></div>

<p>And there are 9 found. We could then use their station ids (e.g., <code class="language-plaintext highlighter-rouge">GHCND:US1WAKG0024</code>) to search for data using <code class="language-plaintext highlighter-rouge">ncdc()</code>, or search for what kind of data that station has with <code class="language-plaintext highlighter-rouge">ncdc_datasets()</code>, or other functions.</p>

<h2 id="ghcnd">GHCND</h2>

<ul>
  <li>GHCND = Global Historical Climatology Network Daily (Data)</li>
  <li>Data comes from an FTP server</li>
</ul>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="s2">"dplyr"</span><span class="p">)</span><span class="w">
</span><span class="n">dat</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ghcnd</span><span class="p">(</span><span class="n">stationid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"AGE00147704"</span><span class="p">)</span><span class="w">
</span><span class="n">dat</span><span class="o">$</span><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">filter</span><span class="p">(</span><span class="n">element</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"PRCP"</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1909</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt;            id year month element VALUE1 MFLAG1 QFLAG1 SFLAG1 VALUE2 MFLAG2</span><span class="w">
</span><span class="c1">#&gt; 1 AGE00147704 1909    11    PRCP  -9999     NA                -9999     NA</span><span class="w">
</span><span class="c1">#&gt; 2 AGE00147704 1909    12    PRCP     23     NA             E      0     NA</span><span class="w">
</span><span class="c1">#&gt;   QFLAG2 SFLAG2 VALUE3 MFLAG3 QFLAG3 SFLAG3 VALUE4 MFLAG4 QFLAG4 SFLAG4</span><span class="w">
</span><span class="c1">#&gt; 1                -9999     NA                -9999     NA              </span><span class="w">
</span><span class="c1">#&gt; 2             E      0     NA             E      0     NA             E</span><span class="w">
</span><span class="c1">#&gt;   VALUE5 MFLAG5 QFLAG5 SFLAG5 VALUE6 MFLAG6 QFLAG6 SFLAG6 VALUE7 MFLAG7</span><span class="w">
</span><span class="c1">#&gt; 1  -9999     NA                -9999     NA                -9999     NA</span><span class="w">
</span><span class="c1">#&gt; 2      0     NA             E      0     NA             E      0     NA</span><span class="w">
</span><span class="c1">#&gt;   QFLAG7 SFLAG7 VALUE8 MFLAG8 QFLAG8 SFLAG8 VALUE9 MFLAG9 QFLAG9 SFLAG9</span><span class="w">
</span><span class="c1">#&gt; 1     NA         -9999     NA                -9999     NA              </span><span class="w">
</span><span class="c1">#&gt; 2     NA      E    250     NA             E     75     NA             E</span><span class="w">
</span><span class="c1">#&gt;   VALUE10 MFLAG10 QFLAG10 SFLAG10 VALUE11 MFLAG11 QFLAG11 SFLAG11 VALUE12</span><span class="w">
</span><span class="c1">#&gt; 1   -9999      NA                   -9999      NA                   -9999</span><span class="w">
</span><span class="c1">#&gt; 2     131      NA               E       0      NA               E       0</span><span class="w">
</span><span class="c1">#&gt;   MFLAG12 QFLAG12 SFLAG12 VALUE13 MFLAG13 QFLAG13 SFLAG13 VALUE14 MFLAG14</span><span class="w">
</span><span class="c1">#&gt; 1      NA                   -9999      NA                   -9999      NA</span><span class="w">
</span><span class="c1">#&gt; 2      NA               E       0      NA               E       0      NA</span><span class="w">
</span><span class="c1">#&gt;   QFLAG14 SFLAG14 VALUE15 MFLAG15 QFLAG15 SFLAG15 VALUE16 MFLAG16 QFLAG16</span><span class="w">
</span><span class="c1">#&gt; 1                   -9999      NA                   -9999      NA        </span><span class="w">
</span><span class="c1">#&gt; 2               E       0      NA               E       0      NA        </span><span class="w">
</span><span class="c1">#&gt;   SFLAG16 VALUE17 MFLAG17 QFLAG17 SFLAG17 VALUE18 MFLAG18 QFLAG18 SFLAG18</span><span class="w">
</span><span class="c1">#&gt; 1           -9999      NA                   -9999      NA                </span><span class="w">
</span><span class="c1">#&gt; 2       E       0      NA               E       0      NA               E</span><span class="w">
</span><span class="c1">#&gt;   VALUE19 MFLAG19 QFLAG19 SFLAG19 VALUE20 MFLAG20 QFLAG20 SFLAG20 VALUE21</span><span class="w">
</span><span class="c1">#&gt; 1   -9999      NA      NA           -9999      NA      NA           -9999</span><span class="w">
</span><span class="c1">#&gt; 2       0      NA      NA       E       0      NA      NA       E       0</span><span class="w">
</span><span class="c1">#&gt;   MFLAG21 QFLAG21 SFLAG21 VALUE22 MFLAG22 QFLAG22 SFLAG22 VALUE23 MFLAG23</span><span class="w">
</span><span class="c1">#&gt; 1      NA                   -9999      NA                      22      NA</span><span class="w">
</span><span class="c1">#&gt; 2      NA               E       0      NA               E       0      NA</span><span class="w">
</span><span class="c1">#&gt;   QFLAG23 SFLAG23 VALUE24 MFLAG24 QFLAG24 SFLAG24 VALUE25 MFLAG25 QFLAG25</span><span class="w">
</span><span class="c1">#&gt; 1      NA       E       9      NA      NA       E       5      NA      NA</span><span class="w">
</span><span class="c1">#&gt; 2      NA       E       0      NA      NA       E       0      NA      NA</span><span class="w">
</span><span class="c1">#&gt;   SFLAG25 VALUE26 MFLAG26 QFLAG26 SFLAG26 VALUE27 MFLAG27 QFLAG27 SFLAG27</span><span class="w">
</span><span class="c1">#&gt; 1       E       0      NA               E      86      NA      NA       E</span><span class="w">
</span><span class="c1">#&gt; 2       E       0      NA               E       0      NA      NA       E</span><span class="w">
</span><span class="c1">#&gt;   VALUE28 MFLAG28 QFLAG28 SFLAG28 VALUE29 MFLAG29 QFLAG29 SFLAG29 VALUE30</span><span class="w">
</span><span class="c1">#&gt; 1       0      NA      NA       E      28      NA      NA       E       0</span><span class="w">
</span><span class="c1">#&gt; 2       0      NA      NA       E       0      NA      NA       E       0</span><span class="w">
</span><span class="c1">#&gt;   MFLAG30 QFLAG30 SFLAG30 VALUE31 MFLAG31 QFLAG31 SFLAG31</span><span class="w">
</span><span class="c1">#&gt; 1      NA               E   -9999      NA      NA        </span><span class="w">
</span><span class="c1">#&gt; 2      NA               E      57      NA      NA       E</span><span class="w">
</span></code></pre></div></div>

<p>You can also get to datasets by searching by station id, date min, date max, and variable. E.g.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ghcnd_search</span><span class="p">(</span><span class="s2">"AGE00147704"</span><span class="p">,</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"PRCP"</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; $prcp</span><span class="w">
</span><span class="c1">#&gt; Source: local data frame [9,803 x 6]</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;             id  prcp       date mflag qflag sflag</span><span class="w">
</span><span class="c1">#&gt; 1  AGE00147704 -9999 1909-11-01    NA            </span><span class="w">
</span><span class="c1">#&gt; 2  AGE00147704    23 1909-12-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 3  AGE00147704    81 1910-01-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 4  AGE00147704     0 1910-02-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 5  AGE00147704    18 1910-03-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 6  AGE00147704     0 1910-04-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 7  AGE00147704   223 1910-05-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 8  AGE00147704     0 1910-06-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 9  AGE00147704     0 1910-07-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; 10 AGE00147704     0 1910-08-01    NA           E</span><span class="w">
</span><span class="c1">#&gt; ..         ...   ...        ...   ...   ...   ...</span><span class="w">
</span></code></pre></div></div>

<h2 id="isd">ISD</h2>

<ul>
  <li>ISD = Integrated Surface Database</li>
  <li>Data comes from an FTP server</li>
</ul>

<p>You’ll likely first want to run <code class="language-plaintext highlighter-rouge">isd_stations()</code> to get list of stations</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stations</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">isd_stations</span><span class="p">()</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">stations</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt;   usaf  wban station_name ctry state icao lat lon elev_m    begin      end</span><span class="w">
</span><span class="c1">#&gt; 1 7005 99999   CWOS 07005                  NA  NA     NA 20120127 20120127</span><span class="w">
</span><span class="c1">#&gt; 2 7011 99999   CWOS 07011                  NA  NA     NA 20111025 20121129</span><span class="w">
</span><span class="c1">#&gt; 3 7018 99999   WXPOD 7018                   0   0   7018 20110309 20130730</span><span class="w">
</span><span class="c1">#&gt; 4 7025 99999   CWOS 07025                  NA  NA     NA 20120127 20120127</span><span class="w">
</span><span class="c1">#&gt; 5 7026 99999   WXPOD 7026   AF              0   0   7026 20120713 20141120</span><span class="w">
</span><span class="c1">#&gt; 6 7034 99999   CWOS 07034                  NA  NA     NA 20121024 20121106</span><span class="w">
</span></code></pre></div></div>

<p>Then get data from particular stations, like</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">isd</span><span class="p">(</span><span class="n">usaf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"011490"</span><span class="p">,</span><span class="w"> </span><span class="n">wban</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"99999"</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1986</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; &lt;ISD Data&gt;</span><span class="w">
</span><span class="c1">#&gt; Size: 1328 X 85</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;    total_chars usaf_station wban_station     date time date_flag latitude</span><span class="w">
</span><span class="c1">#&gt; 1           50        11490        99999 19860101    0         4    66267</span><span class="w">
</span><span class="c1">#&gt; 2          123        11490        99999 19860101  600         4    66267</span><span class="w">
</span><span class="c1">#&gt; 3           50        11490        99999 19860101 1200         4    66267</span><span class="w">
</span><span class="c1">#&gt; 4           94        11490        99999 19860101 1800         4    66267</span><span class="w">
</span><span class="c1">#&gt; 5           50        11490        99999 19860102    0         4    66267</span><span class="w">
</span><span class="c1">#&gt; 6          123        11490        99999 19860102  600         4    66267</span><span class="w">
</span><span class="c1">#&gt; 7           50        11490        99999 19860102 1200         4    66267</span><span class="w">
</span><span class="c1">#&gt; 8           94        11490        99999 19860102 1800         4    66267</span><span class="w">
</span><span class="c1">#&gt; 9           50        11490        99999 19860103    0         4    66267</span><span class="w">
</span><span class="c1">#&gt; 10         123        11490        99999 19860103  600         4    66267</span><span class="w">
</span><span class="c1">#&gt; ..         ...          ...          ...      ...  ...       ...      ...</span><span class="w">
</span><span class="c1">#&gt; Variables not shown: longitude (int), type_code (chr), elevation (int),</span><span class="w">
</span><span class="c1">#&gt;      call_letter (int), quality (chr), wind_direction (int),</span><span class="w">
</span><span class="c1">#&gt;      wind_direction_quality (int), wind_code (chr), wind_speed (int),</span><span class="w">
</span><span class="c1">#&gt;      wind_speed_quality (int), ceiling_height (int),</span><span class="w">
</span><span class="c1">#&gt;      ceiling_height_quality (int), ceiling_height_determination (chr),</span><span class="w">
</span><span class="c1">#&gt;      ceiling_height_cavok (chr), visibility_distance (int),</span><span class="w">
</span><span class="c1">#&gt;      visibility_distance_quality (int), visibility_code (chr),</span><span class="w">
</span><span class="c1">#&gt;      visibility_code_quality (int), temperature (int), temperature_quality</span><span class="w">
</span><span class="c1">#&gt;      (int), temperature_dewpoint (int), temperature_dewpoint_quality</span><span class="w">
</span><span class="c1">#&gt;      (int), air_pressure (int), air_pressure_quality (int),</span><span class="w">
</span><span class="c1">#&gt;      AG1.precipitation (chr), AG1.discrepancy (int), AG1.est_water_depth</span><span class="w">
</span><span class="c1">#&gt;      (int), GF1.sky_condition (chr), GF1.coverage (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.opaque_coverage (int), GF1.coverage_quality (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.lowest_cover (int), GF1.lowest_cover_quality (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.low_cloud_genus (int), GF1.low_cloud_genus_quality (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.lowest_cloud_base_height (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.lowest_cloud_base_height_quality (int), GF1.mid_cloud_genus</span><span class="w">
</span><span class="c1">#&gt;      (int), GF1.mid_cloud_genus_quality (int), GF1.high_cloud_genus (int),</span><span class="w">
</span><span class="c1">#&gt;      GF1.high_cloud_genus_quality (int), MD1.atmospheric_change (chr),</span><span class="w">
</span><span class="c1">#&gt;      MD1.tendency (int), MD1.tendency_quality (int), MD1.three_hr (int),</span><span class="w">
</span><span class="c1">#&gt;      MD1.three_hr_quality (int), MD1.twentyfour_hr (int),</span><span class="w">
</span><span class="c1">#&gt;      MD1.twentyfour_hr_quality (int), REM.remarks (chr), REM.identifier</span><span class="w">
</span><span class="c1">#&gt;      (chr), REM.length_quantity (int), REM.comment (chr), KA1.extreme_temp</span><span class="w">
</span><span class="c1">#&gt;      (chr), KA1.period_quantity (int), KA1.max_min (chr), KA1.temp (int),</span><span class="w">
</span><span class="c1">#&gt;      KA1.temp_quality (int), AY1.manual_occurrence (chr),</span><span class="w">
</span><span class="c1">#&gt;      AY1.condition_code (int), AY1.condition_quality (int), AY1.period</span><span class="w">
</span><span class="c1">#&gt;      (int), AY1.period_quality (int), AY2.manual_occurrence (chr),</span><span class="w">
</span><span class="c1">#&gt;      AY2.condition_code (int), AY2.condition_quality (int), AY2.period</span><span class="w">
</span><span class="c1">#&gt;      (int), AY2.period_quality (int), MW1.first_weather_reported (chr),</span><span class="w">
</span><span class="c1">#&gt;      MW1.condition (int), MW1.condition_quality (int),</span><span class="w">
</span><span class="c1">#&gt;      EQD.observation_identifier (chr), EQD.observation_text (int),</span><span class="w">
</span><span class="c1">#&gt;      EQD.reason_code (int), EQD.parameter (chr),</span><span class="w">
</span><span class="c1">#&gt;      EQD.observation_identifier.1 (chr), EQD.observation_text.1 (int),</span><span class="w">
</span><span class="c1">#&gt;      EQD.reason_code.1 (int), EQD.parameter.1 (chr)</span><span class="w">
</span></code></pre></div></div>

<h2 id="severe-weather">Severe weather</h2>

<ul>
  <li>SWDI = Severe Weather Data Inventory</li>
  <li>From the SWDI site</li>
</ul>

<blockquote>
  <p>The Severe Weather Data Inventory (SWDI) is an integrated database of severe weather records for the United States. The records in SWDI come from a variety of sources in the NCDC archive.</p>
</blockquote>

<p>The <code class="language-plaintext highlighter-rouge">swdi()</code> function allows you to get data in xml, csv, shp, or kmz format. You can get data from many different datasets:</p>

<ul>
  <li>nx3tvs NEXRAD Level-3 Tornado Vortex Signatures (point)</li>
  <li>nx3meso NEXRAD Level-3 Mesocyclone Signatures (point)</li>
  <li>nx3hail NEXRAD Level-3 Hail Signatures (point)</li>
  <li>nx3structure NEXRAD Level-3 Storm Cell Structure Information (point)</li>
  <li>plsr Preliminary Local Storm Reports (point)</li>
  <li>warn Severe Thunderstorm, Tornado, Flash Flood and Special Marine warnings (polygon)</li>
  <li>nldn Lightning strikes from Vaisala (.gov and .mil ONLY) (point)</li>
</ul>

<p>An example: Get all <code class="language-plaintext highlighter-rouge">plsr</code> within the bounding box (-91,30,-90,31)</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">swdi</span><span class="p">(</span><span class="n">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'plsr'</span><span class="p">,</span><span class="w"> </span><span class="n">startdate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'20060505'</span><span class="p">,</span><span class="w"> </span><span class="n">enddate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'20060510'</span><span class="p">,</span><span class="w">
</span><span class="n">bbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-91</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="m">-90</span><span class="p">,</span><span class="w"> </span><span class="m">31</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; $meta</span><span class="w">
</span><span class="c1">#&gt; $meta$totalCount</span><span class="w">
</span><span class="c1">#&gt; numeric(0)</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $meta$totalTimeInSeconds</span><span class="w">
</span><span class="c1">#&gt; [1] 0</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $data</span><span class="w">
</span><span class="c1">#&gt; Source: local data frame [5 x 8]</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;                  ztime     id        event magnitude            city</span><span class="w">
</span><span class="c1">#&gt; 1 2006-05-09T02:20:00Z 427540         HAIL         1    5 E KENTWOOD</span><span class="w">
</span><span class="c1">#&gt; 2 2006-05-09T02:40:00Z 427536         HAIL         1    MOUNT HERMAN</span><span class="w">
</span><span class="c1">#&gt; 3 2006-05-09T02:40:00Z 427537 TSTM WND DMG     -9999    MOUNT HERMAN</span><span class="w">
</span><span class="c1">#&gt; 4 2006-05-09T03:00:00Z 427199         HAIL         0     FRANKLINTON</span><span class="w">
</span><span class="c1">#&gt; 5 2006-05-09T03:17:00Z 427200      TORNADO     -9999 5 S FRANKLINTON</span><span class="w">
</span><span class="c1">#&gt; Variables not shown: county (chr), state (chr), source (chr)</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; $shape</span><span class="w">
</span><span class="c1">#&gt;                  shape</span><span class="w">
</span><span class="c1">#&gt; 1 POINT (-90.43 30.93)</span><span class="w">
</span><span class="c1">#&gt; 2  POINT (-90.3 30.96)</span><span class="w">
</span><span class="c1">#&gt; 3  POINT (-90.3 30.96)</span><span class="w">
</span><span class="c1">#&gt; 4 POINT (-90.14 30.85)</span><span class="w">
</span><span class="c1">#&gt; 5 POINT (-90.14 30.78)</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt; attr(,"class")</span><span class="w">
</span><span class="c1">#&gt; [1] "swdi"</span><span class="w">
</span></code></pre></div></div>

<h2 id="sea-ice">Sea ice</h2>

<p>The <code class="language-plaintext highlighter-rouge">seaice()</code> function simply grabs shape files that describe sea ice cover at the Northa and South poles, and can be useful for examining change through time in sea ice cover, among other things.</p>

<p>An example: Plot sea ice cover for April 1990 for the North pole.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">urls</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">seaiceeurls</span><span class="p">(</span><span class="n">mo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'Apr'</span><span class="p">,</span><span class="w"> </span><span class="n">pole</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'N'</span><span class="p">,</span><span class="w"> </span><span class="n">yr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1990</span><span class="p">)</span><span class="w">
</span><span class="n">out</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">seaice</span><span class="p">(</span><span class="n">urls</span><span class="p">)</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="s1">'ggplot2'</span><span class="p">)</span><span class="w">
</span><span class="n">ggplot</span><span class="p">(</span><span class="n">out</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">long</span><span class="p">,</span><span class="w"> </span><span class="n">lat</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">group</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"steelblue"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">theme_ice</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<p><img src="/public/img/2015-07-07-weather-data-with-rnoaa/unnamed-chunk-13-1.png" alt="plot of chunk unnamed-chunk-13" /></p>

<h2 id="buoys">Buoys</h2>

<ul>
  <li>Get NOAA buoy data from the National Buoy Data Center</li>
</ul>

<p>Using buoy data requires the <code class="language-plaintext highlighter-rouge">ncdf</code> package. Make sure you have that installed, like <code class="language-plaintext highlighter-rouge">install.packages("ncdf")</code>. <code class="language-plaintext highlighter-rouge">buoy()</code> and <code class="language-plaintext highlighter-rouge">buoys()</code> will fail if you don’t have <code class="language-plaintext highlighter-rouge">ncdf</code> installed.</p>

<p><code class="language-plaintext highlighter-rouge">buoys()</code> - Get available buoys given a dataset name</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">buoys</span><span class="p">(</span><span class="n">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'cwind'</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt;      id</span><span class="w">
</span><span class="c1">#&gt; 1 41001</span><span class="w">
</span><span class="c1">#&gt; 2 41002</span><span class="w">
</span><span class="c1">#&gt; 3 41004</span><span class="w">
</span><span class="c1">#&gt; 4 41006</span><span class="w">
</span><span class="c1">#&gt; 5 41008</span><span class="w">
</span><span class="c1">#&gt; 6 41009</span><span class="w">
</span><span class="c1">#&gt;                                                                       url</span><span class="w">
</span><span class="c1">#&gt; 1 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41001/catalog.html</span><span class="w">
</span><span class="c1">#&gt; 2 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41002/catalog.html</span><span class="w">
</span><span class="c1">#&gt; 3 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41004/catalog.html</span><span class="w">
</span><span class="c1">#&gt; 4 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41006/catalog.html</span><span class="w">
</span><span class="c1">#&gt; 5 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41008/catalog.html</span><span class="w">
</span><span class="c1">#&gt; 6 http://dods.ndbc.noaa.gov/thredds/catalog/data/cwind/41009/catalog.html</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">buoy()</code> - Get data for a buoy - if no year or datatype specified, we get the first file</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">buoy</span><span class="p">(</span><span class="n">dataset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'cwind'</span><span class="p">,</span><span class="w"> </span><span class="n">buoyid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">46085</span><span class="p">)</span><span class="w">
</span><span class="c1">#&gt; Dimensions (rows/cols): [33486 X 5] </span><span class="w">
</span><span class="c1">#&gt; 2 variables: [wind_dir, wind_spd] </span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;                    time latitude longitude wind_dir wind_spd</span><span class="w">
</span><span class="c1">#&gt; 1  2007-05-05T02:00:00Z   55.855  -142.559      331      2.8</span><span class="w">
</span><span class="c1">#&gt; 2  2007-05-05T02:10:00Z   55.855  -142.559      328      2.6</span><span class="w">
</span><span class="c1">#&gt; 3  2007-05-05T02:20:00Z   55.855  -142.559      329      2.2</span><span class="w">
</span><span class="c1">#&gt; 4  2007-05-05T02:30:00Z   55.855  -142.559      356      2.1</span><span class="w">
</span><span class="c1">#&gt; 5  2007-05-05T02:40:00Z   55.855  -142.559      360      1.5</span><span class="w">
</span><span class="c1">#&gt; 6  2007-05-05T02:50:00Z   55.855  -142.559       10      1.9</span><span class="w">
</span><span class="c1">#&gt; 7  2007-05-05T03:00:00Z   55.855  -142.559       10      2.2</span><span class="w">
</span><span class="c1">#&gt; 8  2007-05-05T03:10:00Z   55.855  -142.559       14      2.2</span><span class="w">
</span><span class="c1">#&gt; 9  2007-05-05T03:20:00Z   55.855  -142.559       16      2.1</span><span class="w">
</span><span class="c1">#&gt; 10 2007-05-05T03:30:00Z   55.855  -142.559       22      1.6</span><span class="w">
</span><span class="c1">#&gt; ..                  ...      ...       ...      ...      ...</span><span class="w">
</span></code></pre></div></div>

<h2 id="tornadoes">Tornadoes</h2>

<p>The function <code class="language-plaintext highlighter-rouge">tornadoes()</code> gets tornado data from <a href="http://www.spc.noaa.gov/gis/svrgis/">http://www.spc.noaa.gov/gis/svrgis/</a>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">shp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tornadoes</span><span class="p">()</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="s1">'sp'</span><span class="p">)</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/public/img/2015-07-07-weather-data-with-rnoaa/tornadoes.png" alt="tornadoes" /></p>

<h2 id="historical-observing-metadata-repository">Historical Observing Metadata Repository</h2>

<ul>
  <li>HOMR = Historical Observing Metadata Repository</li>
  <li>Data from RESTful API at <a href="http://www.ncdc.noaa.gov/homr/api">http://www.ncdc.noaa.gov/homr/api</a></li>
</ul>

<p><code class="language-plaintext highlighter-rouge">homr_definitions()</code> gets you definitions and metadata for datasets</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">homr_definitions</span><span class="p">())</span><span class="w">
</span><span class="c1">#&gt; Source: local data frame [6 x 7]</span><span class="w">
</span><span class="c1">#&gt; </span><span class="w">
</span><span class="c1">#&gt;   defType  abbr                fullName    displayName</span><span class="w">
</span><span class="c1">#&gt; 1     ids GHCND        GHCND IDENTIFIER       GHCND ID</span><span class="w">
</span><span class="c1">#&gt; 2     ids  COOP             COOP NUMBER        COOP ID</span><span class="w">
</span><span class="c1">#&gt; 3     ids  WBAN             WBAN NUMBER        WBAN ID</span><span class="w">
</span><span class="c1">#&gt; 4     ids   FAA FAA LOCATION IDENTIFIER         FAA ID</span><span class="w">
</span><span class="c1">#&gt; 5     ids  ICAO                 ICAO ID        ICAO ID</span><span class="w">
</span><span class="c1">#&gt; 6     ids TRANS          TRANSMITTAL ID Transmittal ID</span><span class="w">
</span><span class="c1">#&gt; Variables not shown: description (chr), cssaName (chr), ghcndName (chr)</span><span class="w">
</span></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">homr()</code> gets you metadata for stations given query parameters. In this example, search for data for the state of Delaware</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">homr</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'DE'</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="c1"># the stations</span><span class="w">
</span><span class="c1">#&gt;  [1] "10001871" "10100162" "10100164" "10100166" "20004155" "20004158"</span><span class="w">
</span><span class="c1">#&gt;  [7] "20004160" "20004162" "20004163" "20004168" "20004171" "20004176"</span><span class="w">
</span><span class="c1">#&gt; [13] "20004178" "20004179" "20004180" "20004182" "20004184" "20004185"</span><span class="w">
</span><span class="c1">#&gt; [19] "30001831" "30017384" "30020917" "30021161" "30021998" "30022674"</span><span class="w">
</span><span class="c1">#&gt; [25] "30026770" "30027455" "30032423" "30032685" "30034222" "30039554"</span><span class="w">
</span><span class="c1">#&gt; [31] "30043742" "30046662" "30046814" "30051475" "30057217" "30063570"</span><span class="w">
</span><span class="c1">#&gt; [37] "30064900" "30065901" "30067636" "30069663" "30075067" "30077378"</span><span class="w">
</span><span class="c1">#&gt; [43] "30077857" "30077923" "30077988" "30079088" "30079240" "30082430"</span><span class="w">
</span><span class="c1">#&gt; [49] "30084216" "30084262" "30084537" "30084796" "30094582" "30094639"</span><span class="w">
</span><span class="c1">#&gt; [55] "30094664" "30094670" "30094683" "30094730" "30094806" "30094830"</span><span class="w">
</span><span class="c1">#&gt; [61] "30094917" "30094931" "30094936" "30094991"</span><span class="w">
</span></code></pre></div></div>

<p>You can index to each one to get more data</p>

<h2 id="storms">Storms</h2>

<ul>
  <li>Data from: International Best Track Archive for Climate Stewardship (IBTrACS)</li>
  <li>Data comes from an FTP server</li>
</ul>

<p>Flat files (csv’s) are served up as well as shp files. In this example, plot storm data for the year 1940</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">res3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">storm_shp</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1940</span><span class="p">))</span><span class="w">
</span><span class="c1">#&gt; &lt;NOAA Storm Shp Files&gt;</span><span class="w">
</span><span class="c1">#&gt; Path: ~/.rnoaa/storms/year/Year.1940.ibtracs_all_points.v03r06.shp</span><span class="w">
</span><span class="c1">#&gt; Basin: &lt;NA&gt;</span><span class="w">
</span><span class="c1">#&gt; Storm: &lt;NA&gt;</span><span class="w">
</span><span class="c1">#&gt; Year: 1940</span><span class="w">
</span><span class="c1">#&gt; Type: points</span><span class="w">
</span><span class="n">res3shp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">storm_shp_read</span><span class="p">(</span><span class="n">res3</span><span class="p">)</span><span class="w">
</span><span class="n">sp</span><span class="o">::</span><span class="n">plot</span><span class="p">(</span><span class="n">res3shp</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/public/img/2015-07-07-weather-data-with-rnoaa/unnamed-chunk-19-1.png" alt="plot of chunk unnamed-chunk-19" /></p>

  </div>

  <footer class="postNavigation">
  
    <a class="postPrev" href="/2015/06/rerddap/">
        &laquo; rerddap - General purpose R client for ERDDAP servers
    </a>
  
  
    <a class="postNext" href="/2015/08/full-text/">
        fulltext - a package to help you mine text &raquo;
    </a>
  
  </footer>


</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading small-site-title">Scott Chamberlain</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list footer-content">
          <li>Theme: <a href="http://github.com/hemangsk/Gravity">Gravity</a></li>
          <li>Made with <i class="fa fa-heart"></i> on <a href="http://jekyllrb.com"><span style="color:black">{ { Jekyll } }</a></span></li>


        </ul>
      </div>

      <div class="footer-col footer-col-2 footer-content">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/sckott"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">sckott</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/sckottie"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">sckottie</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3 site-description">
        <p style="display:inline">code and such</p>
        <a href="/feed.xml"><i class="fa fa-rss fa-lg"></i></a>&nbsp;
      </div>
    </div>

  </div>

</footer>


    <!--[if !(lt IE 8)]><!-->
    <script type="text/javascript">
      (function(){
        var e = document.createElement('script'); e.type='text/javascript'; e.async = true;
        e.src = 'https://www.eff.org/doa/widget.min.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(e, s);
      })();
    </script>
    <!--<![endif]-->

  </body>

</html>
